# Name: mka_ical v0.7.0
# Display events from an ical file (Google Calendar, etc.)
# Author: Martin Kozianka + jcr
# URL: http://github.com/jools-r/mka_ical
# Recommended load order: 5
# .....................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the "Install plugin" box:
# .....................................................................

YToxNDp7czo0OiJuYW1lIjtzOjg6Im1rYV9pY2FsIjtzOjc6InZlcnNpb24iO3M6NToiMC43
LjAiO3M6NjoiYXV0aG9yIjtzOjIxOiJNYXJ0aW4gS296aWFua2EgKyBqY3IiO3M6MTA6ImF1
dGhvcl91cmkiO3M6MzQ6Imh0dHA6Ly9naXRodWIuY29tL2pvb2xzLXIvbWthX2ljYWwiO3M6
MTE6ImRlc2NyaXB0aW9uIjtzOjU2OiJEaXNwbGF5IGV2ZW50cyBmcm9tIGFuIGljYWwgZmls
ZSAoR29vZ2xlIENhbGVuZGFyLCBldGMuKSI7czo0OiJoZWxwIjtzOjA6IiI7czo0OiJjb2Rl
IjtzOjc0MjA1OiIKCi8vIFRYUCA0LjYrIHRhZyByZWdpc3RyYXRpb24KaWYgKGNsYXNzX2V4
aXN0cygnXFRleHRwYXR0ZXJuXFRhZ1xSZWdpc3RyeScpKSB7CiAgICBUeHA6OmdldCgnXFRl
eHRwYXR0ZXJuXFRhZ1xSZWdpc3RyeScpCiAgICAgICAgLT5yZWdpc3RlcignbWthX2ljYWwn
KQogICAgICAgIC0+cmVnaXN0ZXIoJ21rYV9mb3JtYXRfZGF0ZScpCiAgICAgICAgLT5yZWdp
c3RlcignbWthX2lmX2ZpcnN0X2V2ZW50JykKICAgICAgICAtPnJlZ2lzdGVyKCdta2FfaWZf
bGFzdF9ldmVudCcpCiAgICA7Cn0KCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24gbWthX2ljYWwoJGF0
dHMsICR0aGluZyA9ICcnKQp7CiAgICBnbG9iYWwgJG1rYV90aGlzX2ljYWxfZXZlbnQ7Cgog
ICAgZXh0cmFjdChsQXR0cyhhcnJheSgKICAgICAgICAndXJsJyA9PiAnJywKICAgICAgICAn
Y2FjaGluZ3RpbWUnID0+IDMwLAogICAgICAgICdnb29nbGVtYWlsJyA9PiAnJywKICAgICAg
ICAnZ29vZ2xlbWFpbGRvbWFpbicgPT4gJ2dvb2dsZW1haWwnLAogICAgICAgICdsaW1pdCcg
PT4gMCwKICAgICAgICAncGFzdGV2ZW50cycgPT4gZmFsc2UsCiAgICAgICAgJ2ZtdHRpbWUn
ID0+ICclSDolTScsCiAgICAgICAgJ2ZtdGRhdGUnID0+ICclZC4lbS4lWScsCiAgICAgICAg
J2ltZ2ZvbGRlcicgPT4gJycsCiAgICAgICAgJ2ltZ2NhdCcgPT4gJycsCiAgICAgICAgJ2Rl
ZmF1bHRpbWFnZScgPT4gJ25vbmUuZ2lmJywKICAgICAgICAnYnJlYWsnID0+ICdsaScsCiAg
ICAgICAgJ2NsYXNzJyA9PiBfX0ZVTkNUSU9OX18sCiAgICAgICAgJ2Nzc2lkJyA9PiAnaWNh
bGV2ZW50cycsCiAgICAgICAgJ2h0bWxfaWQnID0+ICdpY2FsZXZlbnRzJywKICAgICAgICAn
d3JhcHRhZycgPT4gJ3VsJywKICAgICAgICAnZm9ybScgPT4gJycKICAgICksICRhdHRzLCBm
YWxzZSkpOwoKICAgIC8vIENhdGVyIGZvciBsZWdhY3kgY3NzaWQgLT4gaHRtbF9pZAogICAg
Ly8gaWYgY3NzaWQgaXMgc3BlY2lmaWVkIGFuZCBub3QgZGVmYXVsdCB2YWx1ZSwgdXBkYXRl
IGh0bWxfaWQKICAgIGlmICgkY3NzaWQgIT0gJGh0bWxfaWQpIHsKICAgICAgICAkaHRtbF9p
ZCA9ICRjc3NpZDsKICAgIH0KCiAgICBpZiAoc3RybGVuKCR0aGluZykgPiAwKSB7CiAgICAg
ICAgLy8gVXNlIGNvbnRhaW5lZCBjb2RlCiAgICAgICAgJGJvZHkgPSAkdGhpbmc7CiAgICB9
IGVsc2VpZiAoIWVtcHR5KCRmb3JtKSkgewogICAgICAgIC8vIE9SOiBHZXQgZm9ybSBpZiBz
cGVjaWZpZWQKICAgICAgICAkYm9keSA9IGZldGNoX2Zvcm0oJGZvcm0pOwogICAgfSBlbHNl
IHsKICAgICAgICAvLyBFTFNFOiBEZWZhdWx0IG91dHB1dAogICAgICAgICRib2R5ID0gICc8
c3BhbiBjbGFzcz0iZGF0ZSI+e2RhdGV9PC9zcGFuPicKICAgICAgICAgICAgICAgIC4nPHNw
YW4gY2xhc3M9InRpdGxlIj57dGl0bGV9PC9zcGFuPicKICAgICAgICAgICAgICAgIC4nPHNw
YW4gY2xhc3M9ImRlc2NyaXB0aW9uIj57ZGVzY3JpcHRpb259PC9zcGFuPic7CiAgICB9Cgog
ICAgLy8gR2V0IHVybCBmcm9tIGdvb2dsZW1haWwtYWRkcmVzcwogICAgaWYgKHN0cmxlbigk
Z29vZ2xlbWFpbCkgPiAwKSB7CiAgICAgICAgJHRtcCA9IGV4cGxvZGUoIkAiLCAkZ29vZ2xl
bWFpbCk7CiAgICAgICAgaWYgKGNvdW50KCR0bXAgPiAxKSkgewogICAgICAgICAgICAvLyBG
dWxsIGVtYWlsIGFkZHJlc3M6IGp1c3QgZW5jb2RlICdAJyB0byAnJTQwJwogICAgICAgICAg
ICAkZ21haWwgPSByYXd1cmxlbmNvZGUoJGdvb2dsZW1haWwpOwogICAgICAgIH0gZWxzZSB7
CiAgICAgICAgICAgIC8vIEp1c3QgdXNlcm5hbWU6IGNvbnN0cnVjdCBlbWFpbCB1c2luZyBh
dHRyaWJ1dGUgImdvb2dsZW1haWxkb21haW4iIChlLmcuIGdvb2dsZW1haWwgLyBnbWFpbCkK
ICAgICAgICAgICAgJGdtYWlsID0gJHRtcFswXS4iJTQwIi4kZ29vZ2xlbWFpbGRvbWFpbi4i
LmNvbSI7CiAgICAgICAgfQovLyAgICAgICR1cmxzW10gPSAiaHR0cHM6Ly93d3cuZ29vZ2xl
LmNvbS9jYWxlbmRhci9pY2FsLyIuJGdtYWlsLiIvcHVibGljL2Jhc2ljLmljcyI7CiAgICAg
ICAgJHVybHNbXSA9ICJodHRwczovL2NhbGVuZGFyLmdvb2dsZS5jb20vY2FsZW5kYXIvaWNh
bC8iLiRnbWFpbC4iL3B1YmxpYy9iYXNpYy5pY3MiOwogICAgfQoKICAgIC8vIEFkZCBnaXZl
biB1cmxzIGZyb20gYXR0cmlidXRlIHVybAogICAgaWYgKHN0cmxlbigkdXJsKSA+IDApIHsK
ICAgICAgICBmb3JlYWNoIChleHBsb2RlKCIsIiwgJHVybCkgYXMgJHUpIHsKICAgICAgICAg
ICAgJHVybHNbXSA9IHRyaW0oJHUpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBObyB1cmwg
LS0+IG5vdGhpbmcgdG8gc2hvdyAtLT4gZXJyb3IgbWVzc2FnZS4KICAgIGlmIChzaXplb2Yo
JHVybHMpID09PSAwKSB7CiAgICAgICAgcmV0dXJuICJta2FfaWNhbCBFcnJvcjogTm8gdXJs
IHNwZWNpZmllZC4iOwogICAgfQoKICAgIC8vIEdldCBpbWFnZXMgZnJvbSBmb2xkZXIgYW5k
L29yIGNhdGVnb3J5CiAgICAkc2hvd19pbWcgPSBmYWxzZTsKICAgIGlmICgoc3RybGVuKCRp
bWdjYXQpID4gMCkgfHwgKHN0cmxlbigkaW1nZm9sZGVyKSA+IDApKSB7CiAgICAgICAgJGlt
YWdlcyA9IGFycmF5KCk7CgogICAgICAgIC8vIEFkZCBpbWFnZXMgZnJvbSBnaXZlbiBjYXRl
Z29yaWVzCiAgICAgICAgaWYgKHN0cmxlbigkaW1nY2F0KSA+IDApIHsKICAgICAgICAgICAg
JGltYWdlcyA9IG1rYV9pbWdhcnJheWZyb21jYXQoJGltZ2NhdCk7CiAgICAgICAgfQoKICAg
ICAgICAvLyBBZGQgaW1hZ2VzIGZyb20gZ2l2ZW4gZm9sZGVyCiAgICAgICAgaWYgKGZpbGVf
ZXhpc3RzKCRpbWdmb2xkZXIpKSB7CiAgICAgICAgICAgICRpbWFnZXMgPSBhcnJheV9tZXJn
ZShta2FfaW1nYXJyYXlmcm9tZm9sZGVyKCRpbWdmb2xkZXIpKTsKICAgICAgICB9CgogICAg
ICAgIGlmIChzaXplb2YoJGltYWdlcykgPiAwKSB7CiAgICAgICAgICAgICRzaG93X2ltZyA9
IHRydWU7CgogICAgICAgICAgICAvLyBHZXQgZGVmYXVsdCBpbWFnZQogICAgICAgICAgICAk
ZGVmaW1nID0gaWNhbF9kZWZpbWcoJGRlZmF1bHRpbWFnZSk7CiAgICAgICAgfQogICAgfQoK
ICAgIC8vIEdldCBldmVudHMgZnJvbSBjYWNoZQogICAgJGV2ZW50cyA9IGNoZWNrQ2FjaGUo
JHVybHMsICRjYWNoaW5ndGltZSk7CgogICAgLy8gU3RhcnQgY291bnRlcgogICAgJGNvdW50
ID0gMDsKICAgIC8vIEdldCB1aWQgb2YgbGFzdCBpdGVtCiAgICAkbGFzdF9ldmVudCA9IGVu
ZCgkZXZlbnRzKS0+dWlkOwoKICAgIC8vIExvb3AgdGhyb3VnaCBldmVudHMKICAgIGZvcmVh
Y2ggKCRldmVudHMgYXMgJGV2dCkgewoKICAgICAgICAvLyBUT0RPIDo6IHJlY3VycmVuY2Ug
YXVzd2VydGVuCgogICAgICAgIC8vIElzIGV2ZW50IGluIGZ1dHVyZSBvciBvbmdvaW5nPwog
ICAgICAgIC8vIGlmICgoJGV2dC0+Z2V0RW5kKCkgPiB0aW1lKCkpICYmICgkbGltaXQgPT0g
MCAgfHwgJGNvdW50IDwgJGxpbWl0ICkpCiAgICAgICAgaWYgKCgkcGFzdGV2ZW50cyB8fCAk
ZXZ0LT5lbmQgPiB0aW1lKCkpICYmICgkbGltaXQgPT0gMCB8fCAkY291bnQgPCAkbGltaXQp
KSB7CgogICAgICAgICAgICAvLyBBZHZhbmNlIGNvdW50ZXIKICAgICAgICAgICAgKyskY291
bnQ7CgogICAgICAgICAgICAvLyBGaXJzdCBldmVudAogICAgICAgICAgICAkbWthX3RoaXNf
aWNhbF9ldmVudFsnaXNfZmlyc3QnXSA9ICgkY291bnQgPT0gJzEnKTsKCiAgICAgICAgICAg
IC8vIExhc3QgZXZlbnQgaW4gYXJyYXkgb3IgbGFzdCBpbiBsaW1pdAogICAgICAgICAgICBp
ZiAoKCRldnQtPnVpZCA9PSAkbGFzdF9ldmVudCkgfHwgKCRjb3VudCA9PSAkbGltaXQpKSB7
CiAgICAgICAgICAgICAgICAkbWthX3RoaXNfaWNhbF9ldmVudFsnaXNfbGFzdCddID0gdHJ1
ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gVE9ETyA6OiBUZXh0aWxlUmVzdHJp
Y3RlZCgkdGV4dCwgJGxpdGUgPSAxLCAkbm9pbWFnZSA9IDEsICRyZWwgPSAnbm9mb2xsb3cn
KQogICAgICAgICAgICAkZXZ0LT5zdW0gPSBpY2FsX2Zvcm1hdFRleHQoJGV2dC0+c3VtKTsK
ICAgICAgICAgICAgJGV2dC0+ZGVzID0gaWNhbF9mb3JtYXRUZXh0KCRldnQtPmRlcyk7CiAg
ICAgICAgICAgICRldnQtPmxvYyA9IGljYWxfZm9ybWF0VGV4dCgkZXZ0LT5sb2MpOwoKICAg
ICAgICAgICAgJGRhdGVWaWV3ICA9IGljYWxfZ2V0RGF0ZVZpZXcoJGV2dCwgJGZtdGRhdGUs
ICRmbXR0aW1lKTsKICAgICAgICAgICAgJHN0YXJ0RGF0ZXRpbWUgPSBpY2FsX2dldERhdGVU
aW1lKCRldnQsICIlWS0lbS0lZCAlSDolTSIsIDApOyAvLyBkYXRldGltZSBmb3JtYXQKICAg
ICAgICAgICAgJHN0YXJ0RGF0ZSA9IGljYWxfZ2V0RGF0ZVRpbWUoJGV2dCwgJGZtdGRhdGUs
IDApOwogICAgICAgICAgICAkc3RhcnRUaW1lID0gaWNhbF9nZXREYXRlVGltZSgkZXZ0LCAk
Zm10dGltZSwgMCk7CiAgICAgICAgICAgICRlbmREYXRldGltZSA9IGljYWxfZ2V0RGF0ZVRp
bWUoJGV2dCwgIiVZLSVtLSVkICVIOiVNIiwgMCk7IC8vIGRhdGV0aW1lIGZvcm1hdAogICAg
ICAgICAgICAkZW5kRGF0ZSAgID0gaWNhbF9nZXREYXRlVGltZSgkZXZ0LCAkZm10ZGF0ZSwg
MSk7CiAgICAgICAgICAgICRlbmRUaW1lICAgPSBpY2FsX2dldERhdGVUaW1lKCRldnQsICRm
bXR0aW1lLCAxKTsKICAgICAgICAgICAgJGR1cmF0aW9uICA9IGdtZGF0ZSgiejpIOmk6cyIs
ICRldnQtPmR1cmF0aW9uKTsgLy8gY29udmVydCBzZWNvbmRzIHRvIGRheXM6aG91cnM6bWlu
dXRlczpzZWNvbmRzCgogICAgICAgICAgICAka2V5cyA9IGFycmF5KCk7CiAgICAgICAgICAg
ICR2YWxzID0gYXJyYXkoKTsKICAgICAgICAgICAgaWYgKCRzaG93X2ltZykgewogICAgICAg
ICAgICAgICAgJGltYWdlID0gaWNhbF9pbWcoJGV2dC0+c3VtLCAkaW1hZ2VzLCAkZGVmaW1n
KTsKICAgICAgICAgICAgICAgICRrZXlzW10gPSAne2ltYWdlc3JjfSc7CiAgICAgICAgICAg
ICAgICAkdmFsc1tdID0gJGltYWdlWydzcmMnXTsKICAgICAgICAgICAgICAgICRrZXlzW10g
PSAne2ltYWdlaWR9JzsKICAgICAgICAgICAgICAgICR2YWxzW10gPSAkaW1hZ2VbJ2lkJ107
CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJGtleXNbXSA9ICd7ZGF0ZX0nOwogICAgICAg
ICAgICAkdmFsc1tdID0gJGRhdGVWaWV3OwogICAgICAgICAgICAka2V5c1tdID0gJ3tzdGFy
dF9kYXRldGltZX0nOwogICAgICAgICAgICAkdmFsc1tdID0gJHN0YXJ0RGF0ZXRpbWU7CiAg
ICAgICAgICAgICRrZXlzW10gPSAne3N0YXJ0X2RhdGV9JzsKICAgICAgICAgICAgJHZhbHNb
XSA9ICRzdGFydERhdGU7CiAgICAgICAgICAgICRrZXlzW10gPSAne3N0YXJ0X3RpbWV9JzsK
ICAgICAgICAgICAgJHZhbHNbXSA9ICRzdGFydFRpbWU7CiAgICAgICAgICAgICRrZXlzW10g
PSAne2VuZF9kYXRldGltZX0nOwogICAgICAgICAgICAkdmFsc1tdID0gJGVuZERhdGV0aW1l
OwogICAgICAgICAgICAka2V5c1tdID0gJ3tlbmRfZGF0ZX0nOwogICAgICAgICAgICAkdmFs
c1tdID0gJGVuZERhdGU7CiAgICAgICAgICAgICRrZXlzW10gPSAne2VuZF90aW1lfSc7CiAg
ICAgICAgICAgICR2YWxzW10gPSAkZW5kVGltZTsKICAgICAgICAgICAgJGtleXNbXSA9ICd7
ZHVyYXRpb259JzsKICAgICAgICAgICAgJHZhbHNbXSA9ICRkdXJhdGlvbjsKICAgICAgICAg
ICAgJGtleXNbXSA9ICd7dGl0bGV9JzsKICAgICAgICAgICAgJHZhbHNbXSA9ICRldnQtPnN1
bTsKICAgICAgICAgICAgJGtleXNbXSA9ICd7ZGVzY3JpcHRpb259JzsKICAgICAgICAgICAg
JHZhbHNbXSA9ICRldnQtPmRlczsKICAgICAgICAgICAgJGtleXNbXSA9ICd7bG9jYXRpb259
JzsKICAgICAgICAgICAgJHZhbHNbXSA9ICRldnQtPmxvYzsKICAgICAgICAgICAgJGtleXNb
XSA9ICd7dWlkfSc7CiAgICAgICAgICAgICR2YWxzW10gPSAkZXZ0LT51aWQ7CgogICAgICAg
ICAgICAkb3V0W10gPSBwYXJzZShzdHJfcmVwbGFjZSgka2V5cywgJHZhbHMsICRib2R5KSk7
CiAgICAgICAgfQoKICAgIH0KCiAgICByZXR1cm4gZG9XcmFwKCRvdXQsICR3cmFwdGFnLCAk
YnJlYWssICRjbGFzcywgJycsICcnLCAnJywgJGh0bWxfaWQpOwp9CgovLyAtLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgov
KiBTaW1wbGUgZGF0ZSByZWZvcm1hdHRlciAqLwovKiBVc2Ugd2l0aCB7c3RhcnRfZGF0ZXRp
bWV9IGFuZCB7ZW5kX2RhdGV0aW1lfSAqLwovKiBkYXRlIGZvcm1hdHMgYXMgcGVyIGh0dHA6
Ly9waHAubmV0L21hbnVhbC9lbi9mdW5jdGlvbi5zdHJmdGltZS5waHAgKi8KCmZ1bmN0aW9u
IG1rYV9mb3JtYXRfZGF0ZSgkYXR0cywgJHRoaW5nID0gJycpCnsKICAgIGV4dHJhY3QobEF0
dHMoYXJyYXkoCiAgICAgICAgJ2Zvcm1hdCcgPT4gJycKICAgICksICRhdHRzLCBmYWxzZSkp
OwoKICAgIGlmICgkZm9ybWF0ID09PSAnJykgewogICAgICAgIHJldHVybiAkdGhpbmc7CiAg
ICB9IGVsc2UgewogICAgICAgIHJldHVybiBzdHJmdGltZSgkZm9ybWF0LCBzdHJ0b3RpbWUo
JHRoaW5nKSk7CiAgICB9Cn0KCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24gbWthX2lmX2ZpcnN0X2V2
ZW50KCRhdHRzLCAkdGhpbmcgPSBudWxsKQp7CiAgICBnbG9iYWwgJG1rYV90aGlzX2ljYWxf
ZXZlbnQ7CiAgICAkeCA9ICFlbXB0eSgkbWthX3RoaXNfaWNhbF9ldmVudFsnaXNfZmlyc3Qn
XSk7CiAgICByZXR1cm4gaXNzZXQoJHRoaW5nKSA/IHBhcnNlKCR0aGluZywgJHgpIDogJHg7
Cn0KCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24gbWthX2lmX2xhc3RfZXZlbnQoJGF0dHMsICR0aGlu
ZyA9IG51bGwpCnsKICAgIGdsb2JhbCAkbWthX3RoaXNfaWNhbF9ldmVudDsKICAgICR4ID0g
IWVtcHR5KCRta2FfdGhpc19pY2FsX2V2ZW50Wydpc19sYXN0J10pOwogICAgcmV0dXJuIGlz
c2V0KCR0aGluZykgPyBwYXJzZSgkdGhpbmcsICR4KSA6ICR4Owp9CgovLyAtLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1
bmN0aW9uIGljYWxfaW1nKCR0aXRsZSwgJGltYWdlcywgJGRlZmltZykKewogICAgJHNlYXJj
aCA9IGFycmF5KCIgIiwgIi4iLCAiLSIpOwogICAgJHJlcCA9IGFycmF5KCIiLCAiIiwgIiIp
OwogICAgJHQgPSBzdHJfcmVwbGFjZSgkc2VhcmNoLCAkcmVwLCBzdHJ0b2xvd2VyKCR0aXRs
ZSkpOwogICAgZm9yZWFjaCAoJGltYWdlcyBhcyAkaW0pIHsKICAgICAgICBpZiAoc3RycG9z
KCR0LCAkaW1bJ25hbWUnXSkgIT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiAkaW07
CiAgICAgICAgfQogICAgfQogICAgLy8gcmV0dXJuIGRlZmF1bHQgaW1hZ2Ugc3JjCiAgICBy
ZXR1cm4gJGRlZmltZzsKfQoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpmdW5jdGlvbiBpY2FsX2dldERhdGVWaWV3
KCRldnQsICRmbXRfZGF0ZSwgJGZtdF90aW1lKQp7CiAgICAkZGF0ZV9zZXBhcmF0b3IgPSAi
IOKAkyAiOwoKICAgICRmbXRfZGF0aSA9ICRmbXRfZGF0ZS4iICIuJGZtdF90aW1lOwogICAg
Ly8gZXZlbnQgb24gb25lIGRheQogICAgaWYgKGRhdGUoImRtWSIsICRldnQtPnN0YXJ0KSA9
PSBkYXRlKCJkbVkiLCAkZXZ0LT5lbmQtMSkpIHsKICAgICAgICAvLyBubyBleGFjdCB0aW1l
IGRlZmluaXRpb24KICAgICAgICBpZiAoZGF0ZSgiSDppIiwgJGV2dC0+c3RhcnQpID09ICIw
MDowMCIgJiYgZGF0ZSgiSDppIiwgJGV2dC0+ZW5kKSA9PSAiMDA6MDAiKSB7CiAgICAgICAg
ICAgICRkYXRlVmlldyA9IHN0cmZ0aW1lKCRmbXRfZGF0ZSwgJGV2dC0+c3RhcnQpOwogICAg
ICAgIH0gZWxzZSB7CiAgICAgICAgICAgICRkYXRlVmlldyA9IHN0cmZ0aW1lKCRmbXRfZGF0
aSwgJGV2dC0+c3RhcnQpLiRkYXRlX3NlcGFyYXRvci5zdHJmdGltZSgkZm10X3RpbWUsICRl
dnQtPnN0YXJ0ICsgJGV2dC0+ZHVyYXRpb24pOwogICAgICAgIH0KICAgIH0gZWxzZSB7CiAg
ICAgICAgJGRhdGVWaWV3ICA9IHN0cmZ0aW1lKCRmbXRfZGF0ZSwgJGV2dC0+c3RhcnQpLiRk
YXRlX3NlcGFyYXRvci5zdHJmdGltZSgkZm10X2RhdGUsICRldnQtPmVuZC0xKTsKICAgIH0K
ICAgIHJldHVybiAkZGF0ZVZpZXc7Cn0KCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24gaWNhbF9nZXRE
YXRlVGltZSgkZXZ0LCAkZm9ybWF0dGVyLCAkZW5kKQp7CiAgICAkZGF0ZVZpZXcgPSAoJGVu
ZCA9PSAxKSA/IHN0cmZ0aW1lKCRmb3JtYXR0ZXIsICRldnQtPmVuZCkgOiBzdHJmdGltZSgk
Zm9ybWF0dGVyLCAkZXZ0LT5zdGFydCk7CiAgICByZXR1cm4gJGRhdGVWaWV3Owp9CgovLyAt
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tCmZ1bmN0aW9uIG1rYV9tYWtlYXJyX3NxbCgkc3RyLCAkdHlwZT0nc3RyaW5nJywg
JGRlbGltZXRlciA9JywnKQp7CiAgICAkcmV0ID0gYXJyYXkoKTsKICAgICRhcnIgPSBleHBs
b2RlKCRkZWxpbWV0ZXIsICRzdHIpOwogICAgZm9yZWFjaCAoJGFyciBhcyAkZWwpIHsKICAg
ICAgICBpZiAoJHR5cGUgPT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgJHJldFtdID0gIici
LnRyaW0oJGVsKS4iJyI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHJldFtdID0g
JGVsOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiAkcmV0Owp9CgovLyAtLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1
bmN0aW9uIG1rYV9pbWdhcnJheWZyb21jYXQoJGNhdHMpCnsKICAgICRpbWdzID0gYXJyYXko
KTsKCiAgICAkY2F0cyA9IG1rYV9tYWtlYXJyX3NxbCgkY2F0cyk7CiAgICAkY2xhdXNlID0g
J2NhdGVnb3J5IElOICgnLmltcGxvZGUoIiwiLCAkY2F0cykuJyknOwogICAgJGF0dHJzID0g
J2lkLCBuYW1lLCBleHQnOwogICAgJHJzID0gc2FmZV9yb3dzKCRhdHRycywgJ3R4cF9pbWFn
ZScsICRjbGF1c2UpOwoKICAgICRwcmVmaXggPSAiaHR0cDovLyIuJEdMT0JBTFNbJ3ByZWZz
J11bInNpdGV1cmwiXS4iLyIuJEdMT0JBTFNbJ3ByZWZzJ11bJ2ltZ19kaXInXS4iLyI7Cgog
ICAgaWYgKGNvdW50KCRycykgIT0gMCkgewogICAgICAgIGZvcmVhY2ggKCRycyBhcyAkY29s
KSB7CiAgICAgICAgICAgICRjb2xbJ3NyYyddID0gJHByZWZpeC4kY29sWydpZCddLiRjb2xb
J2V4dCddOwogICAgICAgICAgICAkaW1nc1tdID0gJGNvbDsKICAgICAgICB9CiAgICB9CiAg
ICByZXR1cm4gJGltZ3M7Cn0KCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24gbWthX2ltZ2FycmF5ZnJv
bWZvbGRlcigkaW1nZm9sZGVyKQp7CiAgICAkaW1ncyA9IGFycmF5KCk7CiAgICBpZiAoJGhh
bmRsZSA9IEBvcGVuZGlyKCRpbWdmb2xkZXIpKSB7CiAgICAgICAgd2hpbGUgKCgkZmlsZSA9
IEByZWFkZGlyKCRoYW5kbGUpKSAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgJGltZyA9IGFy
cmF5KCk7CiAgICAgICAgICAgICRwYXJ0cyA9IGV4cGxvZGUoIi4iLCAkZmlsZSk7CiAgICAg
ICAgICAgICRpbWdbJ2V4dCddICA9IChjb3VudCgkcGFydHMpID4gMSkgPyAiLiIuYXJyYXlf
cG9wKCRwYXJ0cykgOiAnJzsKICAgICAgICAgICAgJGltZ1snbmFtZSddID0gaW1wbG9kZSgi
LiIsICRwYXJ0cyk7CiAgICAgICAgICAgICRpbWdbJ3NyYyddID0gImh0dHA6Ly8iLiRHTE9C
QUxTWydwcmVmcyddWyJzaXRldXJsIl0uIi8iLiRpbWdmb2xkZXIuIi8iLiRmaWxlOwogICAg
ICAgICAgICBpZiAoc3RybGVuKCRpbWdbJ25hbWUnXSkgPiAwICYmIGluX2FycmF5KHN0cnRv
bG93ZXIoJGltZ1snZXh0J10pLCBhcnJheSgiLnBuZyIsICIuanBnIiwgIi5qcGVnIiwgIi5n
aWYiKSkpIHsKICAgICAgICAgICAgICAgICRpbWdzW10gPSAkaW1nOwogICAgICAgICAgICB9
CiAgICAgICAgfQogICAgICAgIGNsb3NlZGlyKCRoYW5kbGUpOwogICAgfQogICAgcmV0dXJu
ICRpbWdzOwp9CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGljYWxfZGVmaW1nKCRkZWZpbWcpCnsK
ICAgICR1cmwgPSAiaHR0cDovLyIuJEdMT0JBTFNbJ3ByZWZzJ11bInNpdGV1cmwiXS4iLyI7
CiAgICAkaW1nID0gYXJyYXkoKTsKICAgIC8vIElzIGRlZmltZyBpZD8KICAgIGlmIChpbnR2
YWwoJGRlZmltZykgIT09IDApIHsKICAgICAgICAkaWQgPSBpbnR2YWwoJGRlZmltZyk7CiAg
ICAgICAgJGltZyA9IHNhZmVfcm93KCdpZCwgbmFtZSwgZXh0JywgJ3R4cF9pbWFnZScsICdp
ZCA9ICcuJGlkKTsKICAgIH0KCiAgICAvLyBJbWFnZSB3aXRoIGlkIG5vdCBmb3VuZD8KICAg
IGlmIChzaXplb2YoJGltZykgPT09IDApIHsKICAgICAgICAkcGFydHMgPSBleHBsb2RlKCIu
IiwgYmFzZW5hbWUoJGRlZmltZykpOwogICAgICAgICRpbWdbJ2V4dCddICA9IChjb3VudCgk
cGFydHMpID4gMSkgPyAiLiIuYXJyYXlfcG9wKCRwYXJ0cykgOiAnJzsKICAgICAgICAkaW1n
WyduYW1lJ10gPSBpbXBsb2RlKCIuIiwgJHBhcnRzKTsKICAgICAgICAkaW1nWydzcmMnXSA9
ICR1cmwuJGRlZmltZzsKICAgIH0gZWxzZSB7CiAgICAgICAgJGltZ1sic3JjIl0gPSAkdXJs
LiRHTE9CQUxTWydwcmVmcyddWydpbWdfZGlyJ10uIi8iLiRpbWdbJ2lkJ10uJGltZ1snZXh0
J107CiAgICB9CiAgICByZXR1cm4gJGltZzsKfQoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpmdW5jdGlvbiBpY2Fs
X3Nob3J0ZW5fbGluaygkc3RyaW5nKQp7CiAgICAkdGV4dF93b3JkX21heGxlbmd0aCA9IDU1
OwogICAgaWYgKGNvdW50KCRzdHJpbmcpID09IDIpIHsKICAgICAgICAkcHJlID0gIiI7CiAg
ICAgICAgJHVybCA9ICRzdHJpbmdbMV07CiAgICB9IGVsc2UgewogICAgICAgICRwcmUgPSAk
c3RyaW5nWzFdOwogICAgICAgICR1cmwgPSAkc3RyaW5nWzJdOwogICAgfQogICAgJHNob3J0
ZW5lZF91cmwgPSAkdXJsOwogICAgaWYgKHN0cmxlbigkdXJsKSA+ICR0ZXh0X3dvcmRfbWF4
bGVuZ3RoKSB7CiAgICAgICAgJHNob3J0ZW5lZF91cmwgPSBzdWJzdHIoJHVybCwgMCwgKCR0
ZXh0X3dvcmRfbWF4bGVuZ3RoLzIpKSAuICLigKYiIC4gc3Vic3RyKCR1cmwsIC0gKCR0ZXh0
X3dvcmRfbWF4bGVuZ3RoLTMtJHRleHRfd29yZF9tYXhsZW5ndGgvMikpOwogICAgfQogICAg
cmV0dXJuICRwcmUuIjxhIGhyZWY9XCIiLiR1cmwuIlwiPiIuJHNob3J0ZW5lZF91cmwuIjwv
YT4iOwp9CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGljYWxfZm9ybWF0VGV4dCgkc3RyaW5nKQp7
CiAgICAkc3RyaW5nID0gJyAnIC4gJHN0cmluZzsKICAgICRzdHJpbmcgPSBwcmVnX3JlcGxh
Y2VfY2FsbGJhY2soIiMoXnxbXG4gXSkoW1x3XSs/Oi8vLio/W14gXCJcblxyXHQ8XSopI2lz
IiwgImljYWxfc2hvcnRlbl9saW5rIiwgJHN0cmluZyk7CiAgICAkc3RyaW5nID0gcHJlZ19y
ZXBsYWNlKCIjKF58W1xuIF0pKCh3d3d8ZnRwKVwuW1x3XC1dK1wuW1x3XC0uXH5dKyg/Oi9b
XiBcIlx0XG5ccjxdKik/KSNpcyIsICIkMTxhIGhyZWY9XCJodHRwOi8vJDJcIj4kMjwvYT4i
LCAkc3RyaW5nKTsKICAgICRzdHJpbmcgPSBzdHJfcmVwbGFjZSgiXG4iLCAiPGJyLz4iLCAk
c3RyaW5nKTsKICAgIHJldHVybiAkc3RyaW5nOwp9CgoKCi8vIC0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24g
Y2hlY2tDYWNoZSgkdXJscywgJGNhY2hpbmd0aW1lKQp7CiAgICAkaGFzaCA9IG1kNShpbXBs
b2RlKCIsIiwgJHVybHMpKTsKCS8vIFVzZSBjYWNoZWQganNvbiBmaWxlIGluIHRlbXAgZGly
ZWN0b3J5CiAgICAkZm4gPSAkR0xPQkFMU1sncHJlZnMnXVsidGVtcGRpciJdLiAiL21rYV9p
Y2FsXyIuJGhhc2guIi5qc29uIjsKCiAgICBpZiAoZmlsZV9leGlzdHMoJGZuKSAmJiAodGlt
ZSgpLWZpbGVtdGltZSgkZm4pIDwgKCRjYWNoaW5ndGltZSo2MCkpKSB7CiAgICAgICAgLy8g
RXZlbnRzdHJpbmcgZnJvbSBjYWNoZSBmaWxlCiAgICAgICAgJGNhY2hlX2ZpbGUgPSBmb3Bl
bigkZm4sICJyIik7CiAgICAgICAgJGRhdGEgPSBmcmVhZCgkY2FjaGVfZmlsZSwgZmlsZXNp
emUoJGZuKSk7CiAgICAgICAgZmNsb3NlKCRjYWNoZV9maWxlKTsKICAgICAgICByZXR1cm4g
anNvbl9kZWNvZGUoJGRhdGEpOwogICAgfSBlbHNlIHsKICAgICAgICAvLyBHZW5lcmF0ZSBu
ZXcgZXZlbnRzdHJpbmcKICAgICAgICAkZXZlbnRzID0gZ2V0RXZlbnRzKCR1cmxzKTsKCiAg
ICAgICAgJGNmID0gZm9wZW4oJGZuLCAidysiKTsKICAgICAgICBmd3JpdGUoJGNmLCBqc29u
X2VuY29kZSgkZXZlbnRzKSk7CiAgICAgICAgZmNsb3NlKCRjZik7CgogICAgICAgIHJldHVy
biAkZXZlbnRzOwogICAgfQp9CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGdldEV2ZW50cygkdXJs
cykKewogICAgJGV2ZW50cyA9IGFycmF5KCk7CgogICAgLy8gSW5zdGFudGlhdGUgSUNhbCgp
IGxpYnJhcnkKICAgICRyZWFkZXIgPSBuZXcgVEtyXElDYWxcSUNhbCgpOwoKICAgIGZvcmVh
Y2ggKCR1cmxzIGFzICR1KSB7CiAgICAgICAgJHJlYWRlci0+c2V0VXJsKCR1LCB0cnVlKTsK
ICAgICAgICAkZSA9ICRyZWFkZXItPmdldEV2ZW50cygpOwogICAgICAgIGZvcmVhY2ggKCRl
IGFzICRldmVudCkgewogICAgICAgICAgICAvLyAkcGxhaW5FdmVudHMgPSBnZXRQbGFpbkV2
ZW50cygkZXZlbnQpOwogICAgICAgICAgICAvLyAkZXZlbnRzID0gYXJyYXlfbWVyZ2UoJGV2
ZW50cywgJHBsYWluRXZlbnRzKTsKICAgICAgICAgICAgJGV2ZW50c1tdID0gZ2V0UGxhaW5F
dmVudCgkZXZlbnQpOwogICAgICAgIH0KICAgIH0KICAgIC8vIFNvcnQgZXZlbnRzIGJ5IHN0
YXJ0ZGF0ZQogICAgdXNvcnQoJGV2ZW50cywgImNtcF9ldmVudCIpOwogICAgcmV0dXJuICRl
dmVudHM7Cn0KCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24gZ2V0UGxhaW5FdmVudCgkZXZ0KQp7CiAg
ICAkcGxhaW5FdmVudCA9IGFycmF5KCk7CgogICAgJHBsYWluRXZlbnQgPSBuZXcgc3RkQ2xh
c3M7CiAgICAkcGxhaW5FdmVudC0+c3RhcnQgICAgID0gJGV2dC0+Z2V0U3RhcnQoKTsKICAg
ICRwbGFpbkV2ZW50LT5lbmQgICAgICAgPSAkZXZ0LT5nZXRFbmQoKTsKICAgICRwbGFpbkV2
ZW50LT5kdXJhdGlvbiAgPSAkZXZ0LT5nZXREdXJhdGlvbigpOwogICAgJHBsYWluRXZlbnQt
PnN1bSAgICAgICA9ICRldnQtPmdldFN1bW1hcnkoKTsKICAgICRwbGFpbkV2ZW50LT5kZXMg
ICAgICAgPSAkZXZ0LT5nZXREZXNjcmlwdGlvbigpOwogICAgJHBsYWluRXZlbnQtPmxvYyAg
ICAgICA9ICRldnQtPmdldExvY2F0aW9uKCk7CiAgICAkcGxhaW5FdmVudC0+dWlkICAgICAg
ID0gJGV2dC0+Z2V0VUlEKCk7CgogICAgJHJlYyA9ICRldnQtPmdldFByb3BlcnR5KCdyZWN1
cnJlbmNlJyk7CiAgICBpZiAoJHJlYyA9PT0gbnVsbCkgewogICAgICAgICRwbGFpbkV2ZW50
LT5yZWMgPSBmYWxzZTsKICAgIH0gZWxzZSB7CiAgICAgICAgLy8gJHBsYWluRXZlbnQtPnJl
YyA9IGpzb25fZW5jb2RlKGdldFBsYWluUmVjKCRyZWMpKTsKICAgICAgICAkcGxhaW5FdmVu
dC0+cmVjID0gZ2V0UGxhaW5SZWMoJHJlYyk7CiAgICB9CiAgICByZXR1cm4gJHBsYWluRXZl
bnQ7Cn0KCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0KZnVuY3Rpb24gZ2V0UGxhaW5SZWMoJHJlYykKewogICAgJHIg
PSBuZXcgc3RkQ2xhc3M7CiAgICAkY2xhc3NfbWV0aG9kcyA9IGdldF9jbGFzc19tZXRob2Rz
KCRyZWMpOwogICAgZm9yZWFjaCAoJGNsYXNzX21ldGhvZHMgYXMgJG1ldGhvZCkgewogICAg
ICAgIGlmIChzdWJzdHIoJG1ldGhvZCwgMCwgMykgPT09ICdnZXQnKSB7CiAgICAgICAgICAg
ICRwcm9wID0gc3RydG9sb3dlcihzdWJzdHIoJG1ldGhvZCwgMykpOwogICAgICAgICAgICAk
ci0+JHByb3AgPSAkcmVjLT4kbWV0aG9kKCk7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJu
ICRyOwp9CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIGNtcF9ldmVudCgkYSwgJGIpCnsKICAgICRk
YSA9ICRhLT5zdGFydDsKICAgICRkYiA9ICRiLT5zdGFydDsKICAgIGlmICgkZGEgPT0gJGRi
KSB7CiAgICAgICAgcmV0dXJuIDE7CiAgICB9CiAgICByZXR1cm4gKCRkYSA8ICRkYikgPyAt
MSA6IDE7Cn0KCgoKLyoqCiAqIFRoaXMgZmlsZSBpcyBhIGNvbmNhdGVuYXRpb24gb2YgdGhl
IHNyYyBmaWxlcyBmb3IKICogaHR0cHM6Ly9naXRodWIuY29tL1RLci9pbnRvdWNoLWlDYWxl
bmRhci90cmVlL21hc3Rlci9zcmMKICogd2l0aCB0aGUgZm9sbG93aW5nIG1vZGlmaWNhdGlv
bnMKICogUmVtb3ZhbCBvZiBpbnRlcm1lZGlhcnkgPD9waHAg4oCmID8+IHRhZ3MKICogQ29t
bWVudGluZyBvdXQgb2YgaW50ZXJtZWRpYXJ5IG5hbWVzcGFjZSAoZXhjZXB0IGZvciBpbml0
aWFsIG5hbWVzcGFjZSkKICogQ29tbWVudGluZyBvdXQgb2YgZHVwbGljYXRlICJ1c2UiIHN0
YXRlbWVudHMKICoKICovCgpuYW1lc3BhY2UgVEtyXElDYWw7CgpkZWZpbmUoJ1NHX0lDQUxS
RUFERVJfVkVSU0lPTicsICcwLjguMCcpOwoKLyoqCiAqIEEgc2ltcGxlIElDYWwgcGFyc2Vy
LgogKgogKiBodHRwOi8vZ2l0aHViLmNvbS9tZmthaG4vaW50b3VjaC1pQ2FsZW5kYXIgYmFz
ZWQgb24KICogaHR0cDovL2dpdGh1Yi5jb20vZmFuZ2VsL1NHLWlDYWxlbmRhcgogKgogKiBS
b2FkbWFwOgogKiAtIEZpbmlzaCBGUkVRVUVOQ1ktcGFyc2luZy4KICogLSBBZGQgQVBJIGZv
ciByZWN1cnJpbmcgZXZlbnRzCiAqCiAqIEEgc2ltcGxlIGV4YW1wbGU6CiAqIDxjb2RlPgog
KiA8P3BocAogKiB1c2UgVEtyXGljYWxcSUNhbDsKICogJGljYWwgPSBuZXcgSUNhbCgiaHR0
cDovL2V4YW1wbGUuY29tL2NhbGVuZGFyLmljcyIpOwogKiBmb3JlYWNoICggJGljYWwtPmdl
dEV2ZW50cygpIEFzICRldmVudCApIHsKICogICAvLyBEbyBzdHVmZiB3aXRoIHRoZSBldmVu
dCAkZXZlbnQKICogfQogKiA/PgogKiA8L2NvZGU+CiAqCiAqIEBhdXRob3IgTW9ydGVuIEZh
bmdlbCAoQykgMjAwOAogKiBAYXV0aG9yIHhvbmV2IChDKSAyMDEwCiAqIEBhdXRob3IgVGFu
Z3V5IFBydXZvdCAoQykgMjAxMAogKiBAYXV0aG9yIE1pY2hhZWwgS2FobiAoQykgMjAxMwog
KiBAbGljZW5zZSBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8y
LjUvZGsvZGVlZC5lbl9HQiBDQy1CWS1TQS1ESwogKi8KY2xhc3MgSUNhbAp7CiAgICAvL29i
amVjdHMKICAgIHB1YmxpYyAkaW5mb3JtYXRpb247IC8vVkNhbGVuZGFyCiAgICBwdWJsaWMg
JHRpbWV6b25lczsgICAvL1ZUaW1lWm9uZQoKICAgIHByb3RlY3RlZCAkZXZlbnRzOyAvL1ZF
dmVudFtdCgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGlDYWxSZWFkZXIuIFlv
dSBjYW4gc3VwcGx5IHRoZSB1cmwgbm93LCBvciBsYXRlciB1c2luZyBzZXRVcmwKICAgICAq
IEBwYXJhbSAkdXJsIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gX19jb25z
dHJ1Y3QoJHVybCA9IGZhbHNlKQogICAgewogICAgICAgICR0aGlzLT5zZXRVcmwoJHVybCk7
CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXRzIChvciByZXNldHMpIHRoZSB1cmwgdGhpcyBy
ZWFkZXIgcmVhZHMgZnJvbS4KICAgICAqIEBwYXJhbSAkdXJsIHN0cmluZwogICAgICovCiAg
ICBwdWJsaWMgZnVuY3Rpb24gc2V0VXJsKCAkdXJsID0gZmFsc2UgKQogICAgewogICAgICAg
IGlmICgkdXJsICE9PSBmYWxzZSkgewogICAgICAgICAgICBQYXJzZXI6OlBhcnNlKCR1cmws
ICR0aGlzKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBt
YWluIGNhbGVuZGFyIGluZm8uIFlvdSBjYW4gdGhlbiBxdWVyeSB0aGUgcmV0dXJuZWQKICAg
ICAqIG9iamVjdCB3aXRoIGllIGdldFRpdGxlKCkuCiAgICAgKiBAcmV0dXJuIFZDYWxlbmRh
cgogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0Q2FsZW5kYXJJbmZvKCkKICAgIHsK
ICAgICAgICByZXR1cm4gJHRoaXMtPmluZm9ybWF0aW9uOwogICAgfQoKICAgIC8qKgogICAg
ICogU2V0cyB0aGUgY2FsZW5kYXIgaW5mbyBmb3IgdGhpcyBjYWxlbmRhcgogICAgICogQHBh
cmFtIFZDYWxlbmRhciAkaW5mbwogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc2V0Q2Fs
ZW5kYXJJbmZvKCBWQ2FsZW5kYXIgJGluZm8gKQogICAgewogICAgICAgICR0aGlzLT5pbmZv
cm1hdGlvbiA9ICRpbmZvOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhIGdpdmVu
IHRpbWV6b25lIGZvciB0aGUgY2FsZW5kYXIuIFRoaXMgaXMgbWFpbmx5IHVzZWQKICAgICAq
IGJ5IFZFdmVudHMgdG8gYWRqdXN0IHRoZWlyIGRhdGUtdGltZXMgaWYgdGhleSBoYXZlIHNw
ZWNpZmllZCBhCiAgICAgKiB0aW1lem9uZS4KICAgICAqCiAgICAgKiBJZiBubyB0aW1lem9u
ZSBpcyBnaXZlbiwgYWxsIHRpbWV6b25lcyBpbiB0aGUgY2FsZW5kYXIgaXMKICAgICAqIHJl
dHVybmVkLgogICAgICoKICAgICAqIEBwYXJhbSAkdHppZCBzdHJpbmcKICAgICAqIEByZXR1
cm4gVlRpbWVab25lCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRUaW1lWm9uZUlu
Zm8oICR0emlkID0gbnVsbCApCiAgICB7CiAgICAgICAgaWYgKCR0emlkID09IG51bGwpIHsK
ICAgICAgICAgICAgcmV0dXJuICR0aGlzLT50aW1lem9uZXM7CiAgICAgICAgfSBlbHNlIHsK
ICAgICAgICAgICAgaWYgKCAhaXNzZXQoJHRoaXMtPnRpbWV6b25lcykpIHsKICAgICAgICAg
ICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvcmVhY2gg
KCR0aGlzLT50aW1lem9uZXMgQVMgJHR6KSB7CiAgICAgICAgICAgICAgICBpZiAoICR0ei0+
Z2V0VGltZVpvbmVJZCgpID09ICR0emlkICkgewogICAgICAgICAgICAgICAgICAgIHJldHVy
biAkdHo7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJl
dHVybiBudWxsOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEFkZHMgYSBuZXcg
dGltZXpvbmUgdG8gdGhpcyBjYWxlbmRhcgogICAgICogQHBhcmFtIFZUaW1lWm9uZSAkdHoK
ICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGFkZFRpbWVab25lKCBWVGltZVpvbmUgJHR6
ICkKICAgIHsKICAgICAgICAkdGhpcy0+dGltZXpvbmVzW10gPSAkdHo7CiAgICB9CgogICAg
LyoqCiAgICAgKiBSZXR1cm5zIHRoZSBldmVudHMgZm91bmQKICAgICAqIEByZXR1cm4gYXJy
YXkKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldEV2ZW50cygpCiAgICB7CiAgICAg
ICAgcmV0dXJuICR0aGlzLT5ldmVudHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGRzIGEg
ZXZlbnQgdG8gdGhpcyBjYWxlbmRhcgogICAgICogQHBhcmFtIFZFdmVudCAkZXZlbnQKICAg
ICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGFkZEV2ZW50KCBWRXZlbnQgJGV2ZW50ICkKICAg
IHsKICAgICAgICAkdGhpcy0+ZXZlbnRzW10gPSAkZXZlbnQ7CiAgICB9Cn0KCi8qKgogKiBM
ZWdhY3kgLSBlbXB0eSBzdWJjbGFzcyBvZiBJQ2FsCiAqIEBpbnRlcm5hbAogKi8KY2xhc3Mg
aUNhbFJlYWRlciBleHRlbmRzIElDYWwge30KCi8vIG5hbWVzcGFjZSBUS3JcSUNhbDsKCi8q
KgogKiBBIGNsYXNzIGZvciBjYWxjdWxhdGluZyBob3cgbWFueSBzZWNvbmRzIGEgZHVyYXRp
b24tc3RyaW5nIGlzCiAqCiAqIEBhdXRob3IgTW9ydGVuIEZhbmdlbCAoQykgMjAwOAogKiBA
YXV0aG9yIE1pY2hhZWwgS2FobiAoQykgMjAxMwogKiBAbGljZW5zZSBodHRwOi8vY3JlYXRp
dmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8yLjUvZGsvZGVlZC5lbl9HQiBDQy1CWS1T
QS1ESwogKi8KCmNsYXNzIER1cmF0aW9uCnsKICAgIHByb3RlY3RlZCAkZHVyOwoKICAgIC8q
KgogICAgICogQ29uc3RydWN0cyBhIG5ldyBpbnRvdWNoXGljYWxcRHVyYXRpb24gZnJvbSBh
IGR1cmF0aW9uLXJ1bGUuCiAgICAgKiBUaGUgYmFzaWMgYnVpbGQtdXAgb2YgRFVSQVRJT05z
IGFyZToKICAgICAqICAoWyIrIl0gLyAiLSIpICJQIiAoZHVyLWRhdGUgLyBkdXItZGF0ZSAr
ICJUIiArIGR1ci10aW1lIC8gZHVyLXRpbWUgLyBkdXItd2VlaykKICAgICAqIElzIHNvbHZl
ZCB2aWEgYSByZWFsbHkgZnVnbHkgcmVnLWV4cCB3aXRoIHdheSB0byBtYW55ICgpJ3MuLgog
ICAgICoKICAgICAqIEBwYXJhbSAkZHVyYXRpb24gc3RyaW5nCiAgICAgKi8KICAgIHB1Ymxp
YyBmdW5jdGlvbiBfX2NvbnN0cnVjdCggJGR1cmF0aW9uICkKICAgIHsKICAgICAgICAkdHMg
PSAwOwoKICAgICAgICBpZiAocHJlZ19tYXRjaCgnL1tcXCtcXC1dezAsMX1QKChcZCspVyk/
KChcZCspRCk/KFQpPygoXGQrKUgpPygoXGQrKU0pPygoXGQrKVMpPy8nLCAkZHVyYXRpb24s
ICRtYXRjaGVzKSA9PT0gMSkgewogICAgICAgICAgICAkcmVzdWx0cyA9IGFycmF5KAogICAg
ICAgICAgICAgICAgJ3dlZWtzJz0+ICAoaW50KSBAICRtYXRjaGVzWzJdLAogICAgICAgICAg
ICAgICAgJ2RheXMnPT4gICAoaW50KSBAICRtYXRjaGVzWzRdLAogICAgICAgICAgICAgICAg
J2hvdXJzJz0+ICAoaW50KSBAICRtYXRjaGVzWzddLAogICAgICAgICAgICAgICAgJ21pbnV0
ZXMnPT4oaW50KSBAICRtYXRjaGVzWzldLAogICAgICAgICAgICAgICAgJ3NlY29uZHMnPT4o
aW50KSBAICRtYXRjaGVzWzExXQogICAgICAgICAgICApOwoKICAgICAgICAgICAgJHRzICs9
ICRyZXN1bHRzWydzZWNvbmRzJ107CiAgICAgICAgICAgICR0cyArPSA2MCAqICRyZXN1bHRz
WydtaW51dGVzJ107CiAgICAgICAgICAgICR0cyArPSA2MCAqIDYwICogJHJlc3VsdHNbJ2hv
dXJzJ107CiAgICAgICAgICAgICR0cyArPSAyNCAqIDYwICogNjAgKiAkcmVzdWx0c1snZGF5
cyddOwogICAgICAgICAgICAkdHMgKz0gNyAqIDI0ICogNjAgKiA2MCAqICRyZXN1bHRzWyd3
ZWVrcyddOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIEludmFsaWQgZHVyYXRp
b24hCiAgICAgICAgfQoKICAgICAgICAkZGlyID0gKCRkdXJhdGlvbnswfSA9PSAnLScpID8g
LTEgOiAxOwoKICAgICAgICAkdGhpcy0+ZHVyID0gJGRpciAqICR0czsKICAgIH0KCiAgICAv
KioKICAgICAqIFJldHVybnMgdGhlIGR1cmF0aW9uIGluIHNlY29uZHMKICAgICAqIEByZXR1
cm4gaW50CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXREdXJhdGlvbigpCiAgICB7
CiAgICAgICAgcmV0dXJuICR0aGlzLT5kdXI7CiAgICB9Cn0KCi8vIG5hbWVzcGFjZSBUS3Jc
SUNhbDsKdXNlIEFycmF5T2JqZWN0OwoKLyoqCiAqIEEgc2ltcGxlIEZhY3RvcnkgZm9yIGNv
bnZlcnRpbmcgYSBzZWN0aW9uL2RhdGEgcGFpciBpbnRvIHRoZQogKiBjb3Jyb3Nwb25kaW5n
IGJsb2NrLW9iamVjdC4gSWYgdGhlIHNlY3Rpb24gaXNuJ3Qga25vd24gYSBzaW1wbGUKICog
QXJyYXlPYmplY3QgaXMgdXNlZCBpbnN0ZWFkLgogKgogKiBAYXV0aG9yIE1vcnRlbiBGYW5n
ZWwgKEMpIDIwMDgKICogQGF1dGhvciBNaWNoYWVsIEthaG4gKEMpIDIwMTMKICogQGxpY2Vu
c2UgaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktc2EvMi41L2RrL2Rl
ZWQuZW5fR0IgQ0MtQlktU0EtREsKICovCmNsYXNzIEZhY3RvcnkKewogICAgLyoqCiAgICAg
KiBSZXR1cm5zIGEgbmV3IGJsb2NrLW9iamVjdCBmb3IgdGhlIHNlY3Rpb24vZGF0YS1wYWly
LiBUaGUgbGlzdAogICAgICogb2YgcmV0dXJuZWQgb2JqZWN0cyBpczoKICAgICAqCiAgICAg
KiB2Y2FsZW5kYXIgPT4gaW50b3VjaFxpY2FsXFZDYWxlbmRhcgogICAgICogdnRpbWV6b25l
ID0+IGludG91Y2hcaWNhbFxWVGltZVpvbmUKICAgICAqIHZldmVudCA9PiBpbnRvdWNoXGlj
YWxcVkV2ZW50CiAgICAgKiAqID0+IEFycmF5T2JqZWN0CiAgICAgKgogICAgICogQHBhcmFt
ICRpY2FsIElDYWwgVGhlIHJlYWRlciB0aGlzIHNlY3Rpb24vZGF0YS1wYWlyIGJlbG9uZ3Mg
dG8KICAgICAqIEBwYXJhbSAkc2VjdGlvbiBzdHJpbmcKICAgICAqIEBwYXJhbSBpbnRvdWNo
XGljYWxcTGluZVtdCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZmFjdG9y
eSggSUNhbCAkaWNhbCwgJHNlY3Rpb24sICRkYXRhICkKICAgIHsKICAgICAgICBzd2l0Y2gg
KCRzZWN0aW9uKSB7CiAgICAgICAgICAgIGNhc2UgInZjYWxlbmRhciI6CiAgICAgICAgICAg
ICAgICByZXR1cm4gbmV3IFZDYWxlbmRhcihMaW5lOjpSZW1vdmVfTGluZSgkZGF0YSksICRp
Y2FsICk7CiAgICAgICAgICAgIGNhc2UgInZ0aW1lem9uZSI6CiAgICAgICAgICAgICAgICBy
ZXR1cm4gbmV3IFZUaW1lWm9uZShMaW5lOjpSZW1vdmVfTGluZSgkZGF0YSksICRpY2FsICk7
CiAgICAgICAgICAgIGNhc2UgInZldmVudCI6CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3
IFZFdmVudCgkZGF0YSwgJGljYWwgKTsKCiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAg
ICAgICAgICByZXR1cm4gbmV3IEFycmF5T2JqZWN0KExpbmU6OlJlbW92ZV9MaW5lKChhcnJh
eSkgJGRhdGEpICk7CiAgICAgICAgfQogICAgfQp9CgovLyBuYW1lc3BhY2UgVEtyXElDYWw7
CgovKioKICogQSBjbGFzcyB0byBzdG9yZSBGcmVxdWVuY3ktcnVsZXMgaW4uIFdpbGwgYWxs
b3cgYSBlYXN5IHdheSB0byBmaW5kIHRoZQogKiBsYXN0IGFuZCBuZXh0IG9jY3VycmVuY2Ug
b2YgdGhlIHJ1bGUuCiAqCiAqIE5vIC0gdGhpcyBpcyBzbyBub3QgcHJldHR5LiBCdXQuLiBl
aGguLiBZb3UgZG8gaXQgYmV0dGVyLCBhbmQgSSB3aWxsCiAqIGdsYWRseSBhY2NlcHQgcGF0
Y2hlcy4KICoKICogQ3JlYXRlZCBieSB0cmFpbC1hbmQtZXJyb3Igb24gdGhlIGV4YW1wbGVz
IGdpdmVuIGluIHRoZSBSRkMuCiAqCiAqIFRPRE86IFVwZGF0ZSB0byBhIGJldHRlciB3YXkg
b2YgZG9pbmcgY2FsY3VsYXRpbmcgdGhlIGRpZmZlcmVudCBvcHRpb25zLgogKiBJbnN0ZWFk
IG9mIG9ubHkga2VlcGluZyB0cmFjayBvZiB0aGUgYmVzdCBvZiB0aGUgY3VycmVudCBkYXRl
cyBmb3VuZAogKiBpdCBzaG91bGQgaW5zdGVhZCBrZWVwIGEgYXJyYXkgb2YgYWxsIHRoZSBj
YWxjdWxhdGVkIGRhdGVzIHdpdGhpbiB0aGUKICogcGVyaW9kLgogKiBUaGlzIHNob3VsZCBm
aXggdGhlIGlzc3VlcyB3aXRoIG11bHRpLXJ1bGUgKyBtdWx0aS1ydWxlIGludGVyZmVyZW5j
ZSwKICogYW5kIG1ha2UgaXQgcG9zc2libGUgdG8gaW1wbGVtZW50IHRoZSBTRVRQT1MgcnVs
ZS4KICogQnkgcHVzaGluZyB0aGUgbmV4dCBwZXJpb2Qgb250byB0aGUgc3RhY2sgYXMgdGhl
IGxhc3Qgb3B0aW9uIHdpbGwKICogKGhvcGVmdWxseSkgcmVtb3ZlIHRoZSBuZWVkIGZvciB0
aGUgYXdmdWwgc2ltcGxlTW9kZQogKgogKiBAYXV0aG9yIE1vcnRlbiBGYW5nZWwgKEMpIDIw
MDgKICogQGF1dGhvciBNaWNoYWVsIEthaG4gKEMpIDIwMTMKICogQGxpY2Vuc2UgaHR0cDov
L2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktc2EvMi41L2RrL2RlZWQuZW5fR0Ig
Q0MtQlktU0EtREsKICovCmNsYXNzIEZyZXEKewogICAgcHJvdGVjdGVkICR3ZWVrZGF5cyA9
IGFycmF5KCdNTyc9Pidtb25kYXknLCAnVFUnPT4ndHVlc2RheScsICdXRSc9Pid3ZWRuZXNk
YXknLCAnVEgnPT4ndGh1cnNkYXknLCAnRlInPT4nZnJpZGF5JywgJ1NBJz0+J3NhdHVyZGF5
JywgJ1NVJz0+J3N1bmRheScpOwogICAgcHJvdGVjdGVkICRrbm93blJ1bGVzID0gYXJyYXko
J21vbnRoJywgJ3dlZWtubycsICdkYXknLCAnbW9udGhkYXknLCAneWVhcmRheScsICdob3Vy
JywgJ21pbnV0ZScpOyAvL290aGVycyA6ICdzZXRwb3MnLCAnc2Vjb25kJwogICAgcHJvdGVj
dGVkICRydWxlTW9kaWZpZXJzID0gYXJyYXkoJ3drc3QnKTsKICAgIHByb3RlY3RlZCAkc2lt
cGxlTW9kZSA9IHRydWU7CgogICAgcHJvdGVjdGVkICRydWxlcyA9IGFycmF5KCdmcmVxJz0+
J3llYXJseScsICdpbnRlcnZhbCc9PjEpOwogICAgcHJvdGVjdGVkICRzdGFydCA9IDA7CiAg
ICBwcm90ZWN0ZWQgJGZyZXEgPSAnJzsKCiAgICBwcm90ZWN0ZWQgJGV4Y2x1ZGVkID0gYXJy
YXkoKTsgLy9FWERBVEUKICAgIHByb3RlY3RlZCAkYWRkZWQ7ICAgIC8vUkRBVEUKCiAgICBw
cm90ZWN0ZWQgJGNhY2hlOyAvLyBnZXRBbGxPY2N1cnJlbmNlcygpCgogICAgLyoqCiAgICAg
KiBDb25zdHJ1Y3RzIGEgbmV3IEZyZXFlbmN5LXJ1bGUKICAgICAqIEBwYXJhbSAkcnVsZSBz
dHJpbmcKICAgICAqIEBwYXJhbSAkc3RhcnQgaW50IFVuaXgtdGltZXN0YW1wIChpbXBvcnRh
bnQgOiBOZWVkIHRvIGJlIHRoZSBzdGFydCBvZiBFdmVudCkKICAgICAqIEBwYXJhbSAkZXhj
bHVkZWQgYXJyYXkgb2YgaW50ICh0aW1lc3RhbXBzKSwgc2VlIEVYREFURSBkb2N1bWVudGF0
aW9uCiAgICAgKiBAcGFyYW0gJGFkZGVkIGFycmF5IG9mIGludCAodGltZXN0YW1wcyksIHNl
ZSBSREFURSBkb2N1bWVudGF0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBfX2Nv
bnN0cnVjdCgkcmVjdXJyZW5jZSwgJHN0YXJ0LCAkZXhjbHVkZWQ9YXJyYXkoKSwgJGFkZGVk
PWFycmF5KCksICR1bnRpbCA9IG51bGwpCiAgICB7CiAgICAgICAgJHRoaXMtPnN0YXJ0ID0g
JHN0YXJ0OwogICAgICAgICR0aGlzLT5leGNsdWRlZCA9IGFycmF5KCk7CiAgICAgICAgJHJ1
bGUgPSAkcmVjdXJyZW5jZS0+cnJ1bGU7CgogICAgICAgICRydWxlcyA9IGFycmF5KCk7CiAg
ICAgICAgZm9yZWFjaCAoIGV4cGxvZGUoJzsnLCAkcnVsZSkgYXMgJHYpIHsKICAgICAgICAg
ICAgbGlzdCgkaywgJHYpID0gZXhwbG9kZSgnPScsICR2KTsKICAgICAgICAgICAgJHRoaXMt
PnJ1bGVzWyBzdHJ0b2xvd2VyKCRrKSBdID0gJHY7CiAgICAgICAgfQoKICAgICAgICBpZiAo
IWlzc2V0KCR0aGlzLT5ydWxlc1sndW50aWwnXSkpIHsKICAgICAgICAgICAgaWYgKCEkdW50
aWwgJiYgaXNzZXQoJHJlY3VycmVuY2UtPnVudGlsKSkgewogICAgICAgICAgICAgICAgJHRo
aXMtPnJ1bGVzWyd1bnRpbCddID0gJHJlY3VycmVuY2UtPnVudGlsOwogICAgICAgICAgICB9
IGVsc2VpZigkdW50aWwpIHsKICAgICAgICAgICAgICAgICR0aGlzLT5ydWxlc1sndW50aWwn
XSA9ICR1bnRpbDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoaXNzZXQo
JHRoaXMtPnJ1bGVzWyd1bnRpbCddKSAmJiBpc19zdHJpbmcoJHRoaXMtPnJ1bGVzWyd1bnRp
bCddKSApIHsKICAgICAgICAgICAgJHRoaXMtPnJ1bGVzWyd1bnRpbCddID0gc3RydG90aW1l
KCR0aGlzLT5ydWxlc1sndW50aWwnXSk7CiAgICAgICAgfQogICAgICAgICR0aGlzLT5mcmVx
ID0gc3RydG9sb3dlcigkdGhpcy0+cnVsZXNbJ2ZyZXEnXSk7CgogICAgICAgIGZvcmVhY2gg
KCR0aGlzLT5rbm93blJ1bGVzIEFTICRydWxlKSB7CiAgICAgICAgICAgIGlmICggaXNzZXQo
JHRoaXMtPnJ1bGVzWydieScgLiAkcnVsZV0pICkgewogICAgICAgICAgICAgICAgaWYgKCAk
dGhpcy0+aXNQcmVydWxlKCRydWxlLCAkdGhpcy0+ZnJlcSkgKSB7CiAgICAgICAgICAgICAg
ICAgICAgJHRoaXMtPnNpbXBsZU1vZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAg
ICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCEkdGhpcy0+c2ltcGxlTW9kZSkg
ewogICAgICAgICAgICBpZiAoISAoaXNzZXQoJHRoaXMtPnJ1bGVzWydieWRheSddKSB8fCBp
c3NldCgkdGhpcy0+cnVsZXNbJ2J5bW9udGhkYXknXSkgfHwgaXNzZXQoJHRoaXMtPnJ1bGVz
WydieXllYXJkYXknXSkpKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+cnVsZXNbJ2J5bW9u
dGhkYXknXSA9IGRhdGUoJ2QnLCAkdGhpcy0+c3RhcnQpOwogICAgICAgICAgICB9CiAgICAg
ICAgfQoKICAgICAgICAvL3NldCB1bnRpbCwgYW5kIGNhY2hlCiAgICAgICAgaWYgKCBpc3Nl
dCgkdGhpcy0+cnVsZXNbJ2NvdW50J10pICkgewoKICAgICAgICAgICAgJGNhY2hlWyR0c10g
PSAkdHMgPSAkdGhpcy0+c3RhcnQ7CiAgICAgICAgICAgIGZvciAoJG49MTsgJG4gPCAkdGhp
cy0+cnVsZXNbJ2NvdW50J107ICRuKyspIHsKICAgICAgICAgICAgICAgICR0cyA9ICR0aGlz
LT5maW5kTmV4dCgkdHMpOwogICAgICAgICAgICAgICAgJGNhY2hlWyR0c10gPSAkdHM7CiAg
ICAgICAgICAgIH0KICAgICAgICAgICAgJHRoaXMtPnJ1bGVzWyd1bnRpbCddID0gJHRzOwoK
ICAgICAgICAgICAgLy9FWERBVEUKICAgICAgICAgICAgaWYgKCFlbXB0eSgkZXhjbHVkZWQp
KSB7CiAgICAgICAgICAgICAgICBmb3JlYWNoICgkZXhjbHVkZWQgYXMgJHRzKSB7CiAgICAg
ICAgICAgICAgICAgICAgdW5zZXQoJGNhY2hlWyR0c10pOwogICAgICAgICAgICAgICAgfQog
ICAgICAgICAgICB9CiAgICAgICAgICAgIC8vUkRBVEUKICAgICAgICAgICAgaWYgKCFlbXB0
eSgkYWRkZWQpKSB7CiAgICAgICAgICAgICAgICAkY2FjaGUgPSAkY2FjaGUgKyAkYWRkZWQ7
CiAgICAgICAgICAgICAgICBhc29ydCgkY2FjaGUpOwogICAgICAgICAgICB9CgogICAgICAg
ICAgICAkdGhpcy0+Y2FjaGUgPSBhcnJheV92YWx1ZXMoJGNhY2hlKTsKICAgICAgICB9Cgog
ICAgICAgICR0aGlzLT5leGNsdWRlZCA9ICRleGNsdWRlZDsKICAgICAgICAkdGhpcy0+YWRk
ZWQgPSAkYWRkZWQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCB0aW1lc3Rh
bXBzIGFycmF5KCksIGJ1aWxkIHRoZSBjYWNoZSBpZiBub3QgbWFkZSBiZWZvcmUKICAgICAq
IEByZXR1cm4gYXJyYXkKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldEFsbE9jY3Vy
cmVuY2VzKCRsaW1pdCA9IDEwMCwgJG9mZnNldCA9IGZhbHNlKQogICAgewogICAgICAgIGlm
IChlbXB0eSgkdGhpcy0+Y2FjaGUpKSB7CiAgICAgICAgICAgIC8vYnVpbGQgY2FjaGUKICAg
ICAgICAgICAgJG5leHQgPSAkdGhpcy0+Zmlyc3RPY2N1cnJlbmNlKCRvZmZzZXQpOwogICAg
ICAgICAgICAkYyA9IDA7CiAgICAgICAgICAgIHdoaWxlICgkbmV4dCAmJiAkYyA8ICRsaW1p
dCkgewogICAgICAgICAgICAgICAgJGNhY2hlW10gPSAkbmV4dDsKICAgICAgICAgICAgICAg
ICRuZXh0ID0gJHRoaXMtPmZpbmROZXh0KCRuZXh0KTsKICAgICAgICAgICAgICAgICRjKys7
CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFlbXB0eSgkdGhpcy0+YWRkZWQpKSB7
CiAgICAgICAgICAgICAgICAkY2FjaGUgPSAkY2FjaGUgKyAkdGhpcy0+YWRkZWQ7CiAgICAg
ICAgICAgICAgICBhc29ydCgkY2FjaGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICR0
aGlzLT5jYWNoZSA9ICRjYWNoZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAkdGhpcy0+
Y2FjaGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBwcmV2aW91cyAobW9z
dCByZWNlbnQpIG9jY3VycmVuY2Ugb2YgdGhlIHJ1bGUgZnJvbSB0aGUKICAgICAqIGdpdmVu
IG9mZnNldAogICAgICogQHBhcmFtICBpbnQgJG9mZnNldAogICAgICogQHJldHVybiBpbnQK
ICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHByZXZpb3VzT2NjdXJyZW5jZSggJG9mZnNl
dCApCiAgICB7CiAgICAgICAgaWYgKCFlbXB0eSgkdGhpcy0+Y2FjaGUpKSB7CiAgICAgICAg
ICAgICR0Mj0kdGhpcy0+c3RhcnQ7CiAgICAgICAgICAgIGZvcmVhY2ggKCR0aGlzLT5jYWNo
ZSBhcyAkdHMpIHsKICAgICAgICAgICAgICAgIGlmICgkdHMgPj0gJG9mZnNldCkKICAgICAg
ICAgICAgICAgICAgICByZXR1cm4gJHQyOwogICAgICAgICAgICAgICAgJHQyID0gJHRzOwog
ICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHRzID0gJHRoaXMt
PnN0YXJ0OwogICAgICAgICAgICB3aGlsZSAoICgkdDIgPSAkdGhpcy0+ZmluZE5leHQoJHRz
KSkgPCAkb2Zmc2V0KSB7CiAgICAgICAgICAgICAgICBpZiAoJHQyID09IGZhbHNlKSB7CiAg
ICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg
ICAgICAkdHMgPSAkdDI7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVy
biAkdHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBuZXh0IG9jY3VycmVu
Y2Ugb2YgdGhpcyBydWxlIGFmdGVyIHRoZSBnaXZlbiBvZmZzZXQKICAgICAqIEBwYXJhbSAg
aW50ICRvZmZzZXQKICAgICAqIEByZXR1cm4gaW50CiAgICAgKi8KICAgIHB1YmxpYyBmdW5j
dGlvbiBuZXh0T2NjdXJyZW5jZSggJG9mZnNldCApCiAgICB7CiAgICAgICAgaWYgKCRvZmZz
ZXQgPCAkdGhpcy0+c3RhcnQpCiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+Zmlyc3RPY2N1
cnJlbmNlKCk7CiAgICAgICAgcmV0dXJuICR0aGlzLT5maW5kTmV4dCgkb2Zmc2V0KTsKICAg
IH0KCiAgICAvKioKICAgICAqIEZpbmRzIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIHRoZSBy
dWxlLgogICAgICogQHJldHVybiBpbnQgdGltZXN0YW1wCiAgICAgKi8KICAgIHB1YmxpYyBm
dW5jdGlvbiBmaXJzdE9jY3VycmVuY2UoJG9mZnNldCA9IGZhbHNlKQogICAgewogICAgICAg
IGlmICghaXNfYXJyYXkoJHRoaXMtPmV4Y2x1ZGVkKSkgewogICAgICAgICAgICAkdGhpcy0+
ZXhjbHVkZWQgPSAoYXJyYXkpJHRoaXMtPmV4Y2x1ZGVkOwogICAgICAgIH0KICAgICAgICAk
dCA9ICgkb2Zmc2V0ICE9PSBmYWxzZSkgPyAkb2Zmc2V0IDogJHRoaXMtPnN0YXJ0OwogICAg
ICAgIGlmICghaXNfYXJyYXkoJHRoaXMtPmV4Y2x1ZGVkKSkgewogICAgICAgICAgICAkdGhp
cy0+ZXhjbHVkZWQgPSAoYXJyYXkpJHRoaXMtPmV4Y2x1ZGVkOwogICAgICAgIH0KICAgICAg
ICBpZiAoaW5fYXJyYXkoJHQsICR0aGlzLT5leGNsdWRlZCkpCiAgICAgICAgICAgICR0ID0g
JHRoaXMtPmZpbmROZXh0KCR0KTsKCiAgICAgICAgcmV0dXJuICR0OwogICAgfQoKICAgIC8q
KgogICAgICogRmluZHMgdGhlIGFic29sdXRlIGxhc3Qgb2NjdXJyZW5jZSBvZiB0aGUgcnVs
ZSBmcm9tIHRoZSBnaXZlbiBvZmZzZXQuCiAgICAgKiBCdWlsZHMgYWxzbyB0aGUgY2FjaGUs
IGlmIG5vdCBzZXQgYmVmb3JlLi4uCiAgICAgKiBAcmV0dXJuIGludCB0aW1lc3RhbXAKICAg
ICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGxhc3RPY2N1cnJlbmNlKCkKICAgIHsKICAgICAg
ICAvL2J1aWxkIGNhY2hlIGlmIG5vdCBkb25lCiAgICAgICAgJHRoaXMtPmdldEFsbE9jY3Vy
cmVuY2VzKCk7CiAgICAgICAgLy9yZXR1cm4gbGFzdCB0aW1lc3RhbXAgaW4gY2FjaGUKICAg
ICAgICByZXR1cm4gZW5kKCR0aGlzLT5jYWNoZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBD
YWxjdWxhdGVzIHRoZSBuZXh0IHRpbWUgYWZ0ZXIgdGhlIGdpdmVuIG9mZnNldCB0aGF0IHRo
ZSBydWxlCiAgICAgKiB3aWxsIGFwcGx5LgogICAgICoKICAgICAqIFRoZSBhcHByb2FjaCB0
byBmaW5kaW5nIHRoZSBuZXh0IGlzIGFzIGZvbGxvd3M6CiAgICAgKiBGaXJzdCB3ZSBlc3Rh
Ymxpc2ggYSB0aW1lZnJhbWUgdG8gZmluZCB0aW1lc3RhbXBzIGluLiBUaGlzIGlzCiAgICAg
KiBiZXR3ZWVuICRvZmZzZXQgYW5kIHRoZSBlbmQgb2YgdGhlIHBlcmlvZCB0aGF0ICRvZmZz
ZXQgaXMgaW4uCiAgICAgKgogICAgICogV2UgdGhlbiBsb29wIHRob3VnaCBhbGwgdGhlIHJ1
bGVzICh0aGF0IGlzIGEgUHJlcnVsZSBpbiB0aGUKICAgICAqIGN1cnJlbnQgZnJlcS4pLCBh
bmQgZmluZHMgdGhlIHNtYWxsZXN0IHRpbWVzdGFtcCBpbnNpZGUgdGhlCiAgICAgKiB0aW1l
ZnJhbWUuCiAgICAgKgogICAgICogSWYgd2UgZmluZCBzb21ldGhpbmcsIHdlIGNoZWNrIGlm
IHRoZSBkYXRlIGlzIGEgdmFsaWQgcmVjdXJyZW5jZQogICAgICogKHdpdGggdmFsaWREYXRl
KS4gSWYgaXQgaXMsIHdlIHJldHVybiBpdC4gT3RoZXJ3aXNlIHdlIHRyeSB0bwogICAgICog
ZmluZCBhIG5ldyBkYXRlIGluc2lkZSB0aGUgc2FtZSB0aW1lZnJhbWUgKGJ1dCB1c2luZyB0
aGUgbmV3LQogICAgICogZm91bmQgZGF0ZSBhcyBvZmZzZXQpCiAgICAgKgogICAgICogSWYg
bm8gbmV3IHRpbWVzdGFtcHMgd2VyZSBmb3VuZCBpbiB0aGUgcGVyaW9kLCB3ZSB0cnkgaW4g
dGhlCiAgICAgKiBuZXh0IHBlcmlvZAogICAgICoKICAgICAqIEBwYXJhbSAgaW50ICRvZmZz
ZXQKICAgICAqIEByZXR1cm4gaW50CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBmaW5k
TmV4dCgkb2Zmc2V0KQogICAgewogICAgICAgIGlmICghZW1wdHkoJHRoaXMtPmNhY2hlKSkg
ewogICAgICAgICAgICBmb3JlYWNoICgkdGhpcy0+Y2FjaGUgYXMgJHRzKSB7CiAgICAgICAg
ICAgICAgICBpZiAoJHRzID4gJG9mZnNldCkKICAgICAgICAgICAgICAgICAgICByZXR1cm4g
JHRzOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaXNfYXJyYXkoJHRo
aXMtPmV4Y2x1ZGVkKSkgewogICAgICAgICAgICAkdGhpcy0+ZXhjbHVkZWQgPSAoYXJyYXkp
JHRoaXMtPmV4Y2x1ZGVkOwogICAgICAgIH0KICAgICAgICAkZGVidWcgPSBmYWxzZTsKCiAg
ICAgICAgLy9tYWtlIHN1cmUgdGhlIG9mZnNldCBpcyB2YWxpZAogICAgICAgIGlmICggJG9m
ZnNldCA9PT0gZmFsc2UgfHwgKGlzc2V0KCR0aGlzLT5ydWxlc1sndW50aWwnXSkgJiYgJG9m
ZnNldCA+ICR0aGlzLT5ydWxlc1sndW50aWwnXSkgKSB7CiAgICAgICAgICAgIGlmKCRkZWJ1
ZykgZWNobyAnU1RPUDogJyAuIGRhdGUoJ3InLCAkb2Zmc2V0KSAuICJcbiI7CgogICAgICAg
ICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICAkZm91bmQgPSB0cnVlOwoK
ICAgICAgICAvL3NldCB0aGUgdGltZXN0YW1wIG9mIHRoZSBvZmZzZXQgKGlnbm9yaW5nIGhv
dXJzIGFuZCBtaW51dGVzIHVubGVzcyB3ZSB3YW50IHRoZW0gdG8gYmUKICAgICAgICAvL3Bh
cnQgb2YgdGhlIGNhbGN1bGF0aW9ucy4KICAgICAgICBpZigkZGVidWcpIGVjaG8gJ086ICcg
LiBkYXRlKCdyJywgJG9mZnNldCkgLiAiXG4iOwogICAgICAgICRob3VyID0gKGluX2FycmF5
KCR0aGlzLT5mcmVxLCBhcnJheSgnaG91cmx5JywnbWludXRlbHknKSkgJiYgJG9mZnNldCA+
ICR0aGlzLT5zdGFydCkgPyBkYXRlKCdIJywgJG9mZnNldCkgOiBkYXRlKCdIJywgJHRoaXMt
PnN0YXJ0KTsKICAgICAgICAkbWludXRlID0gKCgkdGhpcy0+ZnJlcSA9PSAnbWludXRlbHkn
IHx8IGlzc2V0KCR0aGlzLT5ydWxlc1snYnltaW51dGUnXSkpICYmICRvZmZzZXQgPiAkdGhp
cy0+c3RhcnQpID8gZGF0ZSgnaScsICRvZmZzZXQpIDogZGF0ZSgnaScsICR0aGlzLT5zdGFy
dCk7CiAgICAgICAgJHQgPSBta3RpbWUoJGhvdXIsICRtaW51dGUsIGRhdGUoJ3MnLCAkdGhp
cy0+c3RhcnQpLCBkYXRlKCdtJywgJG9mZnNldCksIGRhdGUoJ2QnLCAkb2Zmc2V0KSwgZGF0
ZSgnWScsJG9mZnNldCkpOwogICAgICAgIGlmKCRkZWJ1ZykgZWNobyAnU1RBUlQ6ICcgLiBk
YXRlKCdyJywgJHQpIC4gIlxuIjsKCiAgICAgICAgaWYgKCR0aGlzLT5zaW1wbGVNb2RlKSB7
CiAgICAgICAgICAgIGlmICgkb2Zmc2V0IDwgJHQpIHsKICAgICAgICAgICAgICAgICR0cyA9
ICR0OwogICAgICAgICAgICAgICAgaWYgKCR0cyAmJiBpbl9hcnJheSgkdHMsICR0aGlzLT5l
eGNsdWRlZCkpCiAgICAgICAgICAgICAgICAgICAgJHRzID0gJHRoaXMtPmZpbmROZXh0KCR0
cyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkdHMgPSAkdGhpcy0+
ZmluZFN0YXJ0aW5nUG9pbnQoICR0LCAkdGhpcy0+cnVsZXNbJ2ludGVydmFsJ10sIGZhbHNl
ICk7CiAgICAgICAgICAgICAgICBpZiAoICEkdGhpcy0+dmFsaWREYXRlKCAkdHMgKSApIHsK
ICAgICAgICAgICAgICAgICAgICAkdHMgPSAkdGhpcy0+ZmluZE5leHQoJHRzKTsKICAgICAg
ICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuICR0czsKICAg
ICAgICB9CgogICAgICAgICRlb3AgPSAkdGhpcy0+ZmluZEVuZE9mUGVyaW9kKCRvZmZzZXQp
OwogICAgICAgIGlmKCRkZWJ1ZykgZWNobyAnRU9QOiAnIC4gZGF0ZSgncicsICRlb3ApIC4g
IlxuIjsKCiAgICAgICAgZm9yZWFjaCAoJHRoaXMtPmtub3duUnVsZXMgQVMgJHJ1bGUpIHsK
ICAgICAgICAgICAgaWYgKCAkZm91bmQgJiYgaXNzZXQoJHRoaXMtPnJ1bGVzWydieScgLiAk
cnVsZV0pICkgewogICAgICAgICAgICAgICAgaWYgKCAkdGhpcy0+aXNQcmVydWxlKCRydWxl
LCAkdGhpcy0+ZnJlcSkgKSB7CiAgICAgICAgICAgICAgICAgICAgJHN1YnJ1bGVzID0gZXhw
bG9kZSgnLCcsICR0aGlzLT5ydWxlc1snYnknIC4gJHJ1bGVdKTsKICAgICAgICAgICAgICAg
ICAgICAkX3QgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRzdWJydWxl
cyBBUyAkc3VicnVsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAkaW1tID0gY2FsbF91
c2VyX2Z1bmNfYXJyYXkoYXJyYXkoJHRoaXMsICdydWxlQnknIC4gJHJ1bGUpLCBhcnJheSgk
c3VicnVsZSwgJHQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRpbW0gPT09IGZh
bHNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg
ICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZigkZGVidWcpIGVjaG8g
c3RydG91cHBlcigkcnVsZSkgLiAnOiAnIC4gZGF0ZSgncicsICRpbW0pIC4gJyBBOiAnIC4g
KChpbnQpICgkaW1tID4gJG9mZnNldCAmJiAkaW1tIDwgJGVvcCkpIC4gIlxuIjsKICAgICAg
ICAgICAgICAgICAgICAgICAgaWYgKCAkaW1tID4gJG9mZnNldCAmJiAkaW1tIDwgJGVvcCAm
JiAoJF90ID09IG51bGwgfHwgJGltbSA8ICRfdCkgKSB7CiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAkX3QgPSAkaW1tOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAg
ICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICgkX3QgIT09IG51bGwpIHsK
ICAgICAgICAgICAgICAgICAgICAgICAgJHQgPSAkX3Q7CiAgICAgICAgICAgICAgICAgICAg
fSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGZvdW5kID0gJHRoaXMtPnZhbGlk
RGF0ZSgkdCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAg
ICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoJG9mZnNldCA8ICR0aGlzLT5zdGFy
dCAmJiAkdGhpcy0+c3RhcnQgPCAkdCkgewogICAgICAgICAgICAkdHMgPSAkdGhpcy0+c3Rh
cnQ7CiAgICAgICAgfSBlbHNlaWYgKCAkZm91bmQgJiYgKCR0ICE9ICRvZmZzZXQpKSB7CiAg
ICAgICAgICAgIGlmICggJHRoaXMtPnZhbGlkRGF0ZSggJHQgKSApIHsKICAgICAgICAgICAg
ICAgIGlmKCRkZWJ1ZykgZWNobyAnT0snIC4gIlxuIjsKICAgICAgICAgICAgICAgICR0cyA9
ICR0OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYoJGRlYnVnKSBl
Y2hvICdJbnZhbGlkJyAuICJcbiI7CiAgICAgICAgICAgICAgICAkdHMgPSAkdGhpcy0+Zmlu
ZE5leHQoJHQpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAg
aWYoJGRlYnVnKSBlY2hvICdOb3QgZm91bmQnIC4gIlxuIjsKICAgICAgICAgICAgJHRzID0g
JHRoaXMtPmZpbmROZXh0KCAkdGhpcy0+ZmluZFN0YXJ0aW5nUG9pbnQoICRvZmZzZXQsICR0
aGlzLT5ydWxlc1snaW50ZXJ2YWwnXSApICk7CiAgICAgICAgfQogICAgICAgIGlmICgkdHMg
JiYgaW5fYXJyYXkoJHRzLCAkdGhpcy0+ZXhjbHVkZWQpKQogICAgICAgICAgICByZXR1cm4g
JHRoaXMtPmZpbmROZXh0KCR0cyk7CgogICAgICAgIHJldHVybiAkdHM7CiAgICB9CgogICAg
LyoqCiAgICAgKiBGaW5kcyB0aGUgc3RhcnRpbmcgcG9pbnQgZm9yIHRoZSBuZXh0IHJ1bGUu
IEl0IGdvZXMgJGludGVydmFsCiAgICAgKiAnZnJlcScgZm9yd2FyZCBpbiB0aW1lIHNpbmNl
IHRoZSBnaXZlbiBvZmZzZXQKICAgICAqIEBwYXJhbSAgaW50ICAgICAkb2Zmc2V0CiAgICAg
KiBAcGFyYW0gIGludCAgICAgJGludGVydmFsCiAgICAgKiBAcGFyYW0gIGJvb2xlYW4gJHRy
dW5jYXRlCiAgICAgKiBAcmV0dXJuIGludAogICAgICovCiAgICBwcml2YXRlIGZ1bmN0aW9u
IGZpbmRTdGFydGluZ1BvaW50KCAkb2Zmc2V0LCAkaW50ZXJ2YWwsICR0cnVuY2F0ZSA9IHRy
dWUgKQogICAgewogICAgICAgICRfZnJlcSA9ICgkdGhpcy0+ZnJlcSA9PSAnZGFpbHknKSA/
ICdkYXlfXycgOiAkdGhpcy0+ZnJlcTsKICAgICAgICAkdCA9ICcrJyAuICRpbnRlcnZhbCAu
ICcgJyAuIHN1YnN0cigkX2ZyZXEsMCwtMikgLiAncyc7CiAgICAgICAgaWYgKCRfZnJlcSA9
PSAnbW9udGhseScgJiYgJHRydW5jYXRlKSB7CiAgICAgICAgICAgIGlmICgkaW50ZXJ2YWwg
PiAxKSB7CiAgICAgICAgICAgICAgICAkb2Zmc2V0ID0gc3RydG90aW1lKCcrJyAuICgkaW50
ZXJ2YWwgLSAxKSAuICcgbW9udGhzICcsICRvZmZzZXQpOwogICAgICAgICAgICB9CiAgICAg
ICAgICAgICR0ID0gJysnIC4gKGRhdGUoJ3QnLCAkb2Zmc2V0KSAtIGRhdGUoJ2QnLCAkb2Zm
c2V0KSArIDEpIC4gJyBkYXlzJzsKICAgICAgICB9CgogICAgICAgICRzcCA9IHN0cnRvdGlt
ZSgkdCwgJG9mZnNldCk7CgogICAgICAgIGlmICgkdHJ1bmNhdGUpIHsKICAgICAgICAgICAg
JHNwID0gJHRoaXMtPnRydW5jYXRlVG9QZXJpb2QoJHNwLCAkdGhpcy0+ZnJlcSk7CiAgICAg
ICAgfQoKICAgICAgICByZXR1cm4gJHNwOwogICAgfQoKICAgIC8qKgogICAgICogRmluZHMg
dGhlIGVhcmxpZXN0IHRpbWVzdGFtcCBwb3NpYmxlIG91dHNpZGUgdGhpcyBwZXJpb2lkCiAg
ICAgKiBAcGFyYW0gIGludCAkb2Zmc2V0CiAgICAgKiBAcmV0dXJuIGludAogICAgICovCiAg
ICBwdWJsaWMgZnVuY3Rpb24gZmluZEVuZE9mUGVyaW9kKCRvZmZzZXQpCiAgICB7CiAgICAg
ICAgcmV0dXJuICR0aGlzLT5maW5kU3RhcnRpbmdQb2ludCgkb2Zmc2V0LCAxKTsKICAgIH0K
CiAgICAvKioKICAgICAqIFJlc2V0cyB0aGUgdGltZXN0YW1wIHRvIHRoZSBiZWdpbm5pbmcg
b2YgdGhlCiAgICAgKiBwZXJpb2Qgc3BlY2lmaWVkIGJ5IGZyZXEKICAgICAqCiAgICAgKiBZ
ZXMgLSB0aGUgZmFsbC10aHJvdWdoIGlzIG9uIHB1cnBvc2UhCiAgICAgKgogICAgICogQHBh
cmFtICBpbnQgJHRpbWUKICAgICAqIEBwYXJhbSAgaW50ICRmcmVxCiAgICAgKiBAcmV0dXJu
IGludAogICAgICovCiAgICBwcml2YXRlIGZ1bmN0aW9uIHRydW5jYXRlVG9QZXJpb2QoICR0
aW1lLCAkZnJlcSApCiAgICB7CiAgICAgICAgJGRhdGUgPSBnZXRkYXRlKCR0aW1lKTsKICAg
ICAgICBzd2l0Y2ggKCRmcmVxKSB7CiAgICAgICAgICAgIGNhc2UgInllYXJseSI6CiAgICAg
ICAgICAgICAgICAkZGF0ZVsnbW9uJ10gPSAxOwogICAgICAgICAgICBjYXNlICJtb250aGx5
IjoKICAgICAgICAgICAgICAgICRkYXRlWydtZGF5J10gPSAxOwogICAgICAgICAgICBjYXNl
ICJkYWlseSI6CiAgICAgICAgICAgICAgICAkZGF0ZVsnaG91cnMnXSA9IDA7CiAgICAgICAg
ICAgIGNhc2UgJ2hvdXJseSc6CiAgICAgICAgICAgICAgICAkZGF0ZVsnbWludXRlcyddID0g
MDsKICAgICAgICAgICAgY2FzZSAibWludXRlbHkiOgogICAgICAgICAgICAgICAgJGRhdGVb
J3NlY29uZHMnXSA9IDA7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2Fz
ZSAid2Vla2x5IjoKICAgICAgICAgICAgICAgIGlmICggZGF0ZSgnTicsICR0aW1lKSA9PSAx
KSB7CiAgICAgICAgICAgICAgICAgICAgJGRhdGVbJ2hvdXJzJ10gPSAwOwogICAgICAgICAg
ICAgICAgICAgICRkYXRlWydtaW51dGVzJ10gPSAwOwogICAgICAgICAgICAgICAgICAgICRk
YXRlWydzZWNvbmRzJ10gPSAwOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg
ICAgICAgICAgICAkZGF0ZSA9IGdldGRhdGUoc3RydG90aW1lKCJsYXN0IG1vbmRheSAwOjAw
IiwgJHRpbWUpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJyZWFrOwog
ICAgICAgIH0KICAgICAgICAkZCA9IG1rdGltZSgkZGF0ZVsnaG91cnMnXSwgJGRhdGVbJ21p
bnV0ZXMnXSwgJGRhdGVbJ3NlY29uZHMnXSwgJGRhdGVbJ21vbiddLCAkZGF0ZVsnbWRheSdd
LCAkZGF0ZVsneWVhciddKTsKCiAgICAgICAgcmV0dXJuICRkOwogICAgfQoKICAgIC8qKgog
ICAgICogQXBwbGllcyB0aGUgQllEQVkgcnVsZSB0byB0aGUgZ2l2ZW4gdGltZXN0YW1wCiAg
ICAgKiBAcGFyYW0gIHN0cmluZyAkcnVsZQogICAgICogQHBhcmFtICBpbnQgICAgJHQKICAg
ICAqIEByZXR1cm4gaW50CiAgICAgKi8KICAgIHByaXZhdGUgZnVuY3Rpb24gcnVsZUJ5ZGF5
KCRydWxlLCAkdCkKICAgIHsKICAgICAgICAkcnVsZSA9IHN0cl9yZXBsYWNlKCciJywgJycs
ICRydWxlKTsKICAgICAgICAkZGlyID0gKCRydWxlezB9ID09ICctJykgPyAtMSA6IDE7CiAg
ICAgICAgJGRpcl90ID0gKCRkaXIgPT0gMSkgPyAnbmV4dCcgOiAnbGFzdCc7CgogICAgICAg
ICRkID0gJHRoaXMtPndlZWtkYXlzW3N1YnN0cigkcnVsZSwtMildOwogICAgICAgICRzID0g
JGRpcl90IC4gJyAnIC4gJGQgLiAnICcgLiBkYXRlKCdIOmk6cycsJHQpOwoKICAgICAgICBp
ZiAoICRydWxlID09IHN1YnN0cigkcnVsZSwgLTIpICkgewogICAgICAgICAgICBpZiAoIGRh
dGUoJ2wnLCAkdCkgPT0gdWNmaXJzdCgkZCkgKSB7CiAgICAgICAgICAgICAgICAkcyA9ICd0
b2RheSAnIC4gZGF0ZSgnSDppOnMnLCR0KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAg
JF90ID0gc3RydG90aW1lKCRzLCAkdCk7CgogICAgICAgICAgICBpZiAoICRfdCA9PSAkdCAm
JiBpbl9hcnJheSgkdGhpcy0+ZnJlcSwgYXJyYXkoJ21vbnRobHknLCAneWVhcmx5JykpICkg
ewogICAgICAgICAgICAgICAgLy8gWWVzLiBUaGlzIGlzIG5vdCBhIGdyZWF0IGlkZWEuLiBi
dXQgaGV5LCBpdCB3b3Jrcy4uIGZvciBub3cKICAgICAgICAgICAgICAgICRzID0gJ25leHQg
JyAuICRkIC4gJyAnIC4gZGF0ZSgnSDppOnMnLCR0KTsKICAgICAgICAgICAgICAgICRfdCA9
IHN0cnRvdGltZSgkcywgJF90KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJu
ICRfdDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkX2YgPSAkdGhpcy0+ZnJlcTsK
ICAgICAgICAgICAgaWYgKCBpc3NldCgkdGhpcy0+cnVsZXNbJ2J5bW9udGgnXSkgJiYgJHRo
aXMtPmZyZXEgPT0gJ3llYXJseScgKSB7CiAgICAgICAgICAgICAgICAkdGhpcy0+ZnJlcSA9
ICdtb250aGx5JzsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoJGRpciA9PSAtMSkg
ewogICAgICAgICAgICAgICAgJF90ID0gJHRoaXMtPmZpbmRFbmRPZlBlcmlvZCgkdCk7CiAg
ICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkX3QgPSAkdGhpcy0+dHJ1bmNh
dGVUb1BlcmlvZCgkdCwgJHRoaXMtPmZyZXEpOwogICAgICAgICAgICB9CiAgICAgICAgICAg
ICR0aGlzLT5mcmVxID0gJF9mOwoKICAgICAgICAgICAgJGMgPSBwcmVnX3JlcGxhY2UoJy9b
XjAtOV0vJywnJywkcnVsZSk7CiAgICAgICAgICAgICRjID0gKCRjID09ICcnKSA/IDEgOiAk
YzsKCiAgICAgICAgICAgICRuID0gJF90OwogICAgICAgICAgICB3aGlsZSAoJGMgPiAwKSB7
CiAgICAgICAgICAgICAgICBpZiAoICRkaXIgPT0gMSAmJiAkYyA9PSAxICYmIGRhdGUoJ2wn
LCAkdCkgPT0gdWNmaXJzdCgkZCkgKSB7CiAgICAgICAgICAgICAgICAgICAgJHMgPSAndG9k
YXkgJyAuIGRhdGUoJ0g6aTpzJywkdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg
ICAgICAkbiA9IHN0cnRvdGltZSgkcywgJG4pOwogICAgICAgICAgICAgICAgJGMtLTsKICAg
ICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuICRuOwogICAgICAgIH0KICAgIH0KCiAg
ICBwcml2YXRlIGZ1bmN0aW9uIHJ1bGVCeW1vbnRoKCRydWxlLCAkdCkKICAgIHsKICAgICAg
ICAkX3QgPSBta3RpbWUoZGF0ZSgnSCcsJHQpLCBkYXRlKCdpJywkdCksIGRhdGUoJ3MnLCR0
KSwgJHJ1bGUsIGRhdGUoJ2QnLCAkdCksIGRhdGUoJ1knLCAkdCkpOwogICAgICAgIGlmICgg
JHQgPT0gJF90ICYmIGlzc2V0KCR0aGlzLT5ydWxlc1snYnlkYXknXSkgKSB7CiAgICAgICAg
ICAgIC8vIFRPRE86IHRoaXMgc2hvdWxkIGNoZWNrIGlmIG9uZSBvZiB0aGUgYnkqZGF5J3Mg
ZXhpc3RzLCBhbmQgaGF2ZSBhIG11bHRpLWRheSB2YWx1ZQogICAgICAgICAgICByZXR1cm4g
ZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuICRfdDsKICAgICAg
ICB9CiAgICB9CgogICAgcHJpdmF0ZSBmdW5jdGlvbiBydWxlQnltb250aGRheSgkcnVsZSwg
JHQpCiAgICB7CiAgICAgICAgaWYgKCRydWxlIDwgMCkgewogICAgICAgICAgICAkcnVsZSA9
IGRhdGUoJ3QnLCAkdCkgKyAkcnVsZSArIDE7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4g
bWt0aW1lKGRhdGUoJ0gnLCR0KSwgZGF0ZSgnaScsJHQpLCBkYXRlKCdzJywkdCksIGRhdGUo
J20nLCAkdCksICRydWxlLCBkYXRlKCdZJywgJHQpKTsKICAgIH0KCiAgICBwcml2YXRlIGZ1
bmN0aW9uIHJ1bGVCeXllYXJkYXkoJHJ1bGUsICR0KQogICAgewogICAgICAgIGlmICgkcnVs
ZSA8IDApIHsKICAgICAgICAgICAgJF90ID0gJHRoaXMtPmZpbmRFbmRPZlBlcmlvZCgpOwog
ICAgICAgICAgICAkZCA9ICctJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkX3Qg
PSAkdGhpcy0+dHJ1bmNhdGVUb1BlcmlvZCgkdCwgJHRoaXMtPmZyZXEpOwogICAgICAgICAg
ICAkZCA9ICcrJzsKICAgICAgICB9CiAgICAgICAgJHMgPSAkZCAuIGFicygkcnVsZSAtMSkg
LiAnIGRheXMgJyAuIGRhdGUoJ0g6aTpzJywkdCk7CgogICAgICAgIHJldHVybiBzdHJ0b3Rp
bWUoJHMsICRfdCk7CiAgICB9CgogICAgcHJpdmF0ZSBmdW5jdGlvbiBydWxlQnl3ZWVrbm8o
JHJ1bGUsICR0KQogICAgewogICAgICAgIGlmICgkcnVsZSA8IDApIHsKICAgICAgICAgICAg
JF90ID0gJHRoaXMtPmZpbmRFbmRPZlBlcmlvZCgpOwogICAgICAgICAgICAkZCA9ICctJzsK
ICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkX3QgPSAkdGhpcy0+dHJ1bmNhdGVUb1Bl
cmlvZCgkdCwgJHRoaXMtPmZyZXEpOwogICAgICAgICAgICAkZCA9ICcrJzsKICAgICAgICB9
CgogICAgICAgICRzdWIgPSAoZGF0ZSgnVycsICRfdCkgPT0gMSkgPyAyIDogMTsKICAgICAg
ICAkcyA9ICRkIC4gYWJzKCRydWxlIC0gJHN1YikgLiAnIHdlZWtzICcgLiBkYXRlKCdIOmk6
cycsJHQpOwogICAgICAgICRfdCAgPSBzdHJ0b3RpbWUoJHMsICRfdCk7CgogICAgICAgIHJl
dHVybiAkX3Q7CiAgICB9CgogICAgcHJpdmF0ZSBmdW5jdGlvbiBydWxlQnlob3VyKCRydWxl
LCAkdCkKICAgIHsKICAgICAgICAkX3QgPSBta3RpbWUoJHJ1bGUsIGRhdGUoJ2knLCR0KSwg
ZGF0ZSgncycsJHQpLCBkYXRlKCdtJywkdCksIGRhdGUoJ2QnLCAkdCksIGRhdGUoJ1knLCAk
dCkpOwoKICAgICAgICByZXR1cm4gJF90OwogICAgfQoKICAgIHByaXZhdGUgZnVuY3Rpb24g
cnVsZUJ5bWludXRlKCRydWxlLCAkdCkKICAgIHsKICAgICAgICAkX3QgPSBta3RpbWUoZGF0
ZSgnaCcsJHQpLCAkcnVsZSwgZGF0ZSgncycsJHQpLCBkYXRlKCdtJywkdCksIGRhdGUoJ2Qn
LCAkdCksIGRhdGUoJ1knLCAkdCkpOwoKICAgICAgICByZXR1cm4gJF90OwogICAgfQoKICAg
IHByaXZhdGUgZnVuY3Rpb24gdmFsaWREYXRlKCAkdCApCiAgICB7CiAgICAgICAgaWYgKCBp
c3NldCgkdGhpcy0+cnVsZXNbJ3VudGlsJ10pICYmICR0ID4gJHRoaXMtPnJ1bGVzWyd1bnRp
bCddICkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBp
ZiAoIWlzX2FycmF5KCR0aGlzLT5leGNsdWRlZCkpIHsKICAgICAgICAgICAgJHRoaXMtPmV4
Y2x1ZGVkID0gKGFycmF5KSR0aGlzLT5leGNsdWRlZDsKICAgICAgICB9CiAgICAgICAgaWYg
KGluX2FycmF5KCR0LCAkdGhpcy0+ZXhjbHVkZWQpKSB7CiAgICAgICAgICAgIHJldHVybiBm
YWxzZTsKICAgICAgICB9CgogICAgICAgIGlmICggaXNzZXQoJHRoaXMtPnJ1bGVzWydieW1v
bnRoJ10pICkgewogICAgICAgICAgICAkbW9udGhzID0gZXhwbG9kZSgnLCcsICR0aGlzLT5y
dWxlc1snYnltb250aCddKTsKICAgICAgICAgICAgaWYgKCAhaW5fYXJyYXkoZGF0ZSgnbScs
ICR0KSwgJG1vbnRocykpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAg
ICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIGlzc2V0KCR0aGlzLT5ydWxlc1snYnlk
YXknXSkgKSB7CiAgICAgICAgICAgICRkYXlzID0gZXhwbG9kZSgnLCcsICR0aGlzLT5ydWxl
c1snYnlkYXknXSk7CiAgICAgICAgICAgIGZvcmVhY2ggKCRkYXlzIEFzICRpID0+ICRrKSB7
CiAgICAgICAgICAgICAgICAkZGF5c1skaV0gPSAkdGhpcy0+d2Vla2RheXNbIHByZWdfcmVw
bGFjZSgnL1teQS1aXS8nLCAnJywgJGspXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBp
ZiAoICFpbl9hcnJheShzdHJ0b2xvd2VyKGRhdGUoJ2wnLCAkdCkpLCAkZGF5cykpIHsKICAg
ICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAg
ICAgICBpZiAoIGlzc2V0KCR0aGlzLT5ydWxlc1snYnl3ZWVrbm8nXSkgKSB7CiAgICAgICAg
ICAgICR3ZWVrcyA9IGV4cGxvZGUoJywnLCAkdGhpcy0+cnVsZXNbJ2J5d2Vla25vJ10pOwog
ICAgICAgICAgICBpZiAoICFpbl9hcnJheShkYXRlKCdXJywgJHQpLCAkd2Vla3MpKSB7CiAg
ICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAg
ICAgICAgaWYgKCBpc3NldCgkdGhpcy0+cnVsZXNbJ2J5bW9udGhkYXknXSkpIHsKICAgICAg
ICAgICAgJHdlZWtkYXlzID0gZXhwbG9kZSgnLCcsICR0aGlzLT5ydWxlc1snYnltb250aGRh
eSddKTsKICAgICAgICAgICAgZm9yZWFjaCAoJHdlZWtkYXlzIEFzICRpID0+ICRrKSB7CiAg
ICAgICAgICAgICAgICBpZiAoJGsgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgJHdlZWtk
YXlzWyRpXSA9IGRhdGUoJ3QnLCAkdCkgKyAkayArIDE7CiAgICAgICAgICAgICAgICB9CiAg
ICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCAhaW5fYXJyYXkoZGF0ZSgnZCcsICR0KSwg
JHdlZWtkYXlzKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAg
ICB9CiAgICAgICAgfQogICAgICAgIGlmICggaXNzZXQoJHRoaXMtPnJ1bGVzWydieWhvdXIn
XSkgKSB7CiAgICAgICAgICAgICRob3VycyA9IGV4cGxvZGUoJywnLCAkdGhpcy0+cnVsZXNb
J2J5aG91ciddKTsKICAgICAgICAgICAgaWYgKCAhaW5fYXJyYXkoZGF0ZSgnSCcsICR0KSwg
JGhvdXJzKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9
CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBwcml2YXRlIGZ1
bmN0aW9uIGlzUHJlcnVsZSgkcnVsZSwgJGZyZXEpCiAgICB7CiAgICAgICAgaWYoICRydWxl
ID09ICd5ZWFyJykKCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICBpZiggJHJ1
bGUgPT0gJ21vbnRoJyAmJiAkZnJlcSA9PSAneWVhcmx5JykKCiAgICAgICAgICAgIHJldHVy
biB0cnVlOwogICAgICAgIGlmKCAkcnVsZSA9PSAnbW9udGhkYXknICYmIGluX2FycmF5KCRm
cmVxLCBhcnJheSgneWVhcmx5JywgJ21vbnRobHknKSkgJiYgIWlzc2V0KCR0aGlzLT5ydWxl
c1snYnlkYXknXSkpCgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAvLyBUT0RP
OiBpcyBpdCBmYXN0ZXIgdG8gZG8gbW9udGhkYXkgZmlyc3QsIGFuZCBpZ25vcmUgZGF5IGlm
IG1vbnRoZGF5IGV4aXN0cz8gLSBwcm9sbHkgYnkgYSBmYWN0b3Igb2YgNC4uCiAgICAgICAg
aWYoICRydWxlID09ICd5ZWFyZGF5JyAmJiAkZnJlcSA9PSAneWVhcmx5JyApCgogICAgICAg
ICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiggJHJ1bGUgPT0gJ3dlZWtubycgJiYgJGZy
ZXEgPT0gJ3llYXJseScgKQoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgaWYo
ICRydWxlID09ICdkYXknICYmIGluX2FycmF5KCRmcmVxLCBhcnJheSgneWVhcmx5JywgJ21v
bnRobHknLCAnd2Vla2x5JykpKQoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAg
aWYoICRydWxlID09ICdob3VyJyAmJiBpbl9hcnJheSgkZnJlcSwgYXJyYXkoJ3llYXJseScs
ICdtb250aGx5JywgJ3dlZWtseScsICdkYWlseScpKSkKCiAgICAgICAgICAgIHJldHVybiB0
cnVlOwogICAgICAgIGlmKCAkcnVsZSA9PSAnbWludXRlJyApCgogICAgICAgICAgICByZXR1
cm4gdHJ1ZTsKCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQp9CgovLyBuYW1lc3BhY2Ug
VEtyXElDYWw7Cgp1c2UgXEFycmF5QWNjZXNzOwp1c2UgQXJyYXlJdGVyYXRvcjsKdXNlIFxD
b3VudGFibGU7CnVzZSBcSXRlcmF0b3JBZ2dyZWdhdGU7CgovKioKICogQSBjbGFzcyBmb3Ig
c3RvcmluZyBhIHNpbmdsZSAoY29tcGxldGUpIGxpbmUgb2YgdGhlIElDYWwgZmlsZS4KICog
V2lsbCBmaW5kIHRoZSBsaW5lLXR5cGUsIHRoZSBhcmd1bWVudHMgYW5kIHRoZSBkYXRhIG9m
IHRoZSBmaWxlIGFuZAogKiBzdG9yZSB0aGVtLgogKgogKiBUaGUgbGluZS10eXBlIGNhbiBi
ZSBmb3VuZCBieSBxdWVyeWluZyBnZXRJZGVudCgpLCBkYXRhIHZpYSBlaXRoZXIKICogZ2V0
RGF0YSgpIG9yIHR5cGVjYXN0aW5nIHRvIGEgc3RyaW5nLgogKiBQYXJhbXMgY2FuIGJlIGFj
Y2VzcyB2aWEgdGhlIEFycmF5QWNjZXNzLiBBIGl0ZXJhdG9yIGlzIGFsc28gYXZpbGFibGUK
ICogdG8gaXRlcmF0b3Igb3ZlciB0aGUgcGFyYW1zLgogKgogKiBAYXV0aG9yIE1vcnRlbiBG
YW5nZWwgKEMpIDIwMDgKICogQGF1dGhvciBNaWNoYWVsIEthaG4gKEMpIDIwMTMKICogQGxp
Y2Vuc2UgaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktc2EvMi41L2Rr
L2RlZWQuZW5fR0IgQ0MtQlktU0EtREsKICovCmNsYXNzIExpbmUgaW1wbGVtZW50cyBBcnJh
eUFjY2VzcywgQ291bnRhYmxlLCBJdGVyYXRvckFnZ3JlZ2F0ZQp7CiAgICBwcm90ZWN0ZWQg
JGlkZW50OwogICAgcHJvdGVjdGVkICRkYXRhOwogICAgcHJvdGVjdGVkICRwYXJhbXMgPSBh
cnJheSgpOwoKICAgIHByb3RlY3RlZCAkcmVwbGFjZW1lbnRzID0gYXJyYXkoJ2Zyb20nPT5h
cnJheSgnXFwsJywgJ1xcbicsICdcXDsnLCAnXFw6JywgJ1xcIicpLCAndG8nPT5hcnJheSgn
LCcsICJcbiIsICc7JywgJzonLCAnIicpKTsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdHMg
YSBuZXcgbGluZS4KICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCAk
bGluZSApCiAgICB7CiAgICAgICAgJHNwbGl0ID0gc3RycG9zKCRsaW5lLCAnOicpOwogICAg
ICAgICRpZGVudHMgPSBleHBsb2RlKCc7Jywgc3Vic3RyKCRsaW5lLCAwLCAkc3BsaXQpKTsK
ICAgICAgICAkaWRlbnQgPSBzdHJ0b2xvd2VyKGFycmF5X3NoaWZ0KCRpZGVudHMpKTsKCiAg
ICAgICAgJGRhdGEgPSB0cmltKHN1YnN0cigkbGluZSwgJHNwbGl0KzEpKTsKICAgICAgICAk
ZGF0YSA9IHN0cl9yZXBsYWNlKCR0aGlzLT5yZXBsYWNlbWVudHNbJ2Zyb20nXSwgJHRoaXMt
PnJlcGxhY2VtZW50c1sndG8nXSwgJGRhdGEpOwoKICAgICAgICAkcGFyYW1zID0gYXJyYXko
KTsKICAgICAgICBmb3JlYWNoICgkaWRlbnRzIEFTICR2KSB7CiAgICAgICAgICAgIGxpc3Qo
JGssICR2KSA9IGV4cGxvZGUoJz0nLCAkdik7CiAgICAgICAgICAgICRwYXJhbXNbIHN0cnRv
bG93ZXIoJGspIF0gPSAkdjsKICAgICAgICB9CgogICAgICAgICR0aGlzLT5pZGVudCA9ICRp
ZGVudDsKICAgICAgICAkdGhpcy0+cGFyYW1zID0gJHBhcmFtczsKICAgICAgICAkdGhpcy0+
ZGF0YSA9ICRkYXRhOwogICAgfQoKICAgIC8qKgogICAgICogSXMgdGhpcyBsaW5lIHRoZSBi
ZWdpbmluZyBvZiBhIG5ldyBibG9jaz8KICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAg
ICBwdWJsaWMgZnVuY3Rpb24gaXNCZWdpbigpCiAgICB7CiAgICAgICAgcmV0dXJuICR0aGlz
LT5pZGVudCA9PSAnYmVnaW4nOwogICAgfQoKICAgIC8qKgogICAgICogSXMgdGhpcyBsaW5l
IHRoZSBlbmQgb2YgYSBibG9jaz8KICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAgICBw
dWJsaWMgZnVuY3Rpb24gaXNFbmQoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+aWRl
bnQgPT0gJ2VuZCc7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBsaW5lLXR5
cGUgKGlkZW50KSBvZiB0aGUgbGluZQogICAgICogQHJldHVybiBzdHJpbmcKICAgICAqLwog
ICAgcHVibGljIGZ1bmN0aW9uIGdldElkZW50KCkKICAgIHsKICAgICAgICByZXR1cm4gJHRo
aXMtPmlkZW50OwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgY29udGVudCBv
ZiB0aGUgbGluZQogICAgICogQHJldHVybiBzdHJpbmcKICAgICAqLwogICAgcHVibGljIGZ1
bmN0aW9uIGdldERhdGEoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+ZGF0YTsKICAg
IH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGNvbnRlbnQgb2YgdGhlIGxpbmUKICAg
ICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXREYXRh
QXNBcnJheSgpCiAgICB7CiAgICAgICAgaWYgKHN0cnBvcygkdGhpcy0+ZGF0YSwiLCIpICE9
PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZXhwbG9kZSgiLCIsJHRoaXMtPmRhdGEp
OwogICAgICAgIH0gZWxzZQoKICAgICAgICAgICAgcmV0dXJuIGFycmF5KCR0aGlzLT5kYXRh
KTsKICAgIH0KCiAgICAvKioKICAgICAqIEEgc3RhdGljIGhlbHBlciB0byBnZXQgYSBhcnJh
eSBvZiBpbnRvdWNoXGljYWxcTGluZSdzLCBhbmQgY2FsbHMKICAgICAqIGdldERhdGEoKSBv
biBlYWNoIG9mIHRoZW0gdG8gbGF5IHRoZSBkYXRhICJiYXJlIi4uCiAgICAgKgogICAgICog
QHBhcmFtIGludG91Y2hcaWNhbFxMaW5lW10KICAgICAqIEByZXR1cm4gYXJyYXkKICAgICAq
LwogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBSZW1vdmVfTGluZSgkYXJyKQogICAgewog
ICAgICAgICRydG4gPSBhcnJheSgpOwogICAgICAgIGZvcmVhY2ggKCRhcnIgQVMgJGsgPT4g
JHYpIHsKICAgICAgICAgICAgaWYgKGlzX2FycmF5KCR2KSkgewogICAgICAgICAgICAgICAg
JHJ0blska10gPSBzZWxmOjpSZW1vdmVfTGluZSgkdik7CiAgICAgICAgICAgIH0gZWxzZWlm
ICgkdiBpbnN0YW5jZW9mIExpbmUpIHsKICAgICAgICAgICAgICAgICRydG5bJGtdID0gJHYt
PmdldERhdGEoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICRydG5b
JGtdID0gJHY7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiAkcnRu
OwogICAgfQoKICAgIC8qKgogICAgICogQHNlZSBBcnJheUFjY2Vzcy5vZmZzZXRFeGlzdHMK
ICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIG9mZnNldEV4aXN0cyggJHBhcmFtICkKICAg
IHsKICAgICAgICByZXR1cm4gaXNzZXQoJHRoaXMtPnBhcmFtc1sgc3RydG9sb3dlcigkcGFy
YW0pIF0pOwogICAgfQoKICAgIC8qKgogICAgICogQHNlZSBBcnJheUFjY2Vzcy5vZmZzZXRH
ZXQKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIG9mZnNldEdldCggJHBhcmFtICkKICAg
IHsKICAgICAgICAkaW5kZXggPSBzdHJ0b2xvd2VyKCRwYXJhbSk7CiAgICAgICAgaWYgKGlz
c2V0KCR0aGlzLT5wYXJhbXNbICRpbmRleCBdKSkgewogICAgICAgICAgICByZXR1cm4gJHRo
aXMtPnBhcmFtc1sgJGluZGV4IF07CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICog
RGlzYWJsZWQgQXJyYXlBY2Nlc3MgcmVxdWlyZW1lbnQKICAgICAqIEBzZWUgQXJyYXlBY2Nl
c3Mub2Zmc2V0U2V0CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBvZmZzZXRTZXQoICRw
YXJhbSwgJHZhbCApCiAgICB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8q
KgogICAgICogRGlzYWJsZWQgQXJyYXlBY2Nlc3MgcmVxdWlyZW1lbnQKICAgICAqIEBzZWUg
QXJyYXlBY2Nlc3Mub2Zmc2V0VW5zZXQKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIG9m
ZnNldFVuc2V0KCAkcGFyYW0gKQogICAgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0K
CiAgICAvKioKICAgICAqIHRvU3RyaW5nIG1ldGhvZC4KICAgICAqIEBzZWUgZ2V0RGF0YSgp
CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBfX3RvU3RyaW5nKCkKICAgIHsKICAgICAg
ICByZXR1cm4gJHRoaXMtPmdldERhdGEoKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBzZWUg
Q291bnRhYmxlLmNvdW50CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBjb3VudCgpCiAg
ICB7CiAgICAgICAgcmV0dXJuIGNvdW50KCR0aGlzLT5wYXJhbXMpOwogICAgfQoKICAgIC8q
KgogICAgICogQHNlZSBJdGVyYXRvckFnZ3JlZ2F0ZS5nZXRJdGVyYXRvcgogICAgICovCiAg
ICBwdWJsaWMgZnVuY3Rpb24gZ2V0SXRlcmF0b3IoKQogICAgewogICAgICAgIHJldHVybiBu
ZXcgQXJyYXlJdGVyYXRvcigkdGhpcy0+cGFyYW1zKTsKICAgIH0KfQoKLy8gbmFtZXNwYWNl
IFRLclxJQ2FsOwoKLyoqCiAqIENsYXNzIFBhcnNlcgogKgogKiBAYXV0aG9yIE1vcnRlbiBG
YW5nZWwgKEMpIDIwMDgKICogQGF1dGhvciBNaWNoYWVsIEthaG4gKEMpIDIwMTMKICogQGxp
Y2Vuc2UgaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktc2EvMi41L2Rr
L2RlZWQuZW5fR0IgQ0MtQlktU0EtREsKICovCmNsYXNzIFBhcnNlcgp7CiAgICAvKioKICAg
ICAqIEZldGNoZXMgJHVybCBhbmQgcGFzc2VzIGl0IG9uIHRvIGJlIHBhcnNlZAogICAgICog
QHBhcmFtIHN0cmluZyAkdXJsCiAgICAgKiBAcGFyYW0gSUNhbCAkaWNhbAogICAgICovCiAg
ICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIFBhcnNlKCAkdXJsLCBJQ2FsICRpY2FsICkKICAg
IHsKICAgICAgICAkY29udGVudCA9IHNlbGY6OkZldGNoKCAkdXJsICk7CiAgICAgICAgJGNv
bnRlbnQgPSBzZWxmOjpVbmZvbGRMaW5lcygkY29udGVudCk7CiAgICAgICAgc2VsZjo6X1Bh
cnNlKCAkY29udGVudCwgJGljYWwgKTsKICAgIH0KCiAgICAvKioKICAgICAqIFBhc3NlcyBh
IHRleHQgc3RyaW5nIG9uIHRvIGJlIHBhcnNlZAogICAgICogQHBhcmFtIHN0cmluZyAgICAg
ICAgICAgICRjb250ZW50CiAgICAgKiBAcGFyYW0gSUNhbCAkaWNhbAogICAgICovCiAgICBw
dWJsaWMgc3RhdGljIGZ1bmN0aW9uIFBhcnNlU3RyaW5nKCRjb250ZW50LCBJQ2FsICRpY2Fs
ICkKICAgIHsKICAgICAgICAkY29udGVudCA9IHNlbGY6OlVuZm9sZExpbmVzKCRjb250ZW50
KTsKICAgICAgICBzZWxmOjpfUGFyc2UoICRjb250ZW50LCAkaWNhbCApOwogICAgfQoKICAg
IC8qKgogICAgICogRmV0Y2hlcyBhIHJlc291cmNlIGFuZCB0cmllcyB0byBtYWtlIHN1cmUg
aXQncyBVVEY4CiAgICAgKiBlbmNvZGVkCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICov
CiAgICBwcm90ZWN0ZWQgc3RhdGljIGZ1bmN0aW9uIEZldGNoKCAkcmVzb3VyY2UgKQogICAg
ewogICAgICAgICRpc191dGY4ID0gdHJ1ZTsKCiAgICAgICAgaWYgKCBpc19maWxlKCAkcmVz
b3VyY2UgKSApIHsKICAgICAgICAgICAgLy8gVGhlIHJlc291cmNlIGlzIGEgbG9jYWwgZmls
ZQogICAgICAgICAgICAkY29udGVudCA9IGZpbGVfZ2V0X2NvbnRlbnRzKCRyZXNvdXJjZSk7
CgogICAgICAgICAgICBpZiAoICEgc2VsZjo6X1ZhbGlkVXRmOCggJGNvbnRlbnQgKSApIHsK
ICAgICAgICAgICAgICAgIC8vIFRoZSBmaWxlIGRvZXNuJ3QgYXBwZWFyIHRvIGJlIFVURjgK
ICAgICAgICAgICAgICAgICRpc191dGY4ID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAg
ICB9IGVsc2UgewogICAgICAgICAgICAvLyBUaGUgcmVzb3VyY2UgaXNuJ3QgbG9jYWwsIHNv
IGl0J3MgYXNzdW1lZCB0bwogICAgICAgICAgICAvLyBiZSBhIFVSTAogICAgICAgICAgICAk
YyA9IGN1cmxfaW5pdCgpOwogICAgICAgICAgICBjdXJsX3NldG9wdCgkYywgQ1VSTE9QVF9V
UkwsICRyZXNvdXJjZSk7CiAgICAgICAgICAgIGN1cmxfc2V0b3B0KCRjLCBDVVJMT1BUX1JF
VFVSTlRSQU5TRkVSLCB0cnVlKTsKICAgICAgICAgICAgaWYgKCAhaW5pX2dldCgnc2FmZV9t
b2RlJykgJiYgIWluaV9nZXQoJ29wZW5fYmFzZWRpcicpICkgewogICAgICAgICAgICAgICAg
Y3VybF9zZXRvcHQoJGMsIENVUkxPUFRfRk9MTE9XTE9DQVRJT04sIHRydWUpOwogICAgICAg
ICAgICB9CiAgICAgICAgICAgICRjb250ZW50ID0gY3VybF9leGVjKCRjKTsKCiAgICAgICAg
ICAgICRjdCA9IGN1cmxfZ2V0aW5mbygkYywgQ1VSTElORk9fQ09OVEVOVF9UWVBFKTsKICAg
ICAgICAgICAgJGVuYyA9IHByZWdfcmVwbGFjZSgnL14uKmNoYXJzZXQ9KFstYS16QS1aMC05
XSspLiokLycsICckMScsICRjdCk7CiAgICAgICAgICAgIGlmICggJGN0ICE9ICcnICYmIHN0
cnRvbG93ZXIoc3RyX3JlcGxhY2UoJy0nLCcnLCAkZW5jKSkgIT0gJ3V0ZjgnICkgewogICAg
ICAgICAgICAgICAgLy8gV2VsbCwgdGhlIGVuY29kaW5nIHNheXMgaXQgYWluJ3QgdXRmLTgK
ICAgICAgICAgICAgICAgICRpc191dGY4ID0gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZWlm
ICggISBzZWxmOjpfVmFsaWRVdGY4KCAkY29udGVudCApICkgewogICAgICAgICAgICAgICAg
Ly8gVGhlIGRhdGEgaXNuJ3QgdXRmLTgKICAgICAgICAgICAgICAgICRpc191dGY4ID0gZmFs
c2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghJGlzX3V0ZjgpIHsK
ICAgICAgICAgICAgJGNvbnRlbnQgPSB1dGY4X2VuY29kZSgkY29udGVudCk7CiAgICAgICAg
fQoKICAgICAgICByZXR1cm4gJGNvbnRlbnQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBUYWtl
cyB0aGUgc3RyaW5nICRjb250ZW50LCBhbmQgY3JlYXRlcyBhIGFycmF5IG9mIElDYWwgbGlu
ZXMuCiAgICAgKiBUaGlzIGluY2x1ZGVzIHVuZm9sZGluZyBtdWx0aS1saW5lIGVudHJpZXMg
aW50byBhIHNpbmdsZSBsaW5lLgogICAgICogQHBhcmFtICRjb250ZW50IHN0cmluZwogICAg
ICovCiAgICBwcm90ZWN0ZWQgc3RhdGljIGZ1bmN0aW9uIFVuZm9sZExpbmVzKCRjb250ZW50
KQogICAgewogICAgICAgICRkYXRhID0gYXJyYXkoKTsKICAgICAgICAkY29udGVudCA9IGV4
cGxvZGUoIlxuIiwgJGNvbnRlbnQpOwogICAgICAgIGZvciAoICRpPTA7ICRpIDwgY291bnQo
JGNvbnRlbnQpOyAkaSsrKSB7CiAgICAgICAgICAgICRsaW5lID0gcnRyaW0oJGNvbnRlbnRb
JGldKTsKICAgICAgICAgICAgd2hpbGUgKCBpc3NldCgkY29udGVudFskaSsxXSkgJiYgc3Ry
bGVuKCRjb250ZW50WyRpKzFdKSA+IDAgJiYgKCRjb250ZW50WyRpKzFdezB9ID09ICcgJyB8
fCAkY29udGVudFskaSsxXXswfSA9PSAiXHQiICkpIHsKICAgICAgICAgICAgICAgICRsaW5l
IC49IHJ0cmltKHN1YnN0cigkY29udGVudFsrKyRpXSwxKSk7CiAgICAgICAgICAgIH0KICAg
ICAgICAgICAgJGRhdGFbXSA9ICRsaW5lOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRk
YXRhOwogICAgfQoKICAgIC8qKgogICAgICogUGFyc2VzIHRoZSBmZWVkIGZvdW5kIGluIGNv
bnRlbnQgYW5kIGNhbGxzIHN0b3JlU2VjdGlvbiB0byBzdG9yZQogICAgICogcGFyc2VkIGRh
dGEKICAgICAqIEBwYXJhbSBzdHJpbmcgJGNvbnRlbnQKICAgICAqIEBwYXJhbSBJQ2FsICRp
Y2FsCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIF9QYXJzZSggJGNvbnRl
bnQsIElDYWwgJGljYWwgKQogICAgewogICAgICAgICRtYWluX3NlY3Rpb25zID0gYXJyYXko
J3ZldmVudCcsICd2am91cm5hbCcsICd2dG9kbycsICd2dGltZXpvbmUnLCAndmNhbGVuZGFy
Jyk7CiAgICAgICAgJGFycmF5X2lkZW50cyA9IGFycmF5KCdleGRhdGUnLCdyZGF0ZScsJ2F0
dGVuZGVlJyk7CiAgICAgICAgJHNlY3Rpb25zID0gYXJyYXkoKTsKICAgICAgICAkc2VjdGlv
biA9ICcnOwogICAgICAgICRjdXJyZW50X2RhdGEgPSBhcnJheSgpOwoKICAgICAgICBmb3Jl
YWNoICgkY29udGVudCBBUyAkbGluZSkgewogICAgICAgICAgICAkbGluZSA9IG5ldyBMaW5l
KCRsaW5lKTsKICAgICAgICAgICAgaWYgKCAkbGluZS0+aXNCZWdpbigpICkgewogICAgICAg
ICAgICAgICAgLy8gTmV3IGJsb2NrIG9mIGRhdGEsICRzZWN0aW9uID0gbmV3IGJsb2NrCiAg
ICAgICAgICAgICAgICAkc2VjdGlvbiA9IHN0cnRvbG93ZXIoJGxpbmUtPmdldERhdGEoKSk7
CiAgICAgICAgICAgICAgICAkc2VjdGlvbnNbXSA9IHN0cnRvbG93ZXIoJGxpbmUtPmdldERh
dGEoKSk7CiAgICAgICAgICAgIH0gZWxzZWlmICggJGxpbmUtPmlzRW5kKCkgKSB7CiAgICAg
ICAgICAgICAgICAvLyBFbmQgb2YgYmxvY2sgb2YgZGF0YSAoJHJlbW92ZWQgPSBqdXN0IGVu
ZGVkIGJsb2NrLCAkc2VjdGlvbiA9IG5ldyB0b3AtYmxvY2spCiAgICAgICAgICAgICAgICAk
cmVtb3ZlZCA9IGFycmF5X3BvcCgkc2VjdGlvbnMpOwogICAgICAgICAgICAgICAgJHNlY3Rp
b24gPSBlbmQoJHNlY3Rpb25zKTsKCiAgICAgICAgICAgICAgICBpZiAoIGFycmF5X3NlYXJj
aCgkcmVtb3ZlZCwgJG1haW5fc2VjdGlvbnMpICE9PSBmYWxzZSApIHsKICAgICAgICAgICAg
ICAgICAgICBzZWxmOjpTdG9yZVNlY3Rpb24oICRyZW1vdmVkLCAkY3VycmVudF9kYXRhWyRy
ZW1vdmVkXSwgJGljYWwpOwogICAgICAgICAgICAgICAgICAgICRjdXJyZW50X2RhdGFbJHJl
bW92ZWRdID0gYXJyYXkoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNl
IHsKICAgICAgICAgICAgICAgIC8vIERhdGEgbGluZQogICAgICAgICAgICAgICAgZm9yZWFj
aCAoJG1haW5fc2VjdGlvbnMgQVMgJHMpIHsKICAgICAgICAgICAgICAgICAgICAvLyBMb29w
cyB0aG91Z2ggdGhlIG1haW4gc2VjdGlvbnMKICAgICAgICAgICAgICAgICAgICBpZiAoIGFy
cmF5X3NlYXJjaCgkcywgJHNlY3Rpb25zKSAhPT0gZmFsc2UgKSB7CiAgICAgICAgICAgICAg
ICAgICAgICAgIC8vIFRoaXMgc2VjdGlvbiBpcyBpbiB0aGUgbWFpbiBzZWN0aW9uCiAgICAg
ICAgICAgICAgICAgICAgICAgIGlmICgkc2VjdGlvbiA9PSAkcykgewogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgLy8gSXQgX2lzXyB0aGUgbWFpbiBzZWN0aW9uIGVsc2UKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGlmIChpbl9hcnJheSgkbGluZS0+Z2V0SWRlbnQoKSwg
JGFycmF5X2lkZW50cykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2V4
ZGF0ZSBjb3VsZCBhcHBlYXJzIG1vcmUgdGhhdCBvbmNlCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgJGN1cnJlbnRfZGF0YVskc11bJGxpbmUtPmdldElkZW50KCldW10gPSAk
bGluZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjdXJy
ZW50X2RhdGFbJHNdWyRsaW5lLT5nZXRJZGVudCgpXSA9ICRsaW5lOwogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3ViIHNlY3Rpb24KICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICRjdXJyZW50X2RhdGFbJHNdWyRzZWN0aW9uXVskbGluZS0+Z2V0SWRl
bnQoKV0gPSAkbGluZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg
ICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAg
ICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgJGN1cnJlbnRfZGF0YSA9IGFy
cmF5KCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTdG9yZXMgdGhlIGRhdGEgaW4gcHJvdmlk
ZWQgaW50b3VjaFxpY2FsXGlDYWxvYmplY3QKICAgICAqIEBwYXJhbSBzdHJpbmcgJHNlY3Rp
b24gZWcgJ3ZjYWxlbmRlcicsICd2ZXZlbnQnIGV0YwogICAgICogQHBhcmFtIHN0cmluZyAk
ZGF0YQogICAgICogQHBhcmFtIElDYWwgJGljYWwKICAgICAqLwogICAgcHJvdGVjdGVkIHN0
YXRpYyBmdW5jdGlvbiBzdG9yZVNlY3Rpb24oICRzZWN0aW9uLCAkZGF0YSwgSUNhbCAkaWNh
bCApCiAgICB7CiAgICAgICAgJGRhdGEgPSBGYWN0b3J5OjpmYWN0b3J5KCRpY2FsLCAkc2Vj
dGlvbiwgJGRhdGEpOwogICAgICAgIHN3aXRjaCAoJHNlY3Rpb24pIHsKICAgICAgICAgICAg
Y2FzZSAndmNhbGVuZGFyJzoKICAgICAgICAgICAgICAgIHJldHVybiAkaWNhbC0+c2V0Q2Fs
ZW5kYXJJbmZvKCAkZGF0YSApOwogICAgICAgICAgICBjYXNlICd2ZXZlbnQnOgogICAgICAg
ICAgICAgICAgcmV0dXJuICRpY2FsLT5hZGRFdmVudCggJGRhdGEgKTsKICAgICAgICAgICAg
Y2FzZSAndmpvdXJuYWwnOgogICAgICAgICAgICBjYXNlICd2dG9kbyc6CiAgICAgICAgICAg
ICAgICByZXR1cm4gdHJ1ZTsgLy8gVE9ETzogSW1wbGVtZW50CiAgICAgICAgICAgIGNhc2Ug
J3Z0aW1lem9uZSc6CiAgICAgICAgICAgICAgICByZXR1cm4gJGljYWwtPmFkZFRpbWVab25l
KCAkZGF0YSApOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFRoaXMgZnVuY3Rp
b25zIGRvZXMgc29tZSByZWdleHAgY2hlY2tpbmcgdG8gc2VlIGlmIHRoZSB2YWx1ZSBpcwog
ICAgICogdmFsaWQgVVRGLTguCiAgICAgKgogICAgICogVGhlIGZ1bmN0aW9uIGlzIGZyb20g
dGhlIGJvb2sgIkJ1aWxkaW5nIFNjYWxhYmxlIFdlYiBTaXRlcyIgYnkKICAgICAqIENhbCBI
ZW5kZXJzb24uCiAgICAgKgogICAgICogQHBhcmFtICBzdHJpbmcgJGRhdGEKICAgICAqIEBy
ZXR1cm4gYm9vbAogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiBfVmFsaWRV
dGY4KCAkZGF0YSApCiAgICB7CiAgICAgICAgJHJ4ICA9ICdbXHhDMC1ceERGXShbXlx4ODAt
XHhCRl18JCknOwogICAgICAgICRyeCAuPSAnfFtceEUwLVx4RUZdLnswLDF9KFteXHg4MC1c
eEJGXXwkKSc7CiAgICAgICAgJHJ4IC49ICd8W1x4RjAtXHhGN10uezAsMn0oW15ceDgwLVx4
QkZdfCQpJzsKICAgICAgICAkcnggLj0gJ3xbXHhGOC1ceEZCXS57MCwzfShbXlx4ODAtXHhC
Rl18JCknOwogICAgICAgICRyeCAuPSAnfFtceEZDLVx4RkRdLnswLDR9KFteXHg4MC1ceEJG
XXwkKSc7CiAgICAgICAgJHJ4IC49ICd8W1x4RkUtXHhGRV0uezAsNX0oW15ceDgwLVx4QkZd
fCQpJzsKICAgICAgICAkcnggLj0gJ3xbXHgwMC1ceDdGXVtceDgwLVx4QkZdJzsKICAgICAg
ICAkcnggLj0gJ3xbXHhDMC1ceERGXS5bXHg4MC1ceEJGXSc7CiAgICAgICAgJHJ4IC49ICd8
W1x4RTAtXHhFRl0uLltceDgwLVx4QkZdJzsKICAgICAgICAkcnggLj0gJ3xbXHhGMC1ceEY3
XS4uLltceDgwLVx4QkZdJzsKICAgICAgICAkcnggLj0gJ3xbXHhGOC1ceEZCXS4uLi5bXHg4
MC1ceEJGXSc7CiAgICAgICAgJHJ4IC49ICd8W1x4RkMtXHhGRF0uLi4uLltceDgwLVx4QkZd
JzsKICAgICAgICAkcnggLj0gJ3xbXHhGRS1ceEZFXS4uLi4uLltceDgwLVx4QkZdJzsKICAg
ICAgICAkcnggLj0gJ3xeW1x4ODAtXHhCRl0nOwoKICAgICAgICByZXR1cm4gKCAhIChib29s
KSBwcmVnX21hdGNoKCchJy4kcnguJyEnLCAkZGF0YSkgKTsKICAgIH0KfQoKLy8gbmFtZXNw
YWNlIFRLclxJQ2FsOwp1c2UgRXhjZXB0aW9uOwoKLyoqCiAqCiAqIEEgY29sbGVjdGlvbiBv
ZiBmdW5jdGlvbnMgdG8gcXVlcnkgdGhlIGV2ZW50cyBpbiBhIGNhbGVuZGFyLgogKgogKiBA
YXV0aG9yIE1vcnRlbiBGYW5nZWwgKEMpIDIwMDgKICogQGF1dGhvciBNaWNoYWVsIEthaG4g
KEMpIDIwMTMKICogQGxpY2Vuc2UgaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5z
ZXMvYnktc2EvMi41L2RrL2RlZWQuZW5fR0IgQ0MtQlktU0EtREsKICovCmNsYXNzIFF1ZXJ5
CnsKICAgIC8qKgogICAgICogUmV0dXJucyBhbGwgZXZlbnRzIGZyb20gdGhlIGNhbGVuZGFy
IGJldHdlZW4gdHdvIHRpbWVzdGFtcHMKICAgICAqCiAgICAgKiBOb3RlIHRoYXQgdGhlIGV2
ZW50cyByZXR1cm5lZCBuZWVkcyBvbmx5IHNsaWdodGx5IG92ZXJsYXAuCiAgICAgKgogICAg
ICogQHBhcmFtICBpbnRvdWNoXGljYWxcaUNhbCB8YXJyYXkgJGljYWwgIFRoZSBjYWxlbmRh
ciB0byBxdWVyeQogICAgICogQHBhcmFtICBpbnQgICAgICAgICAgICAgICAgICAgICAgJHN0
YXJ0CiAgICAgKiBAcGFyYW0gIGludCAgICAgICAgICAgICAgICAgICAgICAkZW5kCiAgICAg
KiBAcmV0dXJuIGludG91Y2hcaWNhbFxWRXZlbnRbXQogICAgICovCiAgICBwdWJsaWMgc3Rh
dGljIGZ1bmN0aW9uIEJldHdlZW4oSUNhbCAkaWNhbCwgJHN0YXJ0LCAkZW5kICkKICAgIHsK
ICAgICAgICBpZiAoJGljYWwgaW5zdGFuY2VvZiBJQ2FsKSB7CiAgICAgICAgICAgICRpY2Fs
ID0gJGljYWwtPmdldEV2ZW50cygpOwogICAgICAgIH0KICAgICAgICBpZiAoICFpc19hcnJh
eSgkaWNhbCkgKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ2ludG91Y2hc
aWNhbFxRdWVyeTo6QmV0d2VlbiBjYWxsZWQgd2l0aCBpbnZhbGlkIGlucHV0IScpOwogICAg
ICAgIH0KCiAgICAgICAgJHJ0biA9IGFycmF5KCk7CiAgICAgICAgZm9yZWFjaCAoJGljYWwg
QVMgJGUpIHsKICAgICAgICAgICAgaWYoICgkc3RhcnQgPD0gJGUtPmdldFN0YXJ0KCkgJiYg
JGUtPmdldFN0YXJ0KCkgPCAkZW5kKQogICAgICAgICAgICAgfHwgKCRzdGFydCA8ICRlLT5n
ZXRSYW5nZUVuZCgpICYmICRlLT5nZXRSYW5nZUVuZCgpIDw9ICRlbmQpICkgewogICAgICAg
ICAgICAgICAgJHJ0bltdID0gJGU7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAg
IHJldHVybiAkcnRuOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhbGwgZXZlbnRz
IGZyb20gdGhlIGNhbGVuZGFyIGFmdGVyIGEgZ2l2ZW4gdGltZXN0YW1wCiAgICAgKgogICAg
ICogQHBhcmFtICBpbnRvdWNoXGljYWxcaUNhbHxhcnJheSAkaWNhbCAgVGhlIGNhbGVuZGFy
IHRvIHF1ZXJ5CiAgICAgKiBAcGFyYW0gIGludCAgICAgICAgICAgICAgICAgICAgICRzdGFy
dAogICAgICogQHJldHVybiBpbnRvdWNoXGljYWxcVkV2ZW50W10KICAgICAqLwogICAgcHVi
bGljIHN0YXRpYyBmdW5jdGlvbiBBZnRlciggJGljYWwsICRzdGFydCApCiAgICB7CiAgICAg
ICAgaWYgKCRpY2FsIGluc3RhbmNlb2YgSUNhbCkgewogICAgICAgICAgICAkaWNhbCA9ICRp
Y2FsLT5nZXRFdmVudHMoKTsKICAgICAgICB9CiAgICAgICAgaWYgKCAhaXNfYXJyYXkoJGlj
YWwpICkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdpbnRvdWNoXGljYWxc
UXVlcnk6OkFmdGVyIGNhbGxlZCB3aXRoIGludmFsaWQgaW5wdXQhJyk7CiAgICAgICAgfQoK
ICAgICAgICAkcnRuID0gYXJyYXkoKTsKICAgICAgICBmb3JlYWNoICgkaWNhbCBBUyAkZSkg
ewogICAgICAgICAgICBpZiAoJGUtPmdldFN0YXJ0KCkgPj0gJHN0YXJ0IHx8ICRlLT5nZXRS
YW5nZUVuZCgpID49ICRzdGFydCkgewogICAgICAgICAgICAgICAgJHJ0bltdID0gJGU7CiAg
ICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiAkcnRuOwogICAgfQoKICAg
IC8qKgogICAgICogU29ydHMgdGhlIGV2ZW50cyBmcm9tIHRoZSBjYWxlbmRhciBhZnRlciB0
aGUgc3BlY2lmaWVkIGNvbHVtbi4KICAgICAqIENvbHVtbiBjYW4gYmUgYWxsIHZhbGlkIGVu
dGlyZXMgdGhhdCBnZXRQcm9wZXJ0eSBjYW4gcmV0dXJuLgogICAgICogU28gc3R1ZmYgbGlr
ZSB1aWQsIHN0YXJ0LCBlbmQsIHN1bW1hcnkgZXRjLgogICAgICogQHBhcmFtICBpbnRvdWNo
XGljYWxcaUNhbHxhcnJheSAkaWNhbCAgIFRoZSBjYWxlbmRhciB0byBxdWVyeQogICAgICog
QHBhcmFtICBzdHJpbmcgICAgICAgICAgICAgICAgICAkY29sdW1uCiAgICAgKiBAcmV0dXJu
IGludG91Y2hcaWNhbFxWRXZlbnRbXQogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0
aW9uIFNvcnQoICRpY2FsLCAkY29sdW1uICkKICAgIHsKICAgICAgICBpZiAoJGljYWwgaW5z
dGFuY2VvZiBJQ2FsKSB7CiAgICAgICAgICAgICRpY2FsID0gJGljYWwtPmdldEV2ZW50cygp
OwogICAgICAgIH0KICAgICAgICBpZiAoICFpc19hcnJheSgkaWNhbCkgKSB7CiAgICAgICAg
ICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ2ludG91Y2hcaWNhbFxRdWVyeTo6U29ydCBjYWxs
ZWQgd2l0aCBpbnZhbGlkIGlucHV0IScpOwogICAgICAgIH0KCiAgICAgICAgJGNtcCA9IGNy
ZWF0ZV9mdW5jdGlvbignJGEsICRiJywgJ3JldHVybiBzdHJjbXAoJGEtPmdldFByb3BlcnR5
KCInIC4gJGNvbHVtbiAuICciKSwgJGItPmdldFByb3BlcnR5KCInIC4gJGNvbHVtbiAuICci
KSk7Jyk7CiAgICAgICAgdXNvcnQoJGljYWwsICRjbXApOwoKICAgICAgICByZXR1cm4gJGlj
YWw7CiAgICB9Cn0KCi8vIG5hbWVzcGFjZSBUS3JcSUNhbDsKCnVzZSBcRGF0ZVRpbWU7Cgov
KioKICogQSB3cmFwcGVyIGZvciByZWN1cnJlbmNlIHJ1bGVzIGluIGlDYWxlbmRhci4gIFBh
cnNlcyB0aGUgZ2l2ZW4gbGluZSBhbmQgcHV0cyB0aGUKICogcmVjdXJyZW5jZSBydWxlcyBp
biB0aGUgY29ycmVjdCBmaWVsZCBvZiB0aGlzIG9iamVjdC4KICoKICogU2VlIGh0dHA6Ly90
b29scy5pZXRmLm9yZy9odG1sL3JmYzI0NDUgZm9yIG1vcmUgaW5mb3JtYXRpb24uICBQYWdl
IDM5IGFuZCBvbndhcmQgY29udGFpbnMgbW9yZQogKiBpbmZvcm1hdGlvbiBvbiB0aGUgcmVj
dXJyZW5jZSBydWxlcyB0aGVtc2VsdmVzLiAgUGFnZSAxMTYgYW5kIG9ud2FyZCBjb250YWlu
cwogKiBzb21lIGdyZWF0IGV4YW1wbGVzIHdoaWNoIHdlcmUgb2Z0ZW4gdXNlZCBmb3IgdGVz
dGluZy4KICoKICogQGF1dGhvciBTdGV2ZW4gT3hsZXkKICogQGF1dGhvciBNaWNoYWVsIEth
aG4gKEMpIDIwMTMKICogQGxpY2Vuc2UgaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGlj
ZW5zZXMvYnktc2EvMi41L2RrL2RlZWQuZW5fR0IgQ0MtQlktU0EtREsKICovCmNsYXNzIFJl
Y3VycmVuY2UKewogICAgcHVibGljICRycnVsZTsKCiAgICBwcm90ZWN0ZWQgJGZyZXE7Cgog
ICAgcHVibGljICR1bnRpbDsKICAgIHByb3RlY3RlZCAkY291bnQ7CgogICAgcHJvdGVjdGVk
ICRpbnRlcnZhbDsKICAgIHByb3RlY3RlZCAkYnlzZWNvbmQ7CiAgICBwcm90ZWN0ZWQgJGJ5
bWludXRlOwogICAgcHJvdGVjdGVkICRieWhvdXI7CiAgICBwcm90ZWN0ZWQgJGJ5ZGF5Owog
ICAgcHJvdGVjdGVkICRieW1vbnRoZGF5OwogICAgcHJvdGVjdGVkICRieXllYXJkYXk7CiAg
ICBwcm90ZWN0ZWQgJGJ5d2Vla25vOwogICAgcHJvdGVjdGVkICRieW1vbnRoOwogICAgcHJv
dGVjdGVkICRieXNldHBvczsKCiAgICBwcm90ZWN0ZWQgJHdrc3Q7CgogICAgLyoqCiAgICAg
KiBBIGxpc3Qgb2YgdGhlIHByb3BlcnRpZXMgdGhhdCBjYW4gaGF2ZSBjb21tYS1zZXBhcmF0
ZWQgbGlzdHMgZm9yIHZhbHVlcy4KICAgICAqIEB2YXIgYXJyYXkKICAgICAqLwogICAgcHJv
dGVjdGVkICRsaXN0UHJvcGVydGllcyA9IGFycmF5KAogICAgICAgICdieXNlY29uZCcsICdi
eW1pbnV0ZScsICdieWhvdXInLCAnYnlkYXknLCAnYnltb250aGRheScsCiAgICAgICAgJ2J5
eWVhcmRheScsICdieXdlZWtubycsICdieW1vbnRoJywgJ2J5c2V0cG9zJwogICAgKTsKCiAg
ICAvKioKICAgICAqIENyZWF0ZXMgYW4gcmVjdXJyZW5jZSBvYmplY3Qgd2l0aCBhIHBhc3Nl
ZCBpbiBsaW5lLiAgUGFyc2VzIHRoZSBsaW5lLgogICAgICogQHBhcmFtIG9iamVjdCAkbGlu
ZSBhbiBpbnRvdWNoXGljYWxcTGluZSBvYmplY3Qgd2hpY2ggd2lsbCBiZSBwYXJzZWQgdG8g
Z2V0IHRoZQogICAgICogZGVzaXJlZCBpbmZvcm1hdGlvbi4KICAgICAqLwogICAgcHVibGlj
IGZ1bmN0aW9uIF9fY29uc3RydWN0KExpbmUgJGxpbmUpCiAgICB7CiAgICAgICAgJHRoaXMt
PnBhcnNlTGluZSgkbGluZS0+Z2V0RGF0YSgpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFBh
cnNlcyBhbiAnUlJVTEUnIGxpbmUgYW5kIHNldHMgdGhlIG1lbWJlciB2YXJpYWJsZXMgb2Yg
dGhpcyBvYmplY3QuCiAgICAgKiBFeHBlY3RzIGEgc3RyaW5nIHRoYXQgbG9va3MgbGlrZSB0
aGlzOiAgJ0ZSRVE9V0VFS0xZO0lOVEVSVkFMPTI7QllEQVk9U1UsVFUsV0UnCiAgICAgKiBA
cGFyYW0gc3RyaW5nICRsaW5lIHRoZSBsaW5lIHRvIGJlIHBhcnNlZAogICAgICovCiAgICBw
cm90ZWN0ZWQgZnVuY3Rpb24gcGFyc2VMaW5lKCRsaW5lKQogICAgewogICAgICAgICR0aGlz
LT5ycnVsZSA9ICRsaW5lOwoKICAgICAgICAvL3NwbGl0IHVwIHRoZSBwcm9wZXJ0aWVzCiAg
ICAgICAgJHJlY3VyUHJvcGVydGllcyA9IGV4cGxvZGUoJzsnLCAkbGluZSk7CiAgICAgICAg
JHJlY3VyID0gYXJyYXkoKTsKCiAgICAgICAgLy9sb29wIHRocm91Z2ggdGhlIHByb3BlcnRp
ZXMgaW4gdGhlIGxpbmUgYW5kIHNldCB0aGVpciBhc3NvY2lhdGVkCiAgICAgICAgLy9tZW1i
ZXIgdmFyaWFibGVzCiAgICAgICAgZm9yZWFjaCAoJHJlY3VyUHJvcGVydGllcyBhcyAkcHJv
cGVydHkpIHsKICAgICAgICAgICAgJG5hbWVBbmRWYWx1ZSA9IGV4cGxvZGUoJz0nLCAkcHJv
cGVydHkpOwoKICAgICAgICAgICAgLy9uZWVkIHRoZSBsb3dlci1jYXNlIG5hbWUgZm9yIHNl
dHRpbmcgdGhlIG1lbWJlciB2YXJpYWJsZQogICAgICAgICAgICAkcHJvcGVydHlOYW1lID0g
c3RydG9sb3dlcigkbmFtZUFuZFZhbHVlWzBdKTsKICAgICAgICAgICAgJHByb3BlcnR5VmFs
dWUgPSAkbmFtZUFuZFZhbHVlWzFdOwoKICAgICAgICAgICAgLy9zcGxpdCB1cCB0aGUgbGlz
dCBvZiB2YWx1ZXMgaW50byBhbiBhcnJheSAoaWYgaXQncyBhIGxpc3QpCiAgICAgICAgICAg
IGlmIChpbl9hcnJheSgkcHJvcGVydHlOYW1lLCAkdGhpcy0+bGlzdFByb3BlcnRpZXMpKSB7
CiAgICAgICAgICAgICAgICAkcHJvcGVydHlWYWx1ZSA9IGV4cGxvZGUoJywnLCAkcHJvcGVy
dHlWYWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJHRoaXMtPiRwcm9wZXJ0eU5h
bWUgPSAkcHJvcGVydHlWYWx1ZTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBT
ZXQgdGhlICR1bnRpbCBtZW1iZXIKICAgICAqIEBwYXJhbSBtaXhlZCB0aW1lc3RhbXAgKGlu
dCkgLyBWYWxpZCBEYXRlVGltZSBmb3JtYXQgKHN0cmluZykKICAgICAqLwogICAgcHVibGlj
IGZ1bmN0aW9uIHNldFVudGlsKCR0cykKICAgIHsKICAgICAgICBpZiAoIGlzX2ludCgkdHMp
ICkKICAgICAgICAgICAgJGR0ID0gbmV3IERhdGVUaW1lKCdAJy4kdHMpOwogICAgICAgIGVs
c2UKICAgICAgICAgICAgJGR0ID0gbmV3IERhdGVUaW1lKCR0cyk7CiAgICAgICAgJHRoaXMt
PnVudGlsID0gJGR0LT5mb3JtYXQoJ1ltZFxUSGlzTycpOwogICAgfQoKICAgIC8qKgogICAg
ICogUmV0cmlldmVzIHRoZSBkZXNpcmVkIG1lbWJlciB2YXJpYWJsZSBhbmQgcmV0dXJucyBp
dCAoaWYgaXQncyBzZXQpCiAgICAgKiBAcGFyYW0gIHN0cmluZyAkbWVtYmVyIG5hbWUgb2Yg
dGhlIG1lbWJlciB2YXJpYWJsZQogICAgICogQHJldHVybiBtaXhlZCAgdGhlIHZhcmlhYmxl
IHZhbHVlIChpZiBzZXQpLCBmYWxzZSBvdGhlcndpc2UKICAgICAqLwogICAgcHJvdGVjdGVk
IGZ1bmN0aW9uIGdldE1lbWJlcigkbWVtYmVyKQogICAgewogICAgICAgIGlmIChpc3NldCgk
dGhpcy0+JG1lbWJlcikpIHsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT4kbWVtYmVyOwog
ICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICog
UmV0dXJucyB0aGUgZnJlcXVlbmN5IC0gY29ycmVzcG9uZHMgdG8gRlJFUSBpbiBSRkMgMjQ0
NS4KICAgICAqIEByZXR1cm4gbWl4ZWQgc3RyaW5nIGlmIHRoZSBtZW1iZXIgaGFzIGJlZW4g
c2V0LCBmYWxzZSBvdGhlcndpc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldEZy
ZXEoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+Z2V0TWVtYmVyKCdmcmVxJyk7CiAg
ICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHdoZW4gdGhlIGV2ZW50IHdpbGwgZ28gdW50
aWwgLSBjb3JyZXNwb25kcyB0byBVTlRJTCBpbiBSRkMgMjQ0NS4KICAgICAqIEByZXR1cm4g
bWl4ZWQgc3RyaW5nIGlmIHRoZSBtZW1iZXIgaGFzIGJlZW4gc2V0LCBmYWxzZSBvdGhlcndp
c2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldFVudGlsKCkKICAgIHsKICAgICAg
ICByZXR1cm4gJHRoaXMtPmdldE1lbWJlcigndW50aWwnKTsKICAgIH0KCiAgICAvKioKICAg
ICAqIFJldHVybnMgdGhlIGNvdW50IG9mIHRoZSB0aW1lcyB0aGUgZXZlbnQgd2lsbCBvY2N1
ciAoc2hvdWxkIG9ubHkgYXBwZWFyIGlmICd1bnRpbCcKICAgICAqIGRvZXMgbm90IGFwcGVh
cikgLSBjb3JyZXNwb25kcyB0byBDT1VOVCBpbiBSRkMgMjQ0NS4KICAgICAqIEByZXR1cm4g
bWl4ZWQgc3RyaW5nIGlmIHRoZSBtZW1iZXIgaGFzIGJlZW4gc2V0LCBmYWxzZSBvdGhlcndp
c2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldENvdW50KCkKICAgIHsKICAgICAg
ICByZXR1cm4gJHRoaXMtPmdldE1lbWJlcignY291bnQnKTsKICAgIH0KCiAgICAvKioKICAg
ICAqIFJldHVybnMgdGhlIGludGVydmFsIC0gY29ycmVzcG9uZHMgdG8gSU5URVJWQUwgaW4g
UkZDIDI0NDUuCiAgICAgKiBAcmV0dXJuIG1peGVkIHN0cmluZyBpZiB0aGUgbWVtYmVyIGhh
cyBiZWVuIHNldCwgZmFsc2Ugb3RoZXJ3aXNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlv
biBnZXRJbnRlcnZhbCgpCiAgICB7CiAgICAgICAgcmV0dXJuICR0aGlzLT5nZXRNZW1iZXIo
J2ludGVydmFsJyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBieXNlY29u
ZCBwYXJ0IG9mIHRoZSBldmVudCAtIGNvcnJlc3BvbmRzIHRvIEJZU0VDT05EIGluIFJGQyAy
NDQ1LgogICAgICogQHJldHVybiBtaXhlZCBzdHJpbmcgaWYgdGhlIG1lbWJlciBoYXMgYmVl
biBzZXQsIGZhbHNlIG90aGVyd2lzZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0
QnlTZWNvbmQoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+Z2V0TWVtYmVyKCdieXNl
Y29uZCcpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgYnltaW51dGUgaW5m
b3JtYXRpb24gZm9yIHRoZSBldmVudCAtIGNvcnJlc3BvbmRzIHRvIEJZTUlOVVRFIGluIFJG
QyAyNDQ1LgogICAgICogQHJldHVybiBtaXhlZCBzdHJpbmcgaWYgdGhlIG1lbWJlciBoYXMg
YmVlbiBzZXQsIGZhbHNlIG90aGVyd2lzZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24g
Z2V0QnlNaW51dGUoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+Z2V0TWVtYmVyKCdi
eW1pbnV0ZScpOwogICAgfQoKICAgIC8qKgogICAgICogQ29ycmVzcG9uZHMgdG8gQllIT1VS
IGluIFJGQyAyNDQ1LgogICAgICogQHJldHVybiBtaXhlZCBzdHJpbmcgaWYgdGhlIG1lbWJl
ciBoYXMgYmVlbiBzZXQsIGZhbHNlIG90aGVyd2lzZQogICAgICovCiAgICBwdWJsaWMgZnVu
Y3Rpb24gZ2V0QnlIb3VyKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmdldE1lbWJl
cignYnlob3VyJyk7CiAgICB9CgogICAgLyoqCiAgICAgKkNvcnJlc3BvbmRzIHRvIEJZREFZ
IGluIFJGQyAyNDQ1LgogICAgICogQHJldHVybiBtaXhlZCBzdHJpbmcgaWYgdGhlIG1lbWJl
ciBoYXMgYmVlbiBzZXQsIGZhbHNlIG90aGVyd2lzZQogICAgICovCiAgICBwdWJsaWMgZnVu
Y3Rpb24gZ2V0QnlEYXkoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+Z2V0TWVtYmVy
KCdieWRheScpOwogICAgfQoKICAgIC8qKgogICAgICogQ29ycmVzcG9uZHMgdG8gQllNT05U
SERBWSBpbiBSRkMgMjQ0NS4KICAgICAqIEByZXR1cm4gbWl4ZWQgc3RyaW5nIGlmIHRoZSBt
ZW1iZXIgaGFzIGJlZW4gc2V0LCBmYWxzZSBvdGhlcndpc2UKICAgICAqLwogICAgcHVibGlj
IGZ1bmN0aW9uIGdldEJ5TW9udGhEYXkoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+
Z2V0TWVtYmVyKCdieW1vbnRoZGF5Jyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb3JyZXNw
b25kcyB0byBCWVlFQVJEQVkgaW4gUkZDIDI0NDUuCiAgICAgKiBAcmV0dXJuIG1peGVkIHN0
cmluZyBpZiB0aGUgbWVtYmVyIGhhcyBiZWVuIHNldCwgZmFsc2Ugb3RoZXJ3aXNlCiAgICAg
Ki8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRCeVllYXJEYXkoKQogICAgewogICAgICAgIHJl
dHVybiAkdGhpcy0+Z2V0TWVtYmVyKCdieXllYXJkYXknKTsKICAgIH0KCiAgICAvKioKICAg
ICAqIENvcnJlc3BvbmRzIHRvIEJZV0VFS05PIGluIFJGQyAyNDQ1LgogICAgICogQHJldHVy
biBtaXhlZCBzdHJpbmcgaWYgdGhlIG1lbWJlciBoYXMgYmVlbiBzZXQsIGZhbHNlIG90aGVy
d2lzZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0QnlXZWVrTm8oKQogICAgewog
ICAgICAgIHJldHVybiAkdGhpcy0+Z2V0TWVtYmVyKCdieXdlZWtubycpOwogICAgfQoKICAg
IC8qKgogICAgICogQ29ycmVzcG9uZHMgdG8gQllNT05USCBpbiBSRkMgMjQ0NS4KICAgICAq
IEByZXR1cm4gbWl4ZWQgc3RyaW5nIGlmIHRoZSBtZW1iZXIgaGFzIGJlZW4gc2V0LCBmYWxz
ZSBvdGhlcndpc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldEJ5TW9udGgoKQog
ICAgewogICAgICAgIHJldHVybiAkdGhpcy0+Z2V0TWVtYmVyKCdieW1vbnRoJyk7CiAgICB9
CgogICAgLyoqCiAgICAgKiBDb3JyZXNwb25kcyB0byBCWVNFVFBPUyBpbiBSRkMgMjQ0NS4K
ICAgICAqIEByZXR1cm4gbWl4ZWQgc3RyaW5nIGlmIHRoZSBtZW1iZXIgaGFzIGJlZW4gc2V0
LCBmYWxzZSBvdGhlcndpc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldEJ5U2V0
UG9zKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmdldE1lbWJlcignYnlzZXRwb3Mn
KTsKICAgIH0KCiAgICAvKioKICAgICAqIENvcnJlc3BvbmRzIHRvIFdLU1QgaW4gUkZDIDI0
NDUuCiAgICAgKiBAcmV0dXJuIG1peGVkIHN0cmluZyBpZiB0aGUgbWVtYmVyIGhhcyBiZWVu
IHNldCwgZmFsc2Ugb3RoZXJ3aXNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRX
a3N0KCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmdldE1lbWJlcignd2tzdCcpOwog
ICAgfQp9CgovLyBuYW1lc3BhY2UgVEtyXElDYWw7CgovL3VzZSBBcnJheUl0ZXJhdG9yOwov
L3VzZSBcSXRlcmF0b3JBZ2dyZWdhdGU7CgovKioKICogVGhlIHdyYXBwZXIgZm9yIHRoZSBt
YWluIHZjYWxlbmRhciBkYXRhLiBVc2VkIGluc3RlYWQgb2YgQXJyYXlPYmplY3QKICogc28g
eW91IGNhbiBlYXNpbHkgcXVlcnkgZm9yIHRpdGxlIGFuZCBkZXNjcmlwdGlvbi4KICogRXhw
b3NlcyBhIGl0ZXJhdG9yIHRoYXQgd2lsbCBsb29wIHRob3VnaCBhbGwgdGhlIGRhdGEKICoK
ICogQGF1dGhvciBNb3J0ZW4gRmFuZ2VsIChDKSAyMDA4CiAqIEBhdXRob3IgTWljaGFlbCBL
YWhuIChDKSAyMDEzCiAqIEBsaWNlbnNlIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xp
Y2Vuc2VzL2J5LXNhLzIuNS9kay9kZWVkLmVuX0dCIENDLUJZLVNBLURLCiAqLwpjbGFzcyBW
Q2FsZW5kYXIgaW1wbGVtZW50cyBJdGVyYXRvckFnZ3JlZ2F0ZQp7CiAgICBwcm90ZWN0ZWQg
JGRhdGE7CgogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgbmV3IGludG91Y2hcaWNhbFxWQ2Fs
ZW5kYXIuCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkZGF0YSkK
ICAgIHsKICAgICAgICAkdGhpcy0+ZGF0YSA9ICRkYXRhOwogICAgfQoKICAgIC8qKgogICAg
ICogUmV0dXJucyB0aGUgdGl0bGUgb2YgdGhlIGNhbGVuZGFyLiBJZiBubyB0aXRsZSBpcyBr
bm93biwgTlVMTAogICAgICogd2lsbCBiZSByZXR1cm5lZAogICAgICogQHJldHVybiBzdHJp
bmcKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldFRpdGxlKCkKICAgIHsKICAgICAg
ICBpZiAoIGlzc2V0KCR0aGlzLT5kYXRhWyd4LXdyLWNhbG5hbWUnXSkgKSB7CiAgICAgICAg
ICAgIHJldHVybiAkdGhpcy0+ZGF0YVsneC13ci1jYWxuYW1lJ107CiAgICAgICAgfSBlbHNl
IHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgog
ICAgICogUmV0dXJucyB0aGUgZGVzY3JpcHRpb24gb2YgdGhlIGNhbGVuZGFyLiBJZiBubyBk
ZXNjcmlwdGlvbiBpcwogICAgICoga25vd24sIE5VTEwgd2lsbCBiZSByZXR1cm5lZC4KICAg
ICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXREZXNj
cmlwdGlvbigpCiAgICB7CiAgICAgICAgaWYgKCBpc3NldCgkdGhpcy0+ZGF0YVsneC13ci1j
YWxkZXNjJ10pICkgewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmRhdGFbJ3gtd3ItY2Fs
ZGVzYyddOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAg
ICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEBzZWUgSXRlcmF0b3JBZ2dyZWdhdGUuZ2V0
SXRlcmF0b3IoKQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0SXRlcmF0b3IoKQog
ICAgewogICAgICAgIHJldHVybiBuZXcgQXJyYXlJdGVyYXRvcigkdGhpcy0+ZGF0YSk7CiAg
ICB9Cn0KCi8vIG5hbWVzcGFjZSBUS3JcSUNhbDsKCi8qKgogKiBUaGUgd3JhcHBlciBmb3Ig
dmV2ZW50cy4gV2lsbCByZXZlYWwgYSB1bmlmaWVkIGFuZCBzaW1wbGUgYXBpIGZvcgogKiB0
aGUgZXZlbnRzLCB3aGljaCBpbmNsdWRlIGFsd2F5cyBmaW5kaW5nIGEgc3RhcnQgYW5kIGVu
ZCAoZXhjZXB0CiAqIHdoZW4gbm8gZW5kIG9yIGR1cmF0aW9uIGlzIGdpdmVuKSBhbmQgY2hl
Y2tpbmcgaWYgdGhlIGV2ZW50IGlzCiAqIGJsb2NraW5nIG9yIHNpbWlsYXIuCiAqCiAqIFdp
bGwgYXBwbHkgdGhlIHNwZWNpZmllZCB0aW1lem9uZSB0byB0aW1lc3RhbXBzIGlmIGEgdHpp
ZCBpcwogKiBzcGVjaWZpZWQKICoKICogQGF1dGhvciBNb3J0ZW4gRmFuZ2VsIChDKSAyMDA4
CiAqIEBhdXRob3IgTWljaGFlbCBLYWhuIChDKSAyMDEzCiAqIEBsaWNlbnNlIGh0dHA6Ly9j
cmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LXNhLzIuNS9kay9kZWVkLmVuX0dCIEND
LUJZLVNBLURLCiAqLwpjbGFzcyBWRXZlbnQKewogICAgY29uc3QgREVGQVVMVF9DT05GSVJN
RUQgPSB0cnVlOwoKICAgIHByb3RlY3RlZCAkdWlkOwoKICAgIHByb3RlY3RlZCAkc3RhcnQ7
CiAgICBwcm90ZWN0ZWQgJGVuZDsKCiAgICBwcm90ZWN0ZWQgJHN1bW1hcnk7CiAgICBwcm90
ZWN0ZWQgJGRlc2NyaXB0aW9uOwogICAgcHJvdGVjdGVkICRsb2NhdGlvbjsKCiAgICBwcm90
ZWN0ZWQgJGxhc3RzdGFydDsKICAgIHByb3RlY3RlZCAkbGFzdGVuZDsKCiAgICBwdWJsaWMg
JHJlY3VycmVuY2U7IC8vUlJVTEUKICAgIHB1YmxpYyAkcmVjdXJleDsgICAgLy9FWFJVTEUK
ICAgIHB1YmxpYyAkZXhjbHVkZWQ7ICAgLy9FWERBVEUocykKICAgIHB1YmxpYyAkYWRkZWQ7
ICAgICAgLy9SREFURShzKQoKICAgIHB1YmxpYyAkZnJlcTsgLy9nZXRGcmVxdWVuY3koKSBp
bnRvdWNoXGljYWxcRnJlcQoKICAgIHB1YmxpYyAkZGF0YTsKCiAgICAvKioKICAgICAqIENv
bnN0cnVjdHMgYSBuZXcgaW50b3VjaFxpY2FsXFZFdmVudC4gTmVlZHMgdGhlIElDYWwKICAg
ICAqIHN1cHBsaWVkIHNvIGl0IGNhbiBxdWVyeSBmb3IgdGltZXpvbmVzLgogICAgICogQHBh
cmFtIExpbmVbXSAkZGF0YQogICAgICogQHBhcmFtIElDYWwgICAkaWNhbAogICAgICovCiAg
ICBwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGRhdGEsIElDYWwgJGljYWwsICR5ZWFy
c0xpbWl0ID0gMykKICAgIHsKICAgICAgICBpZiAoIGlzc2V0KCRkYXRhWyd1aWQnXSkgKSB7
CiAgICAgICAgICAgICR0aGlzLT51aWQgPSAkZGF0YVsndWlkJ10tPmdldERhdGEoKTsKICAg
ICAgICAgICAgdW5zZXQoJGRhdGFbJ3VpZCddKTsKICAgICAgICB9CgogICAgICAgIGlmICgg
aXNzZXQoJGRhdGFbJ3JydWxlJ10pICkgewogICAgICAgICAgICAkdGhpcy0+cmVjdXJyZW5j
ZSA9IG5ldyBSZWN1cnJlbmNlKCRkYXRhWydycnVsZSddKTsKICAgICAgICAgICAgdW5zZXQo
JGRhdGFbJ3JydWxlJ10pOwogICAgICAgIH0KCiAgICAgICAgaWYgKCBpc3NldCgkZGF0YVsn
ZXhydWxlJ10pICkgewogICAgICAgICAgICAkdGhpcy0+cmVjdXJleCA9IG5ldyBSZWN1cnJl
bmNlKCRkYXRhWydleHJ1bGUnXSk7CiAgICAgICAgICAgIHVuc2V0KCRkYXRhWydleHJ1bGUn
XSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIGlzc2V0KCRkYXRhWydkdHN0YXJ0J10pICkg
ewogICAgICAgICAgICAkdGhpcy0+c3RhcnQgPSAkdGhpcy0+Z2V0VGltZXN0YW1wKCRkYXRh
WydkdHN0YXJ0J10sICRpY2FsKTsKICAgICAgICAgICAgdW5zZXQoJGRhdGFbJ2R0c3RhcnQn
XSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIGlzc2V0KCRkYXRhWydkdGVuZCddKSApIHsK
ICAgICAgICAgICAgJHRoaXMtPmVuZCA9ICR0aGlzLT5nZXRUaW1lc3RhbXAoJGRhdGFbJ2R0
ZW5kJ10sICRpY2FsKTsKICAgICAgICAgICAgdW5zZXQoJGRhdGFbJ2R0ZW5kJ10pOwogICAg
ICAgIH0gZWxzZWlmICggaXNzZXQoJGRhdGFbJ2R1cmF0aW9uJ10pICkgewogICAgICAgICAg
ICAkZHVyID0gbmV3IER1cmF0aW9uKCAkZGF0YVsnZHVyYXRpb24nXS0+Z2V0RGF0YSgpICk7
CiAgICAgICAgICAgICR0aGlzLT5lbmQgPSAkdGhpcy0+c3RhcnQgKyAkZHVyLT5nZXREdXJh
dGlvbigpOwogICAgICAgICAgICB1bnNldCgkZGF0YVsnZHVyYXRpb24nXSk7CiAgICAgICAg
fQoKICAgICAgICAvL2dvb2dsZSBjYWwgc2V0IGR0ZW5kIGFzIGVuZCBvZiBpbml0aWFsIGV2
ZW50IChkdXJhdGlvbikKICAgICAgICBpZiAoIGlzc2V0KCR0aGlzLT5yZWN1cnJlbmNlKSAp
IHsKICAgICAgICAgICAgLy9pZiB0aGVyZSBpcyBhIHJlY3VycmVuY2UgcnVsZQoKICAgICAg
ICAgICAgLy9leGNsdXNpb25zCiAgICAgICAgICAgIGlmICggaXNzZXQoJGRhdGFbJ2V4ZGF0
ZSddKSApIHsKICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRkYXRhWydleGRhdGUnXSBhcyAk
ZXhkYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJGV4ZGF0ZS0+Z2V0RGF0
YUFzQXJyYXkoKSBhcyAkdHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmV4
Y2x1ZGVkW10gPSBzdHJ0b3RpbWUoJHRzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAg
ICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB1bnNldCgkZGF0YVsnZXhkYXRlJ10pOwog
ICAgICAgICAgICB9CiAgICAgICAgICAgIC8vYWRkaXRpb25zCiAgICAgICAgICAgIGlmICgg
aXNzZXQoJGRhdGFbJ3JkYXRlJ10pICkgewogICAgICAgICAgICAgICAgZm9yZWFjaCAoJGRh
dGFbJ3JkYXRlJ10gYXMgJHJkYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAo
JHJkYXRlLT5nZXREYXRhQXNBcnJheSgpIGFzICR0cykgewogICAgICAgICAgICAgICAgICAg
ICAgICAkdGhpcy0+YWRkZWRbXSA9IHN0cnRvdGltZSgkdHMpOwogICAgICAgICAgICAgICAg
ICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHVuc2V0KCRkYXRhWydy
ZGF0ZSddKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHVudGlsID0gJHRoaXMtPnJl
Y3VycmVuY2UtPmdldFVudGlsKCk7CiAgICAgICAgICAgICRjb3VudCA9ICR0aGlzLT5yZWN1
cnJlbmNlLT5nZXRDb3VudCgpOwogICAgICAgICAgICAvL2NoZWNrIGlmIHRoZXJlIGlzIGVp
dGhlciAndW50aWwnIG9yICdjb3VudCcgc2V0CiAgICAgICAgICAgIGlmICgkdW50aWwpIHsK
ICAgICAgICAgICAgICAgIC8vb2suLgogICAgICAgICAgICB9IGVsc2VpZiAoJGNvdW50KSB7
CiAgICAgICAgICAgICAgICAvL2lmIGNvdW50IGlzIHNldCwgdGhlbiBmaWd1cmUgb3V0IHRo
ZSBsYXN0IG9jY3VycmVuY2UgYW5kIHNldCB0aGF0IGFzIHRoZSBlbmQgZGF0ZQogICAgICAg
ICAgICAgICAgJHRoaXMtPmdldEZyZXF1ZW5jeSgpOwogICAgICAgICAgICAgICAgJHVudGls
ID0gJHRoaXMtPmZyZXEtPmxhc3RPY2N1cnJlbmNlKCR0aGlzLT5zdGFydCk7CiAgICAgICAg
ICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvL2ZvcmV2ZXIuLi4gbGltaXQgdG8gMyB5
ZWFycwogICAgICAgICAgICAgICAgJHRoaXMtPnJlY3VycmVuY2UtPnNldFVudGlsKCcrJyAu
ICR5ZWFyc0xpbWl0IC4nIHllYXJzJyk7CiAgICAgICAgICAgICAgICAkdW50aWwgPSAkdGhp
cy0+cmVjdXJyZW5jZS0+Z2V0VW50aWwoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAv
L2RhdGVfZGVmYXVsdF90aW1lem9uZV9zZXQoIHh4ICkgbmVlZGVkID87CiAgICAgICAgICAg
ICR0aGlzLT5sYXN0c3RhcnQgPSBzdHJ0b3RpbWUoJHVudGlsKTsKICAgICAgICAgICAgJHRo
aXMtPmxhc3RlbmQgPSAkdGhpcy0+bGFzdHN0YXJ0ICsgJHRoaXMtPmdldER1cmF0aW9uKCk7
CiAgICAgICAgfQoKICAgICAgICAkaW1wb3J0cyA9IGFycmF5KCdzdW1tYXJ5JywnZGVzY3Jp
cHRpb24nLCdsb2NhdGlvbicpOwogICAgICAgIGZvcmVhY2ggKCRpbXBvcnRzIEFTICRpbXBv
cnQpIHsKICAgICAgICAgICAgaWYgKCBpc3NldCgkZGF0YVskaW1wb3J0XSkgKSB7CiAgICAg
ICAgICAgICAgICAkdGhpcy0+JGltcG9ydCA9ICRkYXRhWyRpbXBvcnRdLT5nZXREYXRhKCk7
CiAgICAgICAgICAgICAgICB1bnNldCgkZGF0YVskaW1wb3J0XSk7CiAgICAgICAgICAgIH0K
ICAgICAgICB9CgogICAgICAgIGlmICggaXNzZXQoJHRoaXMtPnByZXZpb3VzX3R6KSApIHsK
ICAgICAgICAgICAgZGF0ZV9kZWZhdWx0X3RpbWV6b25lX3NldCgkdGhpcy0+cHJldmlvdXNf
dHopOwogICAgICAgIH0KICAgICAgICAkdGhpcy0+ZGF0YSA9IExpbmU6OlJlbW92ZV9MaW5l
KCRkYXRhKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIEV2ZW50IE9jY3Vy
cmVuY2VzIEl0ZXJhdG9yIChpZiByZWN1cnJlbmNlIHNldCkKICAgICAqIEByZXR1cm4gaW50
b3VjaFxpY2FsXEZyZXEKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldEZyZXF1ZW5j
eSgkdW50aWwgPSBudWxsKQogICAgewogICAgICAgIGlmICghIGlzc2V0KCR0aGlzLT5mcmVx
KSkgewogICAgICAgICAgICBpZiAoIGlzc2V0KCR0aGlzLT5yZWN1cnJlbmNlKSApIHsKICAg
ICAgICAgICAgICAgICR0aGlzLT5mcmVxID0gbmV3IEZyZXEoJHRoaXMtPnJlY3VycmVuY2Us
ICR0aGlzLT5zdGFydCwgJHRoaXMtPmV4Y2x1ZGVkLCAkdGhpcy0+YWRkZWQsICR1bnRpbCk7
CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiAkdGhpcy0+ZnJlcTsK
ICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIFVJRCBvZiB0aGUgZXZlbnQKICAg
ICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRVSUQo
KQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+dWlkOwogICAgfQoKICAgIC8qKgogICAg
ICogUmV0dXJucyB0aGUgc3VtbWFyeSAob3IgbnVsbCBpZiBub25lIGlzIGdpdmVuKSBvZiB0
aGUgZXZlbnQKICAgICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBmdW5j
dGlvbiBnZXRTdW1tYXJ5KCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPnN1bW1hcnk7
CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBkZXNjcmlwdGlvbiAob3IgbnVs
bCBpZiBub25lIGlzIGdpdmVuKSBvZiB0aGUgZXZlbnQKICAgICAqIEByZXR1cm4gc3RyaW5n
CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXREZXNjcmlwdGlvbigpCiAgICB7CiAg
ICAgICAgcmV0dXJuICR0aGlzLT5kZXNjcmlwdGlvbjsKICAgIH0KCiAgICAvKioKICAgICAq
IFJldHVybnMgdGhlIGxvY2F0aW9uIChvciBudWxsIGlmIG5vbmUgaXMgZ2l2ZW4pIG9mIHRo
ZSBldmVudAogICAgICogQHJldHVybiBzdHJpbmcKICAgICAqLwogICAgcHVibGljIGZ1bmN0
aW9uIGdldExvY2F0aW9uKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmxvY2F0aW9u
OwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBldmVudCBpcyBi
bG9ja2luZyAoaWUgbm90IHRyYW5zcGFyZW50KQogICAgICogQHJldHVybiBib29sCiAgICAg
Ki8KICAgIHB1YmxpYyBmdW5jdGlvbiBpc0Jsb2NraW5nKCkKICAgIHsKICAgICAgICByZXR1
cm4gIShpc3NldCgkdGhpcy0+ZGF0YVsndHJhbnNwJ10pICYmICR0aGlzLT5kYXRhWyd0cmFu
c3AnXSA9PSAnVFJBTlNQQVJFTlQnKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMg
dHJ1ZSBpZiB0aGUgZXZlbnQgaXMgY29uZmlybWVkCiAgICAgKiBAcmV0dXJuIGJvb2wKICAg
ICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGlzQ29uZmlybWVkKCkKICAgIHsKICAgICAgICBp
ZiAoICFpc3NldCgkdGhpcy0+ZGF0YVsnc3RhdHVzJ10pICkgewogICAgICAgICAgICByZXR1
cm4gc2VsZjo6REVGQVVMVF9DT05GSVJNRUQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg
ICAgcmV0dXJuICR0aGlzLT5kYXRhWydzdGF0dXMnXSA9PSAnQ09ORklSTUVEJzsKICAgICAg
ICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgZHVyYXRpb24gaXMg
bXVsdGlwbGUgb2YgODY0MDAKICAgICAqIEByZXR1cm4gYm9vbAogICAgICovCiAgICBwdWJs
aWMgZnVuY3Rpb24gaXNXaG9sZURheSgpCiAgICB7CiAgICAgICAgaWYgKGlzc2V0KCR0aGlz
LT5kYXRhWyd4LW1pY3Jvc29mdC1jZG8tYWxsZGF5ZXZlbnQnXSkgJiYKICAgICAgICAgICAg
c3RydG9sb3dlcigkdGhpcy0+ZGF0YVsneC1taWNyb3NvZnQtY2RvLWFsbGRheWV2ZW50J10p
ID09PSAndHJ1ZScpIHsKICAgICAgICAgICAgJHJlc3VsdCA9IHRydWU7CiAgICAgICAgfSBl
bHNlIHsKICAgICAgICAgICAgJGR1ciA9ICR0aGlzLT5nZXREdXJhdGlvbigpOwogICAgICAg
ICAgICBpZiAoJGR1ciA+IDAgJiYgKCRkdXIgJSA4NjQwMCkgPT0gMCkgewogICAgICAgICAg
ICAgICAgJHJlc3VsdCA9IHRydWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAg
ICAgICAkcmVzdWx0ID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAg
cmV0dXJuICRyZXN1bHQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSB0aW1l
c3RhbXAgZm9yIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGV2ZW50CiAgICAgKiBAcmV0dXJuIGlu
dAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0U3RhcnQoKQogICAgewogICAgICAg
IHJldHVybiAkdGhpcy0+c3RhcnQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRo
ZSB0aW1lc3RhbXAgZm9yIHRoZSBlbmQgb2YgdGhlIGV2ZW50CiAgICAgKiBAcmV0dXJuIGlu
dAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0RW5kKCkKICAgIHsKICAgICAgICBy
ZXR1cm4gJHRoaXMtPmVuZDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIHRp
bWVzdGFtcCBmb3IgdGhlIGVuZCBvZiB0aGUgbGFzdCBldmVudAogICAgICogQHJldHVybiBp
bnQKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldFJhbmdlRW5kKCkKICAgIHsKICAg
ICAgICByZXR1cm4gbWF4KCR0aGlzLT5lbmQsJHRoaXMtPmxhc3RlbmQpOwogICAgfQoKICAg
IC8qKgogICAgICogUmV0dXJucyB0aGUgZHVyYXRpb24gb2YgdGhpcyBldmVudCBpbiBzZWNv
bmRzCiAgICAgKiBAcmV0dXJuIGludAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0
RHVyYXRpb24oKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+ZW5kIC0gJHRoaXMtPnN0
YXJ0OwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgZ2l2ZW4gcHJvcGVydHkg
b2YgdGhlIGV2ZW50LgogICAgICogQHBhcmFtICBzdHJpbmcgJHByb3AKICAgICAqIEByZXR1
cm4gc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRQcm9wZXJ0eSggJHBy
b3AgKQogICAgewogICAgICAgIGlmICggaXNzZXQoJHRoaXMtPiRwcm9wKSApIHsKICAgICAg
ICAgICAgcmV0dXJuICR0aGlzLT4kcHJvcDsKICAgICAgICB9IGVsc2VpZiAoIGlzc2V0KCR0
aGlzLT5kYXRhWyRwcm9wXSkgKSB7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+ZGF0YVsk
cHJvcF07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAg
ICAgfQogICAgfQoKICAgIC8qKgogICAgICogU2V0IGRlZmF1bHQgdGltZXpvbmUgKHRlbXBv
cmFyeSkgdG8gZ2V0IHRpbWVzdGFtcHMKICAgICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8K
ICAgIHByb3RlY3RlZCBmdW5jdGlvbiBzZXRMaW5lVGltZVpvbmUoIExpbmUgJGxpbmUgKQog
ICAgewogICAgICAgIGlmICggaXNzZXQoJGxpbmVbJ3R6aWQnXSkgKSB7CiAgICAgICAgICAg
IGlmICghaXNzZXQoJHRoaXMtPnByZXZpb3VzX3R6KSkgewogICAgICAgICAgICAgICAgJHRo
aXMtPnByZXZpb3VzX3R6ID0gQCBkYXRlX2RlZmF1bHRfdGltZXpvbmVfZ2V0KCk7CiAgICAg
ICAgICAgIH0KICAgICAgICAgICAgJHRoaXMtPnR6aWQgPSAkbGluZVsndHppZCddOwogICAg
ICAgICAgICBkYXRlX2RlZmF1bHRfdGltZXpvbmVfc2V0KCR0aGlzLT50emlkKTsKCiAgICAg
ICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwog
ICAgfQoKICAgIC8qKgogICAgICogQ2FsY3VsYXRlcyB0aGUgdGltZXN0YW1wIGZyb20gYSBE
VCBsaW5lLgogICAgICogQHBhcmFtICRsaW5lIExpbmUKICAgICAqIEByZXR1cm4gaW50CiAg
ICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBnZXRUaW1lc3RhbXAoIExpbmUgJGxpbmUs
IElDYWwgJGljYWwgKQogICAgewogICAgICAgIGlmICggaXNzZXQoJGxpbmVbJ3R6aWQnXSkg
KSB7CiAgICAgICAgICAgICR0aGlzLT5zZXRMaW5lVGltZVpvbmUoJGxpbmUpOwogICAgICAg
ICAgICAvLyR0eiA9ICRpY2FsLT5nZXRUaW1lWm9uZUluZm8oJGxpbmVbJ3R6aWQnXSk7CiAg
ICAgICAgICAgIC8vJG9mZnNldCA9ICR0ei0+Z2V0T2Zmc2V0KCR0cyk7CiAgICAgICAgICAg
IC8vJHRzID0gc3RydG90aW1lKGRhdGUoJ0QsIGQgTSBZIEg6aTpzJywgJHRzKSAuICcgJyAu
ICRvZmZzZXQpOwogICAgICAgIH0KICAgICAgICAkdHMgPSBzdHJ0b3RpbWUoJGxpbmUtPmdl
dERhdGEoKSk7CgogICAgICAgIHJldHVybiAkdHM7CiAgICB9Cn0KCi8vIG5hbWVzcGFjZSBU
S3JcSUNhbDsKLy8gdXNlIERhdGVUaW1lOwp1c2UgRGF0ZVRpbWVab25lOwoKLyoqCiAqIFRo
ZSB3cmFwcGVyIGZvciB2dGltZXpvbmVzLiBTdG9yZXMgdGhlIHRpbWV6b25lLWlkIGFuZCB0
aGUgc2V0dXAgZm9yCiAqIGRheWxpZ2h0IHNhdmluZ3MgYW5kIHN0YW5kYXJkIHRpbWUuCiAq
CiAqIEBhdXRob3IgTW9ydGVuIEZhbmdlbCAoQykgMjAwOAogKiBAYXV0aG9yIE1pY2hhZWwg
S2FobiAoQykgMjAxMwogKiBAbGljZW5zZSBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9s
aWNlbnNlcy9ieS1zYS8yLjUvZGsvZGVlZC5lbl9HQiBDQy1CWS1TQS1ESwogKi8KY2xhc3Mg
VlRpbWVab25lCnsKICAgIHByb3RlY3RlZCAkdHppZDsKICAgIHByb3RlY3RlZCAkZGF5bGln
aHQ7CiAgICBwcm90ZWN0ZWQgJHN0YW5kYXJkOwogICAgcHJvdGVjdGVkICRjYWNoZSA9IGFy
cmF5KCk7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGludG91Y2hcaWNhbFxW
VGltZVpvbmUKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCAkZGF0
YSApCiAgICB7CiAgICAgICAgJHRoaXMtPnR6aWQgPSAkZGF0YVsndHppZCddOwogICAgICAg
ICR0aGlzLT5kYXlsaWdodCA9ICRkYXRhWydkYXlsaWdodCddOwogICAgICAgICR0aGlzLT5z
dGFuZGFyZCA9ICRkYXRhWydzdGFuZGFyZCddOwogICAgfQoKICAgIC8qKgogICAgICogUmV0
dXJucyB0aGUgdGltZXpvbmUtaWQgZm9yIHRoaXMgdGltZXpvbmUuIChVc2VkIHRvCiAgICAg
KiBkaWZmZXJlbnRpYXRlIGJldHdlZW4gZGlmZmVyZW50IHR6cyBpbiBhIGNhbGVuZGFyKQog
ICAgICogQHJldHVybiBzdHJpbmcKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldFRp
bWVab25lSWQoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+dHppZDsKICAgIH0KCiAg
ICAvKioKICAgICAqIFJldHVybnMgdGhlIGdpdmVuIG9mZnNldCBpbiB0aGlzIHRpbWV6b25l
IGZvciB0aGUgZ2l2ZW4KICAgICAqIHRpbWVzdGFtcC4gKGVnICswMjAwKQogICAgICogQHBh
cmFtICBpbnQgICAgJHRzCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwdWJs
aWMgZnVuY3Rpb24gZ2V0T2Zmc2V0KCAkdHMgKQogICAgewogICAgICAgICRhY3QgPSAkdGhp
cy0+Z2V0QWN0aXZlKCR0cyk7CgogICAgICAgIHJldHVybiAkdGhpcy0+eyRhY3R9Wyd0em9m
ZnNldHRvJ107CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSB0aW1lem9uZSBu
YW1lIGZvciB0aGUgZ2l2ZW4gdGltZXN0YW1wIChlZyBDRVNUKQogICAgICogQHBhcmFtICBp
bnQgICAgJHRzCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwdWJsaWMgZnVu
Y3Rpb24gZ2V0VGltZVpvbmVOYW1lKCR0cykKICAgIHsKICAgICAgICAkYWN0ID0gJHRoaXMt
PmdldEFjdGl2ZSgkdHMpOwoKICAgICAgICByZXR1cm4gJHRoaXMtPnskYWN0fVsndHpuYW1l
J107CiAgICB9CgogICAgLyoqCiAgICAgKiBEZXRlcm1pbmVzIHdoaWNoIG9mIHRoZSBkYXls
aWdodCBvciBzdGFuZGFyZCBpcyB0aGUgYWN0aXZlCiAgICAgKiBzZXR0aW5nLgogICAgICog
VGhlIGNhbGwgaXMgY2FjaGVkIGZvciBhIGdpdmVuIHRpbWVzdGFtcCwgc28gYSBjYWxsIHRv
CiAgICAgKiBnZXRPZmZzZXQgYW5kIGdldFRpbWVab25lTmFtZSB3aXRoIHRoZSBzYW1lIHRz
IHdvbid0IGNhbGN1bGF0ZQogICAgICogdGhlIGFuc3dlciB0d2ljZS4KICAgICAqIEBwYXJh
bSAgaW50ICAgICR0cwogICAgICogQHJldHVybiBzdHJpbmcgc3RhbmRhcmR8ZGF5bGlnaHQK
ICAgICAqLwogICAgcHJpdmF0ZSBmdW5jdGlvbiBnZXRBY3RpdmUoICR0cyApCiAgICB7CiAg
ICAgICAgaWYgKGNsYXNzX2V4aXN0cygnRGF0ZVRpbWVab25lJykpIHsKCiAgICAgICAgICAg
IC8vUEhQID49IDUuMgogICAgICAgICAgICAkdHogPSBuZXcgRGF0ZVRpbWVab25lKCAkdGhp
cy0+dHppZCApOwogICAgICAgICAgICAkZGF0ZSA9IG5ldyBEYXRlVGltZSgiQCR0cyIsICR0
eik7CgogICAgICAgICAgICByZXR1cm4gKCRkYXRlLT5mb3JtYXQoJ0knKSA9PSAxKSA/ICdk
YXlsaWdodCcgOiAnc3RhbmRhcmQnOwoKICAgICAgICB9IGVsc2UgewoKICAgICAgICAgICAg
aWYgKCBpc3NldCgkdGhpcy0+Y2FjaGVbJHRzXSkgKSB7CiAgICAgICAgICAgICAgICByZXR1
cm4gJHRoaXMtPmNhY2hlWyR0c107CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRkYXls
aWdodF9mcmVxID0gbmV3IEZyZXEoJHRoaXMtPmRheWxpZ2h0WydycnVsZSddLCBzdHJ0b3Rp
bWUoJHRoaXMtPmRheWxpZ2h0WydkdHN0YXJ0J10pKTsKICAgICAgICAgICAgJHN0YW5kYXJk
X2ZyZXEgPSBuZXcgRnJlcSgkdGhpcy0+c3RhbmRhcmRbJ3JydWxlJ10sIHN0cnRvdGltZSgk
dGhpcy0+c3RhbmRhcmRbJ2R0c3RhcnQnXSkpOwogICAgICAgICAgICAkbGFzdF9zdGFuZGFy
ZCA9ICRzdGFuZGFyZF9mcmVxLT5wcmV2aW91c09jY3VycmVuY2UoJHRzKTsKICAgICAgICAg
ICAgJGxhc3RfZHN0ID0gJGRheWxpZ2h0X2ZyZXEtPnByZXZpb3VzT2NjdXJyZW5jZSgkdHMp
OwogICAgICAgICAgICBpZiAoJGxhc3RfZHN0ID4gJGxhc3Rfc3RhbmRhcmQpIHsKICAgICAg
ICAgICAgICAgICR0aGlzLT5jYWNoZVskdHNdID0gJ2RheWxpZ2h0JzsKICAgICAgICAgICAg
fSBlbHNlIHsKICAgICAgICAgICAgICAgICR0aGlzLT5jYWNoZVskdHNdID0gJ3N0YW5kYXJk
JzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5jYWNoZVskdHNd
OwogICAgICAgIH0KICAgIH0KfQoiO3M6NDoidHlwZSI7czoxOiIwIjtzOjU6Im9yZGVyIjtz
OjE6IjUiO3M6NToiZmxhZ3MiO3M6MToiMCI7czo4OiJ0ZXh0cGFjayI7czowOiIiO3M6MTU6
ImFsbG93X2h0bWxfaGVscCI7aTowO3M6ODoiaGVscF9yYXciO3M6NjgzMDoiCmgxLiBta2Ff
aWNhbCAtIEhlbHAKCmgzLiBEaXNwbGF5IGljYWwgY2FsZW5kYXJzIGFzIGV2ZW50IGxpc3Rz
Cgpta2FfaWNhbCBpcyBhIFRleHRwYXR0ZXJuIHBsdWdpbiBmb3IgZGlzcGxheWluZyBldmVu
dHMgZnJvbSBhbiBpQ2FsIFVSTCAoZS5nLiBHb29nbGUgQ2FsZW5kYXIpIG9yIGljcyBmaWxl
IHVzaW5nIGEgc3RhbmRhcmQgb3IgdXNlci1kZWZpbmFibGUgdGVtcGxhdGUuCgpJdCdzIGFs
c28gcG9zc2libGUgdG8gc3BlY2lmeSBhIGZvbGRlciBvciBhIFRleHRwYXR0ZXJuIGNhdGVn
b3J5IGZvciBpbWFnZXMgcmVmZXJlbmNlZCBpbiB0aGUgZmVlZC4gVGhlIGltYWdlIGlzIGRy
YXduIGZyb20gdGhlIHRpdGxlIG9mIHRoZSBldmVudCBhbmQgdGhlIG5hbWUgb2YgdGhlIGlt
YWdlLgoKCmgyLiBUYWdzCgpoMy4gVGFnOiBta2FfaWNhbAoKSW5zZXJ0cyBhIHB1YmxpYyBj
YWxlbmRhciBmcm9tIGFuIGljcyB1cmwgb3IgZmlsZSwgb3IgYSBnb29nbGVtYWlsIGFjY291
bnQuIENhbiBiZSB1c2VkIGFzIGEgc3RhbmRhbG9uZSBvciBhcyBhIGNvbnRhaW5lciB0YWcu
CgpUaGUgZm9sbG93aW5nIGF0dHJpYnV0ZXMgYXJlIGF2YWlsYWJsZToKCip1cmwqIChzdHJp
bmcsIGRlZmF1bHQ6ICIiLCByZXF1aXJlZCkKVXJsIG9mIHRoZSBJQ1MgZmlsZQoKKmdvb2ds
ZW1haWwqCkdvb2dsZU1haWwgYWRkcmVzcy4gVGhlIHVzZXIncyBwdWJsaWMgZ29vZ2xlIGNh
bGVuZGFyIHdpbGwgYXV0b21hdGljYWxseSBiZSByZWZlcmVuY2VkLgoKKmxpbWl0KiAoaW50
LCBkZWZhdWx0OiBAMEAsIG9wdGlvbmFsKQpEZWZpbmVzIGhvdyBtYW55IGV2ZW50cyBhcmUg
c2hvd24uIERlZmF1bHRzIHRvIDAgKD0gYWxsKQoKKnBhc3RldmVudHMqIChib29sZWFuLCBk
ZWZhdWx0OiBARkFMU0VALCBvcHRpb25hbCkKRGlzcGxheSBwYXN0IGV2ZW50cwoKKmh0bWxf
aWQqIChzdHJpbmcsIGRlZmF1bHQ6IEBpY2FsZXZlbnRzQCwgb3B0aW9uYWwpClNldHMgdGhl
IGh0bWwgaWQgZm9yIHRoZSBldmVudCBsaXN0CgoqY2xhc3MqClNldHMgdGhlIENTUyBjbGFz
cyBmb3IgdGhlIGV2ZW50IGxpc3QKCipkZXRhaWxzKiAoYm9vbGVhbiwgZGVmYXVsdDogQFRS
VUVALCBvcHRpb25hbCkKRGlzcGxheSB0aGUgZGV0YWlscwoKKmNhY2hpbmd0aW1lKiAoaW50
LCBkZWZhdWx0OiBAMzBAIChtaW51dGVzKSwgb3B0aW9uYWwpCkR1cmF0aW9uIHRoYXQgbG9j
YWwgY2FjaGUgZmlsZSBwZXJzaXN0cwoKKmZvcm0qIChzdHJpbmcsIGRlZmF1bHQ6IG5vbmUs
IG9wdGlvbmFsKQpOYW1lIG9mIHR4cCBmb3JtIHRvIHVzZSB0byBmb3JtYXQgZWFjaCBldmVu
dCBpdGVtCgoqZm10dGltZSogKHN0cmluZywgZGVmYXVsdDogQCVIOiVNQCwgb3B0aW9uYWwp
CkZvcm1hdCBzdHJpbmcgZm9yIHRoZSB0aW1lCgoqZm10ZGF0ZSogKHN0cmluZywgZGVmYXVs
dDogQCVkLiVtLiVZQCwgb3B0aW9uYWwpCkZvcm1hdCBzdHJpbmcgZm9yIHRoZSBkYXRlCgoq
aW1nKiAoYm9vbGVhbiwgZGVmYXVsdDogQEZBTFNFQCkKRGlzcGxheSBhbiBpbWFnZSBmb3Ig
ZWFjaCBkYXRlIChyZXF1aXJlcyBmb2xsb3dpbmcgYXR0cmlidXRlcykKCippbWdmb2xkZXIq
IChzdHJpbmcsIGRlZmF1bHQ6IEBpbWFnZXNALCBvcHRpb25hbCkKSW1hZ2UgZm9sZGVyCgoq
ZGVmYXVsdGltZyogKHN0cmluZywgZGVmYXVsdDogQG5vbmUuZ2lmQCwgb3B0aW9uYWwpCkRl
ZmF1bHQgaW1hZ2UKCgpoMy4gVGFnOiBta2FfaWZfZmlyc3RfZXZlbnQKClVzZSBhcyBhIGNv
bnRhaW5lciB0YWcuIFRoZSB0YWcgd2lsbCBleGVjdXRlIHRoZSBjb250YWluZWQgc3RhdGVt
ZW50cyBpZiB0aGUgZGlzcGxheWVkIGV2ZW50IGlzIHRoZSBmaXJzdCBpbiB0aGUgY3VycmVu
dGx5IGRpc3BsYXllZCBjYWxlbmRhci4KCgpoMy4gVGFnOiBta2FfaWZfbGFzdF9ldmVudAoK
VXNlIGFzIGEgY29udGFpbmVyIHRhZy4gVGhlIHRhZyB3aWxsIGV4ZWN1dGUgdGhlIGNvbnRh
aW5lZCBzdGF0ZW1lbnRzIGlmIHRoZSBkaXNwbGF5ZWQgZXZlbnQgaXMgdGhlIGxhc3QgaW4g
dGhlIGN1cnJlbnRseSBkaXNwbGF5ZWQgY2FsZW5kYXIuCgoKaDMuIFRhZzogbWthX2Zvcm1h
dF9kYXRlCgpUaGUgQGZtdGRhdGVAIGFuZCBAZm10dGltZUAgYXR0cmlidXRlcyBvZiBAbWth
X2ljYWxAIGNvbnRyb2wgaG93IHRoZSBwbGFjZWhvbGRlcnMge3N0YXJ0X2RhdGV9LCB7ZW5k
X2RhdGV9IGFuZCB7c3RhcnRfdGltZX0gYW5kIHtlbmR0aW1lfSBhcmUgZm9ybWF0dGVkIGZv
ciB0aGUgZW50aXJlIGNhbGVuZGFyLgpVc2UgdGhpcyB0YWcgdG8gb3V0cHV0IGEgZGF0ZSB3
aXRoIGEgY3VzdG9tIGRhdGUgb3IgdGltZSBmb3JtYXQgdXNpbmcgdGhlIGRhdGUgZm9ybWF0
dGluZyBwYXJhbWV0ZXJzIG9mICJzdHJmdGltZSI6aHR0cDovL3BocC5uZXQvbWFudWFsL2Vu
L2Z1bmN0aW9uLnN0cmZ0aW1lLnBocC4KCgpoMi4gUGxhY2Vob2xkZXIgdmFyaWFibGVzCgo7
IEB7ZGF0ZX1ACjogRGF0ZSAoZm9ybWF0IGFjY29yZGluZyB0byAiZm10ZGF0ZSIgYW5kICJm
bXR0aW1lIiBhdHRyaWJ1dGVzKQo7IEB7c3RhcnRfZGF0ZXRpbWV9QAo6IFN0YXJ0IGRhdGV0
aW1lIGluIEAlWS0lbS0lZCAlSDolTUAgZm9ybWF0CjsgQHtzdGFydF9kYXRlfUAKOiBTdGFy
dCBkYXRlIChmb3JtYXQgYWNjb3JkaW5nIHRvICJmbXRkYXRlIiBhdHRyaWJ1dGUpCjsgQHtz
dGFydF90aW1lfUAKOiBTdGFydCB0aW1lIChmb3JtYXQgYWNjb3JkaW5nIHRvICJmbXR0aW1l
IiBhdHRyaWJ1dGUpCjsgQHtlbmRfZGF0ZXRpbWV9QAo6IEVuZCBkYXRldGltZSBpbiBAJVkt
JW0tJWQgJUg6JU1AIGZvcm1hdAo7IEB7ZW5kX2RhdGV9QAo6IEVuZCBkYXRlIChmb3JtYXQg
YWNjb3JkaW5nIHRvICJmbXRkYXRlIiBhdHRyaWJ1dGUpCjsgQHtlbmRfdGltZX1ACjogRW5k
IHRpbWUgKGZvcm1hdCBhY2NvcmRpbmcgdG8gImZtdHRpbWUiIGF0dHJpYnV0ZSkKOyBAe2R1
cmF0aW9ufUAKOiBEdXJhdGlvbiAoZm9ybWF0dGVkIGFzIGRheXM6aG91cnM6bWludXRlczpz
ZWNvbmRzKQo7IEB7dGl0bGV9QAo6IFRpdGxlIChpY3Mgc3VtbWFyeSBlbnRyeSkKOyBAe2Rl
c2NyaXB0aW9ufUAKOiBEZXNjcmlwdGlvbgo7IEB7bG9jYXRpb259QAo6IExvY2F0aW9uL3Zl
bnVlCjsgQHt1aWR9QAo6IEV2ZW50IHVuaXF1ZSBJRAo7IEB7aW1hZ2VzcmN9QAo6IExpbmsg
dG8gaW1hZ2UKOyBAe2ltYWdlaWR9QAo6IElEIyBvZiBpbWFnZSAod2hlbiB1c2luZyBpbWFn
ZXMgZnJvbSBjYXRlZ29yaWVzKQoKCmgyLiBFeGFtcGxlcwoKCmgzLiBFeGFtcGxlIDEgKHVz
aW5nIGEgcHVibGljIEdvb2dsZSBDYWxlbmRhcikKCmJjLiA8dHhwOm1rYV9pY2FsIGdvb2ds
ZW1haWw9IllPVVJBRERSRVNTTkFNRUBnb29nbGVtYWlsLmNvbSIgLz4KCiogKmdvb2dsZW1h
aWwqOiBZb3VyIEdvb2dsZU1haWwgYWRkcmVzcyBvciBuYW1lLgoKCmgzLiBFeGFtcGxlIDIg
KHVzaW5nIGEgY3VzdG9tIHVybCBhbmQgYWRkaXRpb25hbCBvcHRpb25zKQoKYmMuIDx0eHA6
bWthX2ljYWwgdXJsPSJodHRwczovL2RvbWFpbi5jb20vdXJsLW9mLWljcy1maWxlL2NhbGVu
ZGFyLmljcyIKICAgIHBhc3RldmVudHM9IjEiIGltZz0iMSIgaW1nZm9sZGVyPSJpbWFnZXMv
ZXZlbnRzLyIgZGVmYXVsdGltZz0ibm9uZS5naWYiIC8+CgoqICp1cmwqOiBVUkwgb2YgYSBj
YWxlbmRhciBmaWxlCiogKnBhc3RldmVudHMqOiBbMCwxXSBTaG93IHBhc3QgZXZlbnRzPwoq
ICpsaW1pdCo6IFswLDEsMiwzLDQs4oCmXSBTaG93IG9ubHkgWCBldmVudHMKKiAqaW1nKjog
WzAsMV0gU2hvdyBpbWFnZXM/CiogKmltZ2ZvbGRlcio6IFdoZXJlIGFyZSB0aGUgaW1hZ2Vz
PwoqICpkZWZhdWx0aW1nKjogTmFtZSBvZiB0aGUgZGVmYXVsdCBpbWFnZQoKCmgzLiBFeGFt
cGxlIDMgKG1rYV9pY2FsIGFzIGEgY29udGFpbmVyIHRhZykKCmJjLi4gPHR4cDpta2FfaWNh
bCB3cmFwdGFnPSIiIGJyZWFrPSIiCiAgICBnb29nbGVtYWlsPSJZT1VSQUREUkVTU05BTUVA
Z29vZ2xlbWFpbC5jb20iPgogICAgPGRpdiBjbGFzcz0iaC1ldmVudCI+IDwhLS0gbWljcm9k
YXRhIGgtZXZlbnQgLS0+CiAgICA8aDEgY2xhc3M9InAtbmFtZSI+e3RpdGxlfTwvaDE+CiAg
ICA8cCBjbGFzcz0iaC1ldmVudF9fbWV0YSI+CiAgICBGcm9tIDx0aW1lIGNsYXNzPSJkdC1z
dGFydCIgZGF0ZXRpbWU9IntzdGFydF9kYXRldGltZX0iPntzdGFydF9kYXRlfSB7c3RhcnRf
dGltZX08L3RpbWU+CiAgICAgICAgdG8gPHRpbWUgY2xhc3M9ImR0LWVuZCIgZGF0ZXRpbWU9
IntlbmRfZGF0ZXRpbWV9Ij57ZW5kX3RpbWV9PC90aW1lPgogICAgICAgIGF0IDxzcGFuIGNs
YXNzPSJwLWxvY2F0aW9uIj57bG9jYXRpb259PC9zcGFuPgogICAgPC9wPgogICAgPGltZyBj
bGFzcz0iZXZlbnQtaW1nIiBzcmM9IntpbWFnZXNyY30iIGJvcmRlcj0iMCIgYWxpZ249Imxl
ZnQiPgogICAgPHAgY2xhc3M9InAtc3VtbWFyeSI+e2Rlc2NyaXB0aW9ufTwvcD4KICAgIDxh
IGNsYXNzPSJ1LXVybCIgaHJlZj0ie2V2ZW50X3VybH0iPk1vcmUgaW5mb3JtYXRpb248L2E+
CiAgICA8L2Rpdj4KPC90eHA6bWthX2ljYWw+CgpoMy4gRXhhbXBsZSA0IChtb250aCB5ZWFy
IGhlYWRpbmdzIHVzaW5nIGlmX2RpZmZlcmVudCBhbmQgbWthX2Zvcm1hdF9kYXRlKQoKYmMu
LiA8dHhwOm1rYV9pY2FsIHVybD0iY2FsZW5kYXIuaWNzIiB3cmFwdGFnPSIiIGJyZWFrPSIi
PgogICAgPHR4cDp2YXJpYWJsZSBuYW1lPSJtb250aF95ZWFyIj48dHhwOm1rYV9mb3JtYXRf
ZGF0ZSBmb3JtYXQ9IiVCICVZIj57c3RhcnRfZGF0ZX08L3R4cDpta2FfZm9ybWF0X2RhdGU+
PC90eHA6dmFyaWFibGU+CiAgICA8dHhwOmlmX2RpZmZlcmVudD48dHhwOnZhcmlhYmxlIG5h
bWU9Im1vbnRoX3llYXIiIHdyYXB0YWc9ImgyIiAvPjwvdHhwOmlmX2RpZmZlcmVudD4KICAg
IDxkaXYgY2xhc3M9ImgtZXZlbnQiPgogICAgICAgIDxwIGNsYXNzPSJoLWV2ZW50X19tZXRh
Ij4KICAgICAgICAgICAgPHRpbWUgY2xhc3M9ImR0LXN0YXJ0IiBkYXRldGltZT0ie3N0YXJ0
X2RhdGV0aW1lfSI+e3N0YXJ0X2RhdGV9PC90aW1lPiDigJMKICAgICAgICAgICAgPHRpbWUg
Y2xhc3M9ImR0LWVuZCIgZGF0ZXRpbWU9IntlbmRfZGF0ZXRpbWV9Ij57ZW5kX3RpbWV9PC90
aW1lPiwKICAgICAgICAgICAgPHNwYW4gY2xhc3M9InAtbG9jYXRpb24iPntsb2NhdGlvbn08
L3NwYW4+CiAgICAgICAgPC9wPgogICAgICAgIDx0eHA6ZXZhbHVhdGUgd3JhcHRhZz0icCIg
Y2xhc3M9ImRlc2NyaXB0aW9uIj57ZGVzY3JpcHRpb259PC90eHA6ZXZhbHVhdGU+CiAgICA8
L2Rpdj4KPC90eHA6bWthX2ljYWw+CgoKaDMuIFN0YW5kYXJkIG91dHB1dAoKYmMuLiA8c3Bh
biBjbGFzcz0iZGF0ZSI+e2RhdGV9PC9zcGFuPgo8c3BhbiBjbGFzcz0idGl0bGUiPnt0aXRs
ZX08L3NwYW4+CjxzcGFuIGNsYXNzPSJkZXNjcmlwdGlvbiI+e2Rlc2NyaXB0aW9ufTwvc3Bh
bj4KCgpoMi4gQ2hhbmdlbG9nCgoqICowLjcuMCog4oCTIFRleHRwYXR0ZXJuIHY0LjcgYW5k
IHBocCA3IGNvbXBhdGliaWxpdHkgKGpvb2xzLXIpCioqIFBsdWdpbiBjbGVhbnVwIGFuZCBy
ZWNvbmZpZ3VyYXRpb24gZm9yIHJhaF9ibG9iaW4vcGx1Z2luIGNvbXBpbGVyCioqIEluY2x1
c2lvbiBvZiB1cGRhdGVkIGljYWwgcGFyc2VyIGxpYnJhcnkgKHBocDUuNisgY29tcGF0aWJp
bGl0eSkgaW4gcGx1Z2luCioqIFVwZGF0ZWQgZ29vZ2xlIGNhbGVuZGFyIFVSTAoqKiBOZXcg
J21rYV9pZl9maXJzdF9ldmVudCcgdGFnCioqIE5ldyAnbWthX2lmX2xhc3RfZXZlbnQnIHRh
ZwoqKiBOZXcgJ21rYV9mb3JtYXRfZGF0ZScgdGFnCioqIFRhZyByZWdpc3RyYXRpb24gZm9y
IFR4cCA0LjYrCioqIFVwZGF0ZWQgaGVscAoqKiBBZGRpdGlvbmFsIHJlcGxhY2VtZW50IHBs
YWNlaG9sZGVycwoqKiBBdHRyaWJ1dGUgJ2Nzc2lkJyByZW5hbWVkIHRvICdodG1sX2lkJyBp
biBsaW5lIHdpdGggb3RoZXIgdHhwIHRhZ3MgKGNzc2lkIHN0aWxsIGFjY2VwdGVkIGZvciBu
b3cpCioqIE5ldyAnZ29vZ2xlbWFpbGRvbWFpbicgYXR0cmlidXRlIGlmIHVzaW5nIGp1c3Qg
Z29vZ2xlIHVzZXJuYW1lIGJ1dCBuZWVkIHRvIHVzZSAnZ21haWwnIHJhdGhlciB0aGFuICdn
b29nbGVtYWlsJyAoZGVmYXVsdCBzZXR0aW5nKQoqKiBDYWNoZWQganNvbiBmaWxlIG5vdyBs
b2NhdGVkIGluIC90bXAgZm9sZGVyIChhcyBkZWZpbmVkIGluIHByZWZzKSwgbm90IC9maWxl
cwoqICowLjYuMyog4oCTIERlYnVnIGRldGFpbHMgcmVtb3ZlZCAoTWFydGluIEtvemlhbmth
KQoqICowLjYuMiogLSBPdXRwdXQgdGhlIGRhdGUgd2l0aCAqc3RyZnRpbWUqLiBSZXNvbHZl
OiBlcnJvciB3aGVuIGRpc3BsYXlpbmcgd2l0aG91dCBpbWFnZSAoTWFydGluIEtvemlhbmth
KQoqICowLjYuMSog4oCTIEZpcnN0IHB1YmxpYyB2ZXJzaW9uIChNYXJ0aW4gS296aWFua2Ep
CgoKaDIuIENyZWRpdHMKClRoaXMgcGx1Z2luIHdhcyBvcmlnaW5hbGx5IHRoZSB3b3JrIG9m
IE1hcnRpbiBLb3ppYW5rYSAoImtvemlhbmthLmRlIjpodHRwczovL2tvemlhbmthLmRlKSBh
bmQgaGFzIHNpbmNlIGJlZW4gdXBkYXRlZCB0byB3b3JrIHdpdGggVGV4dHBhdHRlcm4gNC43
Ky4KCkl0IG1ha2VzIHVzZSBvZiB0aGUgSUNhbCBwYXJzaW5nIGxpYnJhcnkgIlRLci9pbnRv
dWNoLWlDYWxlbmRhciI6aHR0cHM6Ly9naXRodWIuY29tL1RLci9pbnRvdWNoLWlDYWxlbmRh
ciB3aGljaCBpcyBhIGZvcmsgb2YgImludG91Y2gtaUNhbGVuZGFyIjpodHRwczovL2dpdGh1
Yi5jb20vbWZrYWhuL2ludG91Y2gtaUNhbGVuZGFyIHdoaWNoIGlzIGluIHR1cm4gYmFzZWQg
b24gIlNHLWlDYWxlbmRhciI6aHR0cDovL3NldmVuZ29zbGluZ3MubmV0L2ljYWxlbmRhciBi
eSBNb3J0ZW4gRmFuZ2VsLgoiO3M6MzoibWQ1IjtzOjMyOiI1NTA0NzY3MThhYTFhNGM0ZGFj
ZjcwYzYzY2YyMmZjNyI7fQ==
